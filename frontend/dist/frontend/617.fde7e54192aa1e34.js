"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[617],{3617:(ky,Hd,ua)=>{ua.d(Hd,{q:()=>by,C:()=>xy});var Ri=ua(9468);class Gn{constructor(t,e,i){this._encode=t,this._decode=e,this._rangeCallback=i}floor(t){const e=new Date(t),i=this._encode(e);return this._decode(i)}ceil(t){const e=new Date(Number(t)-1),i=this._encode(e);return this._decode(i+1)}range(t,e,i){var n;const o=null===(n=this._rangeCallback)||void 0===n?void 0:n.call(this,t,e),r=this._encode(i?this.floor(t):this.ceil(t)),a=this._encode(i?this.ceil(e):this.floor(e));if(a<r)return[];const l=[];for(let c=r;c<=a;c++){const d=this._decode(c);l.push(d)}return o?.(),l}}class re extends Gn{getOffset(t,e){const i="number"==typeof t||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(i)%e}every(t,e){let n,i=0;const{snapTo:o="start"}=e??{};if("string"==typeof o){const l=i;n=(c,d)=>(i=this.getOffset("start"===o?c:d,t),()=>i=l)}else"number"==typeof o?i=this.getOffset(new Date(o),t):o instanceof Date&&(i=this.getOffset(o,t));return new Gn(l=>{const c=this._encode(l);return Math.floor((c-i)/t)},l=>this._decode(l*t+i),n)}}const pa=new re(function Xd(s){return s.getTime()},function Kd(s){return new Date(s)});new Date(0).getFullYear();const ae=6e4,We=60*ae,fi=24*We,jn=7*fi,Yn=30*fi,ws=365*fi,fa=(new Date).getTimezoneOffset()*ae,ga=new re(function $d(s){return Math.floor((s.getTime()-fa)/1e3)},function qd(s){return new Date(fa+1e3*s)}),ya=(new Date).getTimezoneOffset()*ae,ma=new re(function Zd(s){return Math.floor((s.getTime()-ya)/ae)},function Jd(s){return new Date(ya+s*ae)}),va=(new Date).getTimezoneOffset()*ae,ba=new re(function Qd(s){return Math.floor((s.getTime()-va)/We)},function th(s){return new Date(va+s*We)}),xa=new re(function eh(s){const t=6e4*s.getTimezoneOffset();return Math.floor((s.getTime()-t)/fi)},function ih(s){const t=new Date(1970,0,1);return t.setDate(t.getDate()+s),t});function Ci(s){const t=new Date(2023,0,1+s).getTime();return new re(function e(n){const o=n.getTime();return Math.floor((o-t)/jn)},function i(n){const o=new Date(t);return o.setDate(o.getDate()+7*n),o})}const Sa=Ci(0);Ci(1),Ci(2),Ci(3),Ci(4),Ci(5),Ci(6);const _a=new re(function ch(s){return 12*s.getFullYear()+s.getMonth()},function dh(s){const t=Math.floor(s/12);return new Date(t,s-12*t,1)}),ka=new re(function hh(s){return s.getFullYear()},function uh(s){const t=new Date;return t.setFullYear(s),t.setMonth(0,1),t.setHours(0,0,0,0),t});function le(s,t){var e={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&t.indexOf(i)<0&&(e[i]=s[i]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(s);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(s,i[n])&&(e[i[n]]=s[i[n]])}return e}function m(s,t,e,i){var r,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(t,e,o):r(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o}function v(s,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(s,t)}function R(s,t,e,i){return new(e||(e=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(h){r(h)}}function l(d){try{c(i.throw(d))}catch(h){r(h)}}function c(d){d.done?o(d.value):function n(o){return o instanceof e?o:new e(function(r){r(o)})}(d.value).then(a,l)}c((i=i.apply(s,t||[])).next())})}new re(function ph(s){return Math.floor(s.getTime()/ae)},function fh(s){return new Date(s*ae)}),new re(function yh(s){return Math.floor(s.getTime()/We)},function mh(s){return new Date(s*We)}),new re(function bh(s){return Math.floor(s.getTime()/fi)},function xh(s){const t=new Date(0);return t.setUTCDate(t.getUTCDate()+s),t.setUTCHours(0,0,0,0),t}),new re(function _h(s){return 12*s.getUTCFullYear()+s.getUTCMonth()},function kh(s){const t=Math.floor(s/12);return new Date(Date.UTC(t,s-12*t,1))}),new re(function Eh(s){return s.getUTCFullYear()},function Ah(s){const t=new Date;return t.setUTCFullYear(s),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),t}),"function"==typeof SuppressedError&&SuppressedError;const en={isEnterprise:!1};class Ro{constructor(){this.destroyFns=[]}destroy(){for(const t of this.destroyFns)t()}}const ze=[];function Ve(s){const t=ze.find(e=>s.type===e.type&&s.optionsKey===e.optionsKey&&s.identifier===e.identifier);if(t){if("enterprise"===s.packageType&&"community"===t.packageType){const e=ze.indexOf(t);ze.splice(e,1,s)}}else ze.push(s)}function Cs(){return ze.some(s=>"enterprise"===s.packageType)}const wo=new Map;function Oa(s,t){wo.set(s,t)}function Ee(s){const{length:t}=s;if(0===t)return;let e=1/0,i=-1/0;for(let o=0;o<t;o++){let r=s[o];r instanceof Date&&(r=r.getTime()),"number"==typeof r&&(r<e&&(e=r),r>i&&(i=r))}const n=[e,i];return n.some(o=>!isFinite(o))?void 0:n}function Wn(s,t,e){var i;let n=!1;return s.length>2&&(s=null!==(i=Ee(s))&&void 0!==i?i:[NaN,NaN]),isNaN(t)||(n||(n=t>s[0]),s=[t,s[1]]),isNaN(e)||(n||(n=e<s[1]),s=[s[0],e]),s[0]>s[1]&&(s=[]),{extent:s,clipped:n}}function zn(s,t){if(null==s||null==t||s.length!==t.length)return!1;for(let e=0;e<s.length;e++)if(Array.isArray(s[e])&&Array.isArray(t[e])){if(!zn(s[e],t[e]))return!1}else if(s[e]!==t[e])return!1;return!0}function Is(s){return typeof s>"u"?[]:Array.isArray(s)?s:[s]}const Aa={};function Da(s,t){Aa[t]||(s(),Aa[t]=!0)}const B={log(...s){console.log(...s)},warn(s,...t){console.warn(`AG Charts - ${s}`,...t)},error(s,...t){"object"==typeof s?console.error("AG Charts error",s,...t):console.error(`AG Charts - ${s}`,...t)},table(...s){console.table(...s)},warnOnce(s,...t){Da(()=>B.warn(s,...t),`Logger.warn: ${s}`)},errorOnce(s,...t){Da(()=>B.error(s,...t),`Logger.warn: ${s}`)}};function Co(s){const t=typeof window<"u"?window:void 0;return t?.[s]}let Ta=Date.now();const Tt={create:(...s)=>(...t)=>{Tt.check(...s)&&("function"==typeof t[0]&&(t=Is(t[0]())),(()=>{const s=Date.now()-Ta;if(s>2e3){const t=(Math.floor(s/100)/10).toFixed(1);B.log(`**** ${t}s since last log message ****`)}Ta=Date.now()})(),B.log(...t))},check:(...s)=>(0===s.length&&s.push(!0),Is(Co("agChartsDebug")).some(e=>s.includes(e)))},Io=Symbol("BREAK"),Vn="__decorator_config";function Un(s,t){return(e,i)=>{const n=i.toString(),o=`__${n}`,{getters:r,setters:a}=function Lh(s,t,e,i){null==Object.getOwnPropertyDescriptor(s,Vn)&&Object.defineProperty(s,Vn,{value:{}});const n=s[Vn];if(null!=n[e])return n[e];n[e]={setters:[],getters:[]};const o=Object.getOwnPropertyDescriptor(s,t),r=o?.set,a=o?.get;return Object.defineProperty(s,t,{set:function(d){var h,u;const p=null!==(u=null===(h=n[e])||void 0===h?void 0:h.setters)&&void 0!==u?u:[];let f;p.some(g=>g.length>2)&&(f=a?a.call(this):this[i]);for(const g of p)if((d=g(this,t,d,f))===Io)return;r?r.call(this,d):this[i]=d},get:function(){var d,h;let u=a?a.call(this):this[i];for(const p of null!==(h=null===(d=n[e])||void 0===d?void 0:d.getters)&&void 0!==h?h:[])if(u=p(this,t,u),u===Io)return;return u},enumerable:!0,configurable:!1}),n[e]}(e,i,n,o);a.push(s),t&&r.unshift(t)}}function Po(s){return typeof s<"u"&&Vn in s}function Fo(s){const t=new Set;for(;Po(s);)t.add(s?.[Vn]),s=Object.getPrototypeOf(s);return Array.from(t).flatMap(e=>Object.keys(e))}const Hn="class-instance";function Ue(s,t){const e=ye(s),i=ye(t);if("array"===i){const c=t;return"array"!==e||s.length!==c.length||c.some((d,h)=>null!=Ue(s?.[h],d))?[...c]:null}if("primitive"===i)return"primitive"!==e?Object.assign({},t):s!==t?t:null;const n=s||{},o=t||{},r=new Set([...Object.keys(n),...Object.keys(o)]);let a=0;const l={};for(const c of r){if(n[c]===o[c])continue;const d=f=>{l[c]=f,a++},h=ye(n[c]),u=ye(o[c]);if(h!==u){d(o[c]);continue}if("primitive"===u||null===u){d(o[c]);continue}if("array"===u&&n[c].length!==o[c].length){d(o[c]);continue}if(u===Hn){d(o[c]);continue}if("function"===u&&n[c]!==o[c]){d(o[c]);continue}const p=Ue(n[c],o[c]);null!==p&&d(p)}return 0===a?null:l}const ge=Symbol("<delete-property>"),Na=Symbol("<unspecified-property>");function _t(s,t){var e;const i=null!==(e=t?.avoidDeepClone)&&void 0!==e?e:[];if(s.map(a=>ye(a)).some(a=>"array"===a)){const a=s[s.length-1];return Array.isArray(a)?a.map(l=>{const c=ye(l);return"array"===c?_t([[],l],t):"object"===c?_t([{},l],t):l}):a}const o={},r=new Set(s.map(a=>null!=a?Object.keys(a):[]).reduce((a,l)=>a.concat(l),[]));for(const a of r){const l=s.map(u=>null!=u&&"object"==typeof u&&a in u?u[a]:Na).filter(u=>u!==Na);if(0===l.length)continue;const c=l[l.length-1];if(c===ge)continue;const d=l.map(u=>ye(u)),h=d[0];o[a]=d.some(u=>u!==h)?c:"array"!==h&&"object"!==h||i.includes(a)?"array"===h?[...c]:c:_t(l,t)}return o}function nn(s,t,e={}){var i,n,o;const{path:r,matcherPath:a=(r?r.replace(/(\[[0-9+]+])/i,"[]"):void 0),skip:l=[],constructors:c={},constructedArrays:d=new WeakMap,allowedTypes:h={},idx:u}=e;if(null==s)throw new Error(`AG Charts - target is uninitialised: ${r??"<root>"}`);if(null==t)return s;const p=s;null!=u&&"_declarationOrder"in p&&(p._declarationOrder=u);const f=ye(s);for(const g in t){const y=`${a?a+".":""}${g}`;if(l.indexOf(y)>=0)continue;const b=t[g],_=`${r?r+".":""}${g}`,x=p.constructor,k=p[g];let E=null!==(i=c[y])&&void 0!==i?i:c[g];try{const O=ye(k),A=ye(b);if(f===Hn&&!(g in s)&&!Object.prototype.hasOwnProperty.call(p,g)){B.warn(`unable to set [${_}] in ${x?.name} - property is unknown`);continue}const D=null!==(n=h[y])&&void 0!==n?n:[O];if((O!==Hn||"object"!==A)&&null!=O&&null!=A&&!D.includes(A)){B.warn(`unable to set [${_}] in ${x?.name} - can't apply type of [${A}], allowed types are: [${D}]`);continue}"array"===A?(E=null!==(o=E??d.get(k))&&void 0!==o?o:c[`${y}[]`],p[g]=null!=E?b.map((T,N)=>nn(new E,T,Object.assign(Object.assign({},e),{path:_,matcherPath:y+"[]",idx:N}))):b):A===Hn?p[g]=b:"object"===A?null!=k?nn(k,b,Object.assign(Object.assign({},e),{path:_,matcherPath:y,idx:void 0})):p[g]=null!=E?nn(new E,b,Object.assign(Object.assign({},e),{path:_,matcherPath:y,idx:void 0})):b:p[g]=b}catch(O){B.warn(`unable to set [${_}] in [${x?.name}]; nested error is: ${O.message}`)}}return s}function Ii(s,t,e,...i){const n=ye(s),{skip:o=[]}=e??{};if("array"===n)return t(n,s,...i),void s.forEach((r,a)=>{Ii(r,t,e,...(i??[]).map(l=>l?.[a]))});if("object"===n){t(n,s,...i);for(const r in s){if(o.includes(r))continue;const a=s[r],l=i?.map(d=>d?.[r]),c=ye(a);("object"===c||"array"===c)&&Ii(a,t,e,...l)}}}const wh=typeof window<"u";function ye(s){return null==s?null:wh&&s instanceof HTMLElement?"primitive":Array.isArray(s)?"array":s instanceof Date?"primitive":"object"==typeof s&&s.constructor===Object?"object":"function"==typeof s?"function":"object"==typeof s&&null!=s.constructor?Hn:"primitive"}const He=2*Math.PI;function Ut(s){return s%=He,(s+=He)%He}function Ps(s){return(s%=He)<-Math.PI?s+=He:s>=Math.PI&&(s-=He),s}function ce(s){return s/180*Math.PI}function Bo(s,t,e){return Math.max(t,Math.min(e,s))}class sn{constructor(){this.type="band",this.cache=null,this.cacheProps=["_domain","range","_paddingInner","_paddingOuter","round","interval"],this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}didChange(){const{cache:t}=this;return!(t&&!this.cacheProps.some(i=>this[i]!==t[i])||(this.cache={},this.cacheProps.forEach(i=>this.cache[i]=this[i]),0))}refresh(){this.didChange()&&this.update()}set domain(t){const e=[];this.index=new Map;const i=this.index;t.forEach(n=>{void 0===i.get(n)&&i.set(n,e.push(n)-1)}),this._domain=e}get domain(){return this._domain}ticks(){this.refresh();const{interval:t=1}=this,e=Math.abs(Math.round(t));return this._domain.filter((i,n)=>n%e==0)}convert(t){this.refresh();const e=this.index.get(t);if(void 0===e)return NaN;const i=this.ordinalRange[e];return void 0===i?NaN:i}invert(t){this.refresh();const e=this.ordinalRange.findIndex(i=>i===t);return this.domain[e]}get bandwidth(){return this.refresh(),this._bandwidth}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=Bo(t,0,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this._paddingInner=Bo(t,0,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this._paddingOuter=Bo(t,0,1)}get paddingOuter(){return this._paddingOuter}update(){const t=this._domain.length;if(0===t)return;const e=this.round,i=this._paddingInner,n=this._paddingOuter,[o,r]=this.range,a=r-o,l=a/Math.max(1,t+2*n-i),c=e?Math.floor(l):l,h=o+(a-c*(t-i))/2,u=e?Math.round(h):h,p=c*(1-i),f=e?Math.round(p):p,g=l*(1-i),y=[];for(let b=0;b<t;b++)y.push(u+c*b);this._bandwidth=f,this._rawBandwidth=g,this.ordinalRange=y}}function Ae(s,t,e){return Math.min(e,Math.max(s,t))}function Xn(s){return Math.sign(s)<0||Object.is(s,-0)}class H{constructor(t,e,i,n=1){this.r=Ae(0,t||0,1),this.g=Ae(0,e||0,1),this.b=Ae(0,i||0,1),this.a=Ae(0,n||0,1)}static validColorString(t){return t.indexOf("#")>=0?!!H.parseHex(t):t.indexOf("rgb")>=0?!!H.stringToRgba(t):!!H.nameToHex[t.toLowerCase()]}static fromString(t){if(t.indexOf("#")>=0)return H.fromHexString(t);const e=H.nameToHex[t.toLowerCase()];if(e)return H.fromHexString(e);if(t.indexOf("rgb")>=0)return H.fromRgbaString(t);throw new Error(`Invalid color string: '${t}'`)}static tryParseFromString(t){try{return H.fromString(t)}catch{return B.warnOnce(`invalid color string: '${t}'.`),H.fromArray([0,0,0])}}static parseHex(t){let e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(let i=0;i<t.length;i+=2)e.push(parseInt(`${t[i]}${t[i+1]}`,16));break;case 3:case 4:e=t.split("").map(i=>parseInt(i,16)).map(i=>i+16*i)}if(e?.length>=3&&e.every(i=>i>=0))return 3===e.length&&e.push(255),e}static fromHexString(t){const e=H.parseHex(t);if(e){const[i,n,o,r]=e;return new H(i/255,n/255,o/255,r/255)}throw new Error(`Malformed hexadecimal color string: '${t}'`)}static stringToRgba(t){let[e,i]=[NaN,NaN];for(let a=0;a<t.length;a++){const l=t[a];if(e||"("!==l){if(")"===l){i=a;break}}else e=a}const n=e&&i&&t.substring(e+1,i);if(!n)return;const o=n.split(","),r=[];for(let a=0;a<o.length;a++){const l=o[a];let c=parseFloat(l);if(isNaN(c))return;l.indexOf("%")>=0?(c=Math.max(0,Math.min(100,c)),c/=100):3===a?c=Math.max(0,Math.min(1,c)):(c=Math.max(0,Math.min(255,c)),c/=255),r.push(c)}return r}static fromRgbaString(t){const e=H.stringToRgba(t);if(e){if(3===e.length)return new H(e[0],e[1],e[2]);if(4===e.length)return new H(e[0],e[1],e[2],e[3])}throw new Error(`Malformed rgb/rgba color string: '${t}'`)}static fromArray(t){if(4===t.length)return new H(t[0],t[1],t[2],t[3]);if(3===t.length)return new H(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,e,i,n=1){const o=H.HSBtoRGB(t,e,i);return new H(o[0],o[1],o[2],n)}static fromHSL(t,e,i,n=1){const o=H.HSLtoRGB(t,e,i);return new H(o[0],o[1],o[2],n)}static padHex(t){return 1===t.length?"0"+t:t}toHexString(){let t="#"+H.padHex(Math.round(255*this.r).toString(16))+H.padHex(Math.round(255*this.g).toString(16))+H.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(t+=H.padHex(Math.round(255*this.a).toString(16))),t}toRgbaString(t=3){const e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*i)/i),`rgba(${e.join(", ")})`):`rgb(${e.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return H.RGBtoHSB(this.r,this.g,this.b)}static RGBtoHSL(t,e,i){const n=Math.min(t,e,i),o=Math.max(t,e,i),r=(o+n)/2;let a,l;if(o===n)a=NaN,l=0;else{const c=o-n;l=r>.5?c/(2-o-n):c/(o+n),a=o===t?(e-i)/c+(e<i?6:0):o===e?(i-t)/c+2:(t-e)/c+4,a*=60}return[a,l,r]}static HSLtoRGB(t,e,i){if(0===e)return[i,i,i];const n=i<.5?i*(1+e):i+e-i*e,o=2*i-n;function r(d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?o+6*(n-o)*d:d<.5?n:d<2/3?o+(n-o)*(2/3-d)*6:o}return[r(t/360+1/3),r(t/360),r(t/360-1/3)]}static RGBtoHSB(t,e,i){const n=Math.min(t,e,i),o=Math.max(t,e,i);let a=NaN;if(n!==o){const l=o-n,c=(o-t)/l,d=(o-e)/l,h=(o-i)/l;a=t===o?h-d:e===o?2+c-h:4+d-c,a/=6,a<0&&(a+=1)}return[360*a,0!==o?(o-n)/o:0,o]}static HSBtoRGB(t,e,i){isNaN(t)&&(t=0),t=(t%360+360)%360/360;let n=0,o=0,r=0;if(0===e)n=o=r=i;else{const a=6*(t-Math.floor(t)),l=a-Math.floor(a),c=i*(1-e),d=i*(1-e*l),h=i*(1-e*(1-l));switch(a>>0){case 0:n=i,o=h,r=c;break;case 1:n=d,o=i,r=c;break;case 2:n=c,o=i,r=h;break;case 3:n=c,o=d,r=i;break;case 4:n=h,o=c,r=i;break;case 5:n=i,o=c,r=d}}return[n,o,r]}derive(t,e,i,n){const o=H.RGBtoHSB(this.r,this.g,this.b);let r=o[2];0==r&&i>1&&(r=.05);const a=((o[0]+t)%360+360)%360,l=Math.max(Math.min(o[1]*e,1),0);r=Math.max(Math.min(r*i,1),0);const c=Math.max(Math.min(this.a*n,1),0),d=H.HSBtoRGB(a,l,r);return d.push(c),H.fromArray(d)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(t,e){const i=H.tryParseFromString(t),n=H.tryParseFromString(e);return o=>{const r=(l,c)=>l*(1-o)+c*o;return new H(r(i.r,n.r),r(i.g,n.g),r(i.b,n.b),r(i.a,n.a)).toString()}}}function S(s){return Un((t,e,i)=>{var n,o,r;if(s(i,{target:t}))return i;const a=e.toString().replace(/^_*/,"");let l=null!==(o=null===(n=t.constructor)||void 0===n?void 0:n.className)&&void 0!==o?o:null===(r=t.constructor)||void 0===r?void 0:r.name;l?.length<3&&(l=null);const c=l?`of [${l}] `:"";return B.warn(s.message?`Property [${a}] ${c}cannot be set to [${La(i)}]; ${s.message}, ignoring.`:`Property [${a}] ${c}cannot be set to [${La(i)}], ignoring.`),Io})}function La(s){return"number"==typeof s&&isNaN(s)?"NaN":s===1/0?"Infinity":s===-1/0?"-Infinity":JSON.stringify(s)}function j(s,t){return s.message=t,s}H.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});const gt=(s,t,e)=>void 0===s||e(s,t),ti=(s,t)=>j((e,i)=>Array.isArray(e)&&(!s||e.length===s)&&(!t||e.every(n=>t(n,i))),"expecting an Array"),Bs=s=>j((t,e)=>gt(t,e,ti(s)),"expecting an optional Array"),Xe=(j(s=>Array.isArray(s)&&s.length>0,"expecting a non-empty Array"),(...s)=>j((t,e)=>s.every(i=>i(t,e)),s.map(t=>t.message).filter(t=>null!=t).join(" AND "))),Gs=s=>null!=s&&!isNaN(s),Kn=s=>j((t,e)=>!Gs(t)||!Gs(e.target[s])||t<e.target[s],`expected to be less than ${s}`),on=s=>j((t,e)=>!Gs(t)||!Gs(e.target[s])||t>e.target[s],`expected to be greater than ${s}`),wa=j(s=>"function"==typeof s,"expecting a Function"),Ke=j((s,t)=>gt(s,t,wa),"expecting an optional Function"),nt=j(s=>!0===s||!1===s,"expecting a Boolean"),De=j((s,t)=>gt(s,t,nt),"expecting an optional Boolean"),$t=j(s=>"string"==typeof s,"expecting a String"),Y=j((s,t)=>gt(s,t,$t),"expecting an optional String"),Wo=j(s=>s instanceof Date&&!isNaN(+s),"expecting a Date object"),Ca=j((s,t)=>gt(s,t,Wo),"expecting an optional Date"),Ia=(j(ti(void 0,Wo),"expecting an Array of Date objects"),C(0)),zo=((...s)=>j((t,e)=>s.some(i=>i(t,e)),s.map(t=>t.message).filter(t=>null!=t).join(" OR ")))(Ca,j((s,t)=>gt(s,t,Ia),"expecting an optional number")),js="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",me=j(s=>"string"==typeof s&&H.validColorString(s),`expecting a color String. ${js}`),St=j((s,t)=>gt(s,t,me),`expecting an optional color String. ${js}`),rn=j(ti(void 0,me),`expecting an Array of color strings. ${js}`),$n=j((s,t)=>gt(s,t,rn),`expecting an optional Array of color strings. ${js}`);function Vo(s="expecting a finite Number",t,e){let i=s;return void 0!==t&&void 0!==e?i+=` between ${t} and ${e} inclusive`:void 0!==t?i+=` greater than or equal to ${t}`:void 0!==e&&(i+=` less than or equal to ${e}`),i}function C(s,t){return j(i=>"number"==typeof i&&Number.isFinite(i)&&(void 0===s||i>=s)&&(void 0===t||i<=t),Vo(void 0,s,t))}function Z(s,t){return j((i,n)=>gt(i,n,C(s,t)),Vo("expecting an optional finite Number",s,t))}function ei(s,t){return j(i=>"number"==typeof i&&(isNaN(i)||Number.isFinite(i)&&(void 0===s||i>=s)&&(void 0===t||i<=t)),Vo(void 0,s,t))}const Fa=j(ti(void 0,C()),"expecting an Array of numbers"),Ys=j((s,t)=>gt(s,t,Fa),"expecting an optional Array of numbers"),Uo=j(ti(void 0,$t),"expecting an Array of strings");function Ws(...s){return j(e=>"string"==typeof e&&s.indexOf(e)>=0,`expecting one of: ${s.join(", ")}`)}j((s,t)=>gt(s,t,Uo),"expecting an optional Array of strings");const Ba=j(ti(void 0,nt),"expecting an Array of boolean values"),Yh=(j((s,t)=>gt(s,t,Ba),"expecting an optional Array of boolean values"),["normal","bold","bolder","lighter"]),Ga=j(s=>"normal"===s||"italic"===s||"oblique"===s,"expecting a font style keyword such as 'normal', 'italic' or 'oblique'"),gi=j((s,t)=>gt(s,t,Ga),"expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'"),ja=j(s=>Yh.includes(s)||"number"==typeof s&&isFinite(s),"expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),yi=j((s,t)=>gt(s,t,ja),"expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),Ya=j(ti(void 0,C(0)),"expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),mi=j((s,t)=>gt(s,t,Ya),"expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),Wh=["butt","round","square"],Ho=j(s=>Wh.includes(s),"expecting a line cap keyword such as 'butt', 'round' or 'square'"),Vh=(j((s,t)=>gt(s,t,Ho),"expecting an optional line cap keyword such as 'butt', 'round' or 'square'"),["round","bevel","miter"]),Wa=j(s=>Vh.includes(s),"expecting a line join keyword such as 'round', 'bevel' or 'miter'"),Hh=(j((s,t)=>gt(s,t,Wa),"expecting an optional line join keyword such as 'round', 'bevel' or 'miter'"),["top","right","bottom","left"]),Xo=j(s=>Hh.includes(s),"expecting a position keyword such as 'top', 'right', 'bottom' or 'left"),Xh=["exact","nearest"],Ko=j(s=>"number"==typeof s&&Number.isFinite(s)||Xh.includes(s),"expecting an interaction range of 'exact', 'nearest' or a number"),Kh=["never","always","hyphenate","on-space"],$o=j(s=>Kh.includes(s),"expecting a text wrap strategy keyword such as 'never', 'always', 'hyphenate', or 'on-space'"),$h=["ellipsis","hide"],Zh=(j(s=>$h.includes(s),"expecting an overflow strategy keyword such as 'ellipsis', or 'hide'"),["left","center","right"]),Qh=(j(s=>Zh.includes(s),"expecting a text align keyword such as 'left', 'center', or 'right'"),["top","middle","bottom"]),eu=(j(s=>Qh.includes(s),"expecting a text align keyword such as 'top', 'middle', or 'bottom'"),["horizontal","vertical"]),qo=j(s=>eu.includes(s),"expecting a direction keyword such as 'horizontal' or 'vertical'");j((s,t)=>gt(s,t,qo),"expecting an optional direction keyword such as 'horizontal' or 'vertical'");var I=function(s){return s.X="x",s.Y="y",s}(I||{}),M=function(s){return s[s.NONE=0]="NONE",s[s.TRIVIAL=1]="TRIVIAL",s[s.MINOR=2]="MINOR",s[s.MAJOR=3]="MAJOR",s}(M||{});const su=function nu(){try{return new Function("return true"),!0}catch{return!1}}();function F(s){const{changeCb:t,convertor:e}=s??{};return function(i,n){const o=`__${n}`;i[n]||(su&&null==t&&null==e?function ou(s,t,e,i){const{redraw:n=M.TRIVIAL,type:o="normal",checkDirtyOnAssignment:r=!1}=i??{},a=new Function("value",`\n        const oldValue = this.${e};\n        if (value !== oldValue) {\n            this.${e} = value;\n            ${"normal"===o?`this.markDirty(this, ${n});`:""}\n            ${"transform"===o?`this.markDirtyTransform(${n});`:""}\n            ${"path"===o?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${n}); }`:""}\n            ${"font"===o?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${n}); }`:""}\n        }\n        ${r?`if (value != null && value._dirty > ${M.NONE}) { this.markDirty(value, value._dirty); }`:""}\n`),l=new Function(`return this.${e};`);Object.defineProperty(s,t,{set:a,get:l,enumerable:!0,configurable:!0})}(i,n,o,s):function ru(s,t,e,i){const{redraw:n=M.TRIVIAL,type:o="normal",changeCb:r,convertor:a,checkDirtyOnAssignment:l=!1}=i??{};Object.defineProperty(s,t,{set:function(h){const u=this[e];(h=a?a(h):h)!==u&&(this[e]=h,"normal"===o&&this.markDirty(this,n),"transform"===o&&this.markDirtyTransform(n),"path"===o&&!this._dirtyPath&&(this._dirtyPath=!0,this.markDirty(this,n)),"font"===o&&!this._dirtyFont&&(this._dirtyFont=!0,this.markDirty(this,n)),r&&r(this)),l&&null!=h&&h._dirty>M.NONE&&this.markDirty(h,h._dirty)},get:function(){return this[e]},enumerable:!0,configurable:!0})}(i,n,o,s))}}class Zo{constructor(){this._dirty=M.MAJOR}markDirty(t,e=M.TRIVIAL){this._dirty>e||(this._dirty=e)}markClean(t){this._dirty=M.NONE}isDirty(){return this._dirty>M.NONE}}const zs={};function ii(s){var t;const e=s.constructor,i=Object.prototype.hasOwnProperty.call(e,"className")?e.className:e.name;if(!i)throw new Error(`The ${e} is missing the 'className' property.`);const n=(null!==(t=zs[i])&&void 0!==t?t:0)+1;return zs[i]=n,i+"-"+n}class U{constructor(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}clone(){const{x:t,y:e,width:i,height:n}=this;return new U(t,e,i,n)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}isInfinite(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0}distanceSquared(t){if(this.containsPoint(t.x,t.y))return 0;const e=t.x-Math.max(this.x,Math.min(t.x,this.x+this.width)),i=t.y-Math.max(this.y,Math.min(t.y,this.y+this.height));return e*e+i*i}static nearestBox(t,e){return function Va(s,t,e=1/0){const i={nearest:void 0,distanceSquared:e};for(const n of t){const o=n.distanceSquared(s);if(0===o)return{nearest:n,distanceSquared:0};o<i.distanceSquared&&(i.nearest=n,i.distanceSquared=o)}return i}(t,e)}shrink(t,e){const i=(n,o)=>{switch(n){case"top":this.y+=o;case"bottom":this.height-=o;break;case"left":this.x+=o;case"right":this.width-=o;break;case"vertical":this.y+=o,this.height-=2*o;break;case"horizontal":this.x+=o,this.width-=2*o;break;case void 0:this.x+=o,this.width-=2*o,this.y+=o,this.height-=2*o}};return"number"==typeof t?i(e,t):Object.entries(t).forEach(([n,o])=>i(n,o)),this}grow(t,e){if("number"==typeof t)this.shrink(-t,e);else{const i=Object.assign({},t);for(const n in i)i[n]*=-1;this.shrink(i)}return this}static merge(t){let e=1/0,i=1/0,n=-1/0,o=-1/0;return t.forEach(r=>{r.x<e&&(e=r.x),r.y<i&&(i=r.y),r.x+r.width>n&&(n=r.x+r.width),r.y+r.height>o&&(o=r.y+r.height)}),new U(e,i,n-e,o-i)}}U.zero=new U(0,0,0,0);class Ct{get e(){return[...this.elements]}constructor(t=[1,0,0,1,0,0]){this.elements=t}setElements(t){const e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this}get identity(){const t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}AxB(t,e,i){const o=t[1]*e[0]+t[3]*e[1],r=t[0]*e[2]+t[2]*e[3],a=t[1]*e[2]+t[3]*e[3],l=t[0]*e[4]+t[2]*e[5]+t[4],c=t[1]*e[4]+t[3]*e[5]+t[5];(i=i??t)[0]=t[0]*e[0]+t[2]*e[1],i[1]=o,i[2]=r,i[3]=a,i[4]=l,i[5]=c}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(t){const e=new Array(6);return this.AxB(this.elements,t.elements,e),new Ct(e)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let e=t[0],i=t[1],n=t[2],o=t[3];const r=t[4],a=t[5],l=1/(e*o-i*n);return e*=l,i*=l,n*=l,o*=l,new Ct([o,-i,-n,e,n*a-o*r,i*r-e*a])}inverseTo(t){const e=this.elements;let i=e[0],n=e[1],o=e[2],r=e[3];const a=e[4],l=e[5],c=1/(i*r-n*o);return i*=c,n*=c,o*=c,r*=c,t.setElements([r,-n,-o,i,o*l-r*a,n*a-i*l]),this}invertSelf(){const t=this.elements;let e=t[0],i=t[1],n=t[2],o=t[3];const r=t[4],a=t[5],l=1/(e*o-i*n);return e*=l,i*=l,n*=l,o*=l,t[0]=o,t[1]=-i,t[2]=-n,t[3]=e,t[4]=n*a-o*r,t[5]=i*r-e*a,this}transformPoint(t,e){const i=this.elements;return{x:t*i[0]+e*i[2]+i[4],y:t*i[1]+e*i[3]+i[5]}}transformBBox(t,e){const i=this.elements,n=i[0],o=i[1],r=i[2],a=i[3],l=.5*t.width,c=.5*t.height,d=t.x+l,h=t.y+c,u=Math.abs(l*n)+Math.abs(c*r),p=Math.abs(l*o)+Math.abs(c*a);return e||(e=new U(0,0,0,0)),e.x=d*n+h*r+i[4]-u,e.y=d*o+h*a+i[5]-p,e.width=u+u,e.height=p+p,e}toContext(t){if(this.identity)return;const e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}static flyweight(t){return Ct.instance.setElements(t.elements)}static updateTransformMatrix(t,e,i,n,o,r,a){const[l,c]=[0,0],d=e,h=i;let u,p;1===d&&1===h?(u=0,p=0):(u=null==a?.scalingCenterX?l:a?.scalingCenterX,p=null==a?.scalingCenterY?c:a?.scalingCenterY);const f=n,g=Math.cos(f),y=Math.sin(f);let b,_;0===f?(b=0,_=0):(b=null==a?.rotationCenterX?l:a?.rotationCenterX,_=null==a?.rotationCenterY?c:a?.rotationCenterY);const E=u*(1-d)-b,O=p*(1-h)-_;return t.setElements([g*d,y*d,-y*h,g*h,g*E-y*O+b+o,y*E+g*O+_+r]),t}static fromContext(t){const e=t.getTransform();return new Ct([e.a,e.b,e.c,e.d,e.e,e.f])}}Ct.instance=new Ct;var qt=function(s){return s[s.All=0]="All",s[s.None=1]="None",s}(qt||{});const Ua=s=>{s.parent&&(s.parent.dirtyZIndex=!0),s.zIndexChanged()};class Ot extends Zo{get datum(){var t,e;return null!==(t=this._datum)&&void 0!==t?t:null===(e=this._parent)||void 0===e?void 0:e.datum}get previousDatum(){return this._previousDatum}set datum(t){this._datum!==t&&(this._previousDatum=this._datum),this._datum=t}_setLayerManager(t){this._layerManager=t,this._debug=t?.debug;for(const e of this._children)e._setLayerManager(t);for(const e of this._virtualChildren)e._setLayerManager(t)}get layerManager(){return this._layerManager}get parent(){return this._parent}get children(){if(0===this._virtualChildren.length)return this._children;const t=[...this._children];for(const e of this._virtualChildren)t.push(...e.children);return t}get virtualChildren(){return this._virtualChildren}hasVirtualChildren(){return this._virtualChildren.length>0}setProperties(t,e){const i=e??Object.keys(t);for(const n of i)this[n]=t[n];return this}append(t){Array.isArray(t)||(t=[t]);for(const e of t){if(e.parent)throw new Error(`${e} already belongs to another parent: ${e.parent}.`);if(e.layerManager)throw new Error(`${e} already belongs to a scene: ${e.layerManager}.`);if(this.childSet[e.id])throw new Error(`Duplicate ${e.constructor.name} node: ${e}`);e.isVirtual?this._virtualChildren.push(e):this._children.push(e),this.childSet[e.id]=!0,e._parent=this,e._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,M.MAJOR)}appendChild(t){return this.append(t),t}removeChild(t){const e=()=>{throw new Error("The node to be removed is not a child of this node.")};if(t.parent!==this&&e(),t.isVirtual){const i=this._virtualChildren.indexOf(t);i<0&&e(),this._virtualChildren.splice(i,1)}else{const i=this._children.indexOf(t);i<0&&e(),this._children.splice(i,1)}return delete this.childSet[t.id],t._parent=void 0,t._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(t,M.MAJOR),t}calculateCumulativeMatrix(){this.computeTransformMatrix();const t=Ct.flyweight(this.matrix);let e=this.parent;for(;e;)e.computeTransformMatrix(),t.preMultiplySelf(e.matrix),e=e.parent;return t}transformPoint(t,e){return this.calculateCumulativeMatrix().invertSelf().transformPoint(t,e)}inverseTransformPoint(t,e){return this.calculateCumulativeMatrix().transformPoint(t,e)}transformBBox(t){return this.calculateCumulativeMatrix().invertSelf().transformBBox(t)}inverseTransformBBox(t){return this.calculateCumulativeMatrix().transformBBox(t)}markDirtyTransform(){this.dirtyTransform=!0,this.markDirty(this,M.MAJOR)}constructor({isVirtual:t,tag:e}={}){super(),this.serialNumber=Ot._nextSerialNumber++,this.id=ii(this),this.isContainerNode=!1,this._virtualChildren=[],this._children=[],this.childSet={},this.matrix=new Ct,this.inverseMatrix=new Ct,this.dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=qt.All,this.isVirtual=t??!1,this.tag=e??NaN}containsPoint(t,e){return!1}pickNode(t,e){var i;if(!this.visible||this.pointerEvents===qt.None||!this.containsPoint(t,e))return;const n=this.children;if(n.length>1e3)for(let o=n.length-1;o>=0;o--){const r=n[o],l=(null===(i=r.computeTransformedBBox())||void 0===i?void 0:i.containsPoint(t,e))?r.pickNode(t,e):void 0;if(l)return l}else if(n.length)for(let o=n.length-1;o>=0;o--){const r=n[o].pickNode(t,e);if(r)return r}else if(!this.isContainerNode)return this}findNodes(t){const e=t(this)?[this]:[];for(const i of this.children){const n=i.findNodes(t);n&&e.push(...n)}return e}computeBBox(){}computeTransformedBBox(){const t=this.computeBBox();if(!t)return;this.computeTransformMatrix();const e=Ct.flyweight(this.matrix);let i=this.parent;for(;i;)i.computeTransformMatrix(),e.preMultiplySelf(i.matrix),i=i.parent;return e.transformBBox(t,t),t}computeTransformMatrix(){if(!this.dirtyTransform)return;const{matrix:t,scalingX:e,scalingY:i,rotation:n,translationX:o,translationY:r,scalingCenterX:a,scalingCenterY:l,rotationCenterX:c,rotationCenterY:d}=this;Ct.updateTransformMatrix(t,e,i,n,o,r,{scalingCenterX:a,scalingCenterY:l,rotationCenterX:c,rotationCenterY:d}),t.inverseTo(this.inverseMatrix),this.dirtyTransform=!1}render(t){const{stats:e}=t;this._dirty=M.NONE,e&&e.nodesRendered++}clearBBox(t){const e=this.computeBBox();if(null==e)return;const{x:i,y:n,width:o,height:r}=e,a=this.transformPoint(i,n),l=this.transformPoint(i+o,n+r);t.clearRect(a.x,a.y,l.x-a.x,l.y-a.y)}markDirty(t,e=M.TRIVIAL,i=e){this._dirty>e||this._dirty===e&&e===i||(this._dirty=e,this.parent?this.parent.markDirty(this,i):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(t){const{force:e=!1,recursive:i=!0}=t??{};if(this._dirty!==M.NONE||e){if(this._dirty=M.NONE,!1!==i)for(const n of this._virtualChildren)n.markClean({force:e});if(!0===i)for(const n of this._children)n.markClean({force:e})}}visibilityChanged(){}get nodeCount(){let t=1,e=this._dirty>=M.NONE||this.dirtyTransform?1:0,i=this.visible?1:0;const n=o=>{const{count:r,visibleCount:a,dirtyCount:l}=o.nodeCount;t+=r,i+=a,e+=l};for(const o of this._children)n(o);for(const o of this._virtualChildren)n(o);return{count:t,visibleCount:i,dirtyCount:e}}zIndexChanged(){}}Ot._nextSerialNumber=0,m([F({type:"transform"}),v("design:type",Number)],Ot.prototype,"scalingX",void 0),m([F({type:"transform"}),v("design:type",Number)],Ot.prototype,"scalingY",void 0),m([F({type:"transform"}),v("design:type",Object)],Ot.prototype,"scalingCenterX",void 0),m([F({type:"transform"}),v("design:type",Object)],Ot.prototype,"scalingCenterY",void 0),m([F({type:"transform"}),v("design:type",Object)],Ot.prototype,"rotationCenterX",void 0),m([F({type:"transform"}),v("design:type",Object)],Ot.prototype,"rotationCenterY",void 0),m([F({type:"transform"}),v("design:type",Number)],Ot.prototype,"rotation",void 0),m([F({type:"transform"}),v("design:type",Number)],Ot.prototype,"translationX",void 0),m([F({type:"transform"}),v("design:type",Number)],Ot.prototype,"translationY",void 0),m([F({redraw:M.MAJOR,changeCb:s=>s.visibilityChanged()}),v("design:type",Boolean)],Ot.prototype,"visible",void 0),m([F({redraw:M.TRIVIAL,changeCb:Ua}),v("design:type",Number)],Ot.prototype,"zIndex",void 0),m([F({redraw:M.TRIVIAL,changeCb:Ua}),v("design:type",Array)],Ot.prototype,"zIndexSubOrder",void 0);class Pi extends Zo{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}}m([S(nt),F({redraw:M.MAJOR}),v("design:type",Object)],Pi.prototype,"enabled",void 0),m([S(me),F({redraw:M.MAJOR}),v("design:type",Object)],Pi.prototype,"color",void 0),m([S(C()),F({redraw:M.MAJOR}),v("design:type",Object)],Pi.prototype,"xOffset",void 0),m([S(C()),F({redraw:M.MAJOR}),v("design:type",Object)],Pi.prototype,"yOffset",void 0),m([S(C(0)),F({redraw:M.MAJOR}),v("design:type",Object)],Pi.prototype,"blur",void 0);const lu=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];function Ha(){if(typeof navigator>"u")return!0;const s=navigator.userAgent;return!lu.some(t=>t.test(s))}class ct{constructor(t){this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0;const{document:e,window:i,width:n=600,height:o=300,domLayer:r=!1,zIndex:a=0,name:l,overrideDevicePixelRatio:c}=t;this.document=e,this.window=i,ct.document=e,this.element=e.createElement("canvas"),this.element.width=n,this.element.height=o,this.realContext=this.element.getContext("2d"),this.imageSource=this.realContext.canvas;const{style:d}=this.element;d.userSelect="none",d.display="block",r&&(d.position="absolute",d.zIndex=String(a),d.top="0",d.left="0",d.pointerEvents="none",d.opacity="1",l&&(this.element.id=l)),this.context=this.setPixelRatio(c),this.resize(n,o)}set container(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)}get container(){return this._container}set enabled(t){this.element.style.display=t?"block":"none",this._enabled=!!t}get enabled(){return this._enabled}remove(){const{parentNode:t}=this.element;t?.removeChild(this.element)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}snapshot(){}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}toImage(){const t=this.document.createElement("img");return t.src=this.getDataURL(),t}getDataURL(t){return this.element.toDataURL(t)}download(t,e="image/png"){t=(t??"").trim()||"image";const i=this.getDataURL(e),n=this.document,o=n.createElement("a");o.href=i,o.download=t,o.style.display="none",n.body.appendChild(o),o.click(),n.body.removeChild(o)}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=t??this.window.devicePixelRatio;return Ha()||(e=1),this._pixelRatio=e,ct.overrideScale(this.realContext,e)}set pixelated(t){this.element.style.imageRendering=t?"pixelated":"auto"}get pixelated(){return"pixelated"===this.element.style.imageRendering}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{element:i,context:n,pixelRatio:o}=this;i.width=Math.round(t*o),i.height=Math.round(e*o),i.style.width=t+"px",i.style.height=e+"px",n.resetTransform(),this._width=t,this._height=e}static get textMeasuringContext(){if(this._textMeasuringContext)return this._textMeasuringContext;const t=this.document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d"),this._textMeasuringContext}static get svgText(){if(this._svgText)return this._svgText;const t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.setAttribute("width","100"),e.setAttribute("height","100"),e.classList?e.classList.add("text-measuring-svg"):e.setAttribute("class","text-measuring-svg"),e.style.position="absolute",e.style.top="-1000px",e.style.visibility="hidden";const i=document.createElementNS(t,"text");return i.setAttribute("x","0"),i.setAttribute("y","30"),i.setAttribute("text","black"),e.appendChild(i),document.body.appendChild(e),this._svgText=i,i}static get has(){if(this._has)return this._has;const t=typeof navigator>"u"||navigator.userAgent.indexOf("Chrome")>-1,e=typeof navigator<"u"&&navigator.userAgent.indexOf("Firefox")>-1,i=!t&&typeof navigator<"u"&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!e&&!i,getTransform:void 0!==this.textMeasuringContext.getTransform}),this._has}static measureText(t,e,i,n){const o=this.textMeasuringContext;return o.font=e,o.textBaseline=i,o.textAlign=n,o.measureText(t)}static getTextSize(t,e){if(this.has.textMetrics){const i=this.textMeasuringContext;i.font=e;const n=i.measureText(t);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}return this.measureSvgText(t,e)}static measureSvgText(t,e){const i=this.textSizeCache,n=i[e];if(n){const l=n[t];if(l)return l}else i[e]={};const o=this.svgText;o.style.font=e,o.textContent=t;const r=o.getBBox(),a={width:r.width,height:r.height};return i[e][t]=a,a}static overrideScale(t,e){let i=0;const n={save(){this.$save(),i++},restore(){if(!(i>0))throw new Error("AG Charts - Unable to restore() past depth 0");this.$restore(),i--},setTransform(o,r,a,l,c,d){"object"==typeof o?this.$setTransform(o):this.$setTransform(o*e,r*e,a*e,l*e,c*e,d*e)},resetTransform(){this.$setTransform(e,0,0,e,0,0)},verifyDepthZero(){if(0!==i)throw new Error("AG Charts - Save/restore depth is non-zero: "+i)}};for(const o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t["$"+o]||(t["$"+o]=t[o]),t[o]=n[o]);return t}}ct.document=globalThis.document,ct.textSizeCache={};class cu{constructor(){this.stops=[]}}class du extends cu{constructor(){super(...arguments),this.angle=0}createGradient(t,e){const{stops:n,angle:o}=this,r=Ut(ce(o+90)),a=Math.cos(r),l=Math.sin(r),c=e.width,d=e.height,h=e.x+.5*c,u=e.y+.5*d;if(c>0&&d>0){const p=Math.sqrt(d*d+c*c)/2,f=Math.atan2(d,c);let g;g=r<Math.PI/2?r:r<Math.PI?Math.PI-r:r<3*Math.PI/2?r-Math.PI:2*Math.PI-r;const y=p*Math.abs(Math.cos(g-f)),b=t.createLinearGradient(h+a*y,u+l*y,h-a*y,u-l*y);return n.forEach(_=>{b.addColorStop(_.offset,_.color)}),b}return"black"}}const hu=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i;class J extends Ot{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=J.defaultStyles.fill,this.stroke=J.defaultStyles.stroke,this.strokeWidth=J.defaultStyles.strokeWidth,this.lineDash=J.defaultStyles.lineDash,this.lineDashOffset=J.defaultStyles.lineDashOffset,this.lineCap=J.defaultStyles.lineCap,this.lineJoin=J.defaultStyles.lineJoin,this.opacity=J.defaultStyles.opacity,this.fillShadow=J.defaultStyles.fillShadow}restoreOwnStyles(){const t=this.constructor.defaultStyles,e=Object.getOwnPropertyNames(t);for(let i=0,n=e.length;i<n;i++){const o=e[i];this[o]=t[o]}}updateGradient(){const{fill:t}=this;let e;if(t?.startsWith("linear-gradient")&&(e=hu.exec(t))){const i=parseFloat(e[1]),n=[],o=e[2],r=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let a;for(;a=r.exec(o);)n.push(a[0]);this.gradient=new du,this.gradient.angle=i,this.gradient.stops=n.map((l,c)=>({offset:c/(n.length-1),color:l}))}else this.gradient=void 0}align(t,e){var i,n,o;const r=null!==(o=null===(n=null===(i=this.layerManager)||void 0===i?void 0:i.canvas)||void 0===n?void 0:n.pixelRatio)&&void 0!==o?o:1,a=Math.round(t*r)/r;return null==e?a:0===e?0:e<1?Math.ceil(e*r)/r:Math.round((e+t)*r)/r-a}fillStroke(t){this.renderFill(t),this.renderStroke(t)}renderFill(t){if(this.fill){const{globalAlpha:e}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),t.fill(),t.globalAlpha=e}t.shadowColor="rgba(0, 0, 0, 0)"}applyFill(t){t.fillStyle=this.gradient?this.gradient.createGradient(t,this.computeBBox()):this.fill}applyFillAlpha(t){const{globalAlpha:e}=t;t.globalAlpha=e*this.opacity*this.fillOpacity}applyShadow(t){var e,i;const n=null!==(i=null===(e=this.layerManager)||void 0===e?void 0:e.canvas.pixelRatio)&&void 0!==i?i:1,o=this.fillShadow;o?.enabled&&(t.shadowColor=o.color,t.shadowOffsetX=o.xOffset*n,t.shadowOffsetY=o.yOffset*n,t.shadowBlur=o.blur*n)}renderStroke(t){if(this.stroke&&this.strokeWidth){const{globalAlpha:e}=t;t.strokeStyle=this.stroke,t.globalAlpha=e*this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),t.stroke(),t.globalAlpha=e}}containsPoint(t,e){return this.isPointInPath(t,e)}}function Vs(s){const{redraw:t=M.MAJOR,changeCb:e}=s??{};return F({redraw:t,type:"font",changeCb:e})}J.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),m([F({redraw:M.MINOR}),v("design:type",Number)],J.prototype,"fillOpacity",void 0),m([F({redraw:M.MINOR}),v("design:type",Number)],J.prototype,"strokeOpacity",void 0),m([F({redraw:M.MINOR,changeCb:s=>s.updateGradient()}),v("design:type",Object)],J.prototype,"fill",void 0),m([F({redraw:M.MINOR}),v("design:type",Object)],J.prototype,"stroke",void 0),m([F({redraw:M.MINOR}),v("design:type",Number)],J.prototype,"strokeWidth",void 0),m([F({redraw:M.MINOR}),v("design:type",Object)],J.prototype,"lineDash",void 0),m([F({redraw:M.MINOR}),v("design:type",Number)],J.prototype,"lineDashOffset",void 0),m([F({redraw:M.MINOR}),v("design:type",String)],J.prototype,"lineCap",void 0),m([F({redraw:M.MINOR}),v("design:type",String)],J.prototype,"lineJoin",void 0),m([F({redraw:M.MINOR,convertor:s=>Math.min(1,Math.max(0,s))}),v("design:type",Number)],J.prototype,"opacity",void 0),m([F({redraw:M.MINOR,checkDirtyOnAssignment:!0}),v("design:type",Object)],J.prototype,"fillShadow",void 0);class W extends J{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=W.defaultStyles.textAlign,this.textBaseline=W.defaultStyles.textBaseline,this.lineHeight=void 0}_setLines(){this.lines=qa(this.text)}get font(){return(null==this._font||this._dirtyFont)&&(this._dirtyFont=!1,this._font=vi(this)),this._font}computeBBox(){return ct.has.textMetrics?Xa(this.lines,this.x,this.y,this):Ka(this.lines,this.x,this.y,this)}getLineHeight(t){var e,i;if(this.lineHeight)return this.lineHeight;if(ct.has.textMetrics){const n=ct.measureText(t,this.font,this.textBaseline,this.textAlign);return(null!==(e=n.fontBoundingBoxAscent)&&void 0!==e?e:n.emHeightAscent)+(null!==(i=n.fontBoundingBoxDescent)&&void 0!==i?i:n.emHeightDescent)}return ct.getTextSize(t,this.font).height}isPointInPath(t,e){const i=this.transformPoint(t,e),n=this.computeBBox();return!!n&&n.containsPoint(i.x,i.y)}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===M.NONE&&!i)return void(n&&(n.nodesSkipped+=this.nodeCount.count));if(!this.lines.length||!this.layerManager)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(e);const{fill:o,stroke:r,strokeWidth:a}=this;e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline;const l=this.layerManager.canvas.pixelRatio||1,{globalAlpha:c}=e;if(o){e.fillStyle=o,e.globalAlpha=c*this.opacity*this.fillOpacity;const{fillShadow:d}=this;d?.enabled&&(e.shadowColor=d.color,e.shadowOffsetX=d.xOffset*l,e.shadowOffsetY=d.yOffset*l,e.shadowBlur=d.blur*l),this.renderLines((h,u,p)=>e.fillText(h,u,p))}if(r&&a){e.strokeStyle=r,e.lineWidth=a,e.globalAlpha=c*this.opacity*this.strokeOpacity;const{lineDash:d,lineDashOffset:h,lineCap:u,lineJoin:p}=this;d&&e.setLineDash(d),h&&(e.lineDashOffset=h),u&&(e.lineCap=u),p&&(e.lineJoin=p),this.renderLines((f,g,y)=>e.strokeText(f,g,y))}super.render(t)}renderLines(t){const{lines:e,x:i,y:n}=this,o=this.lines.map(l=>this.getLineHeight(l));let a=-(o.reduce((l,c)=>l+c,0)-o[0])*$a(this.textBaseline);for(let l=0;l<e.length;l++)t(e[l],i,n+a),a+=o[l]}static wrap(t,e,i,n,o,r="ellipsis"){var a;const l="hide"!==r,d=function uu(s){const t=new Map,e=n=>ct.getTextSize(n,s);return{size:e,width:n=>{if(t.has(n))return t.get(n);const{width:o}=e(n);return t.set(n,o),o}}}(vi(n)),h=t.split(/\r?\n/g);if(0===h.length)return"";if("never"===o)return null!==(a=W.truncateLine(h[0],e,d,l?"auto":"never"))&&void 0!==a?a:"";const u=[];let p=0;for(const f of h){const g=W.wrapLine(f,e,i,d,n,o,p,l);if(null==g)return"";if(u.push(g.result),p=g.cumulativeHeight,g.truncated)break}return u.join("\n").trim()}static wrapLine(t,e,i,n,o,r,a,l){if(!(t=t.trim()))return{result:"",truncated:!1,cumulativeHeight:a};const c=n.size(t);if(c.width<=e)return{result:t,truncated:!1,cumulativeHeight:a+c.height};if(c.height>i||n.width("W")>e)return l?{result:"",truncated:!0,cumulativeHeight:a}:void 0;const d=t.split(/\s+/g),h=W.wrapLineSequentially(d,e,i,n,o,r,a,l);if(null==h)return;a=h.cumulativeHeight;let{lines:u}=h;if(!h.wordsBrokenOrTruncated&&!h.linesTruncated){const g=W.wrapLineBalanced(d,e,n,h.lines.length);g.length===u.length&&(u=g)}return{result:u.map(f=>f.join(" ")).join("\n"),truncated:h.linesTruncated,cumulativeHeight:a}}static breakWord(t,e,i,n,o){const r=p=>W.punctuationMarks.includes(t[p]),a=n?o.width("-"):0,l=[];let c=0,d=0;for(let p=0;p<t.length;p++){const g=o.width(t[p]);c+g+a>(0===d?e:i)&&(l.push(p),c=0,d++),c+=g}const h=[];let u=0;for(const p of l){let f=t.substring(u,p);n&&f.length>0&&!r(p-1)&&!r(p)&&(f+="-"),h.push(f),u=p}return h.push(t.substring(u)),h}static truncateLine(t,e,i,n){t=t.trimEnd();const o=i.width(t);if(o>e&&"never"===n)return;if(o<=e&&"force"!==n)return t;const r=i.width("\u2026");let a=t,l=o;for(;a.length>0&&l+r>e;)a=a.slice(0,-1).trimEnd(),l=i.width(a);return l+r<=e?`${a}\u2026`:void 0}static wrapLineSequentially(t,e,i,n,o,r,a,l){const{fontSize:c=0,lineHeight:d=c*W.defaultLineHeightRatio}=o,h="always"===r||"hyphenate"===r,u="hyphenate"===r,p=n.width(" ");let f=!1,g=!1;const y=[];let b=[],_=0;const x=()=>({lines:y,linesTruncated:g,wordsBrokenOrTruncated:f,cumulativeHeight:a}),k=()=>{if(!l)return;const O=b.join(" "),A=W.truncateLine(O,e,n,"force");return null!=A?(b.splice(0,b.length,A),g=!0,x()):void 0},E=()=>{const O=a+d;return!(O>=i||(b=[],_=0,a=O,y.push(b),0))};if(!E())return k();for(let O=0;O<t.length;O++){const A=t[O],D=n.width(A),L=0===b.length?0:p,T=_+L+D;if(T<=e)b.push(A),_=T;else if(D<=e){if(!E())return k();b.push(A),_=D}else{if(f=!0,!h){if(l){if(!E())return k();const N=W.truncateLine(A,e,n,"force");if(null==N)return;b.push(N),O<t.length-1&&(g=!0);break}return}{const w=W.breakWord(A,e-_-L,e,u,n);for(let P=0;P<w.length;P++){const V=w[P];if(V&&b.push(V),P===w.length-1)_=n.width(V);else if(!E())return k()}}}}return x()}static wrapLineBalanced(t,e,i,n){const o=t.reduce((p,f)=>p+i.width(f),0),r=i.width(" "),l=(o+r*(t.length-n-2))/n,c=[];let d=[],h=i.width(t[0]),u=!0;for(const p of t){const f=i.width(p);if(u){d=[],d.push(p),h=f,u=!1,c.push(d);continue}const g=h+r+f;g<=l?(d.push(p),h=g):g<=e?(d.push(p),u=!0):(d=[p],h=f,c.push(d))}return c}setFont(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight}setAlign(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline}}function vi(s){const{fontFamily:t,fontSize:e,fontStyle:i,fontWeight:n}=s;return[i??"",n??"",e+"px",t].join(" ").trim()}function pu(s,t,e,i){return ct.has.textMetrics?Xa(s,t,e,i):Ka(s,t,e,i)}function Xa(s,t,e,i){var n,o;let r=0,a=0,l=0,c=0,d=0;const h=vi(i),{lineHeight:u,textBaseline:p=W.defaultStyles.textBaseline,textAlign:f=W.defaultStyles.textAlign}=i;for(let g=0;g<s.length;g++){const y=ct.measureText(s[g],h,p,f);r=Math.max(r,y.actualBoundingBoxLeft),l=Math.max(l,y.width),0==g?(a+=y.actualBoundingBoxAscent,c+=y.actualBoundingBoxAscent):d+=null!==(n=y.fontBoundingBoxAscent)&&void 0!==n?n:y.emHeightAscent,g==s.length-1?c+=y.actualBoundingBoxDescent:d+=null!==(o=y.fontBoundingBoxDescent)&&void 0!==o?o:y.emHeightDescent}return void 0!==u&&(d=(s.length-1)*u),c+=d,a+=d*$a(p),new U(t-r,e-a,l,c)}function Ka(s,t,e,i){let n=0,o=0,r=0;const a=vi(i),{lineHeight:l,textBaseline:c=W.defaultStyles.textBaseline,textAlign:d=W.defaultStyles.textAlign}=i;if(s.length>0){const h=ct.getTextSize(s[0],a);n=h.width,o=h.height}for(let h=1;h<s.length;h++){const u=ct.getTextSize(s[h],a);n=Math.max(n,u.width),r+=l??u.height}switch(d){case"end":case"right":t-=n;break;case"center":t-=n/2}switch(c){case"alphabetic":e-=.7*o+.5*r;break;case"middle":e-=.45*o+.5*r;break;case"ideographic":case"bottom":e-=o+r;break;case"hanging":e-=.2*o+.5*r}return new U(t,e,n,o+r)}function $a(s){switch(s){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return.5}}function qa(s){return"string"==typeof s?s.split(/\r?\n/g):[]}function Nt(s,t){return Un((e,i,n)=>(e[s][t??i]=n,n))}function Ht(s){const{newValue:t,oldValue:e,changeValue:i}=s;return Un((n,o,r,a)=>(r!==a&&(void 0!==a&&e?.call(n,a),void 0!==r&&t?.call(n,r),i?.call(n,r,a)),r))}W.className="Text",W.defaultLineHeightRatio=1.15,W.defaultStyles=Object.assign({},J.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),W.ellipsis="\u2026",W.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],m([F({redraw:M.MAJOR}),v("design:type",Number)],W.prototype,"x",void 0),m([F({redraw:M.MAJOR}),v("design:type",Number)],W.prototype,"y",void 0),m([F({redraw:M.MAJOR,changeCb:s=>s._setLines()}),v("design:type",String)],W.prototype,"text",void 0),m([Vs(),v("design:type",String)],W.prototype,"fontStyle",void 0),m([Vs(),v("design:type",String)],W.prototype,"fontWeight",void 0),m([Vs(),v("design:type",Number)],W.prototype,"fontSize",void 0),m([Vs(),v("design:type",String)],W.prototype,"fontFamily",void 0),m([F({redraw:M.MAJOR}),v("design:type",String)],W.prototype,"textAlign",void 0),m([F({redraw:M.MAJOR}),v("design:type",String)],W.prototype,"textBaseline",void 0),m([F({redraw:M.MAJOR}),v("design:type",Number)],W.prototype,"lineHeight",void 0);class yt{constructor(){this.node=new W,this.enabled=!1,this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.maxWidth=void 0,this.maxHeight=void 0,this.wrapping="always";const t=this.node;t.textAlign="center",t.pointerEvents=qt.None}computeTextWrap(t,e){var i,n;const{text:o,wrapping:r}=this,a=Math.min(null!==(i=this.maxWidth)&&void 0!==i?i:1/0,t),l=null!==(n=this.maxHeight)&&void 0!==n?n:e;if(!isFinite(a)&&!isFinite(l))return void(this.node.text=o);const c=W.wrap(o??"",a,l,this,r);this.node.text=c}}yt.SMALL_PADDING=10,yt.LARGE_PADDING=20,m([S(nt),v("design:type",Object)],yt.prototype,"enabled",void 0),m([S(Y),Nt("node"),v("design:type",String)],yt.prototype,"text",void 0),m([S(gi),Nt("node"),v("design:type",Object)],yt.prototype,"fontStyle",void 0),m([S(yi),Nt("node"),v("design:type",Object)],yt.prototype,"fontWeight",void 0),m([S(C(0)),Nt("node"),v("design:type",Number)],yt.prototype,"fontSize",void 0),m([S($t),Nt("node"),v("design:type",String)],yt.prototype,"fontFamily",void 0),m([S(St),Nt("node","fill"),v("design:type",Object)],yt.prototype,"color",void 0),m([S(Z(0)),v("design:type",Number)],yt.prototype,"spacing",void 0),m([S(Z(0)),v("design:type",Number)],yt.prototype,"lineHeight",void 0),m([S(Z(0)),v("design:type",Number)],yt.prototype,"maxWidth",void 0),m([S(Z(0)),v("design:type",Number)],yt.prototype,"maxHeight",void 0),m([S($o),v("design:type",String)],yt.prototype,"wrapping",void 0);class Te{constructor(){this.enabled=!1,this.text=void 0,this.spacing=yt.SMALL_PADDING,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.formatter=void 0}}function Qo(s,t){const e={};if(Array.isArray(t))for(let i=0;i<s.length;i++)e[`${s[i]}`]=t[i];else for(let i=0;i<s.length;i++)e[`${s[i]}`]=t;return e}function qn(s,t){return e=>Number(s)*(1-e)+Number(t)*e}m([S(nt),v("design:type",Object)],Te.prototype,"enabled",void 0),m([S(Y),v("design:type",String)],Te.prototype,"text",void 0),m([S(Z(0)),v("design:type",Number)],Te.prototype,"spacing",void 0),m([S(gi),v("design:type",String)],Te.prototype,"fontStyle",void 0),m([S(yi),v("design:type",String)],Te.prototype,"fontWeight",void 0),m([S(C(0)),v("design:type",Number)],Te.prototype,"fontSize",void 0),m([S($t),v("design:type",String)],Te.prototype,"fontFamily",void 0),m([S(St),v("design:type",String)],Te.prototype,"color",void 0),m([S($o),v("design:type",String)],Te.prototype,"wrapping",void 0),m([S(Ke),v("design:type",Function)],Te.prototype,"formatter",void 0);const Za=s=>s,Zn=s=>Math.sin(s*Math.PI/2),Jn={animationDuration:.2,animationDelay:1};var Us=function(s){return s.Loop="loop",s.Reverse="reverse",s}(Us||{});function Hs(s){return s.every(t=>t instanceof Ot)}class sl{constructor(t){var e,i,n,o,r,a,l,c,d,h;this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=t.id,this.groupId=t.groupId,this.autoplay=null===(e=t.autoplay)||void 0===e||e,this.delay=null!==(i=t.delay)&&void 0!==i?i:0,this.duration=null!==(n=t.duration)&&void 0!==n?n:1e3,this.ease=null!==(o=t.ease)&&void 0!==o?o:Za,this.repeat=null!==(r=t.repeat)&&void 0!==r?r:0,this.repeatType=null!==(a=t.repeatType)&&void 0!==a?a:Us.Loop,this.onComplete=t.onComplete,this.onPlay=t.onPlay,this.onStop=t.onStop,this.onRepeat=t.onRepeat,this.onUpdate=t.onUpdate,this.interpolate=this.createInterpolator(t.from,t.to),!0===t.skip?(null===(l=this.onUpdate)||void 0===l||l.call(this,t.to,!1,this),null===(c=this.onStop)||void 0===c||c.call(this,this),null===(d=this.onComplete)||void 0===d||d.call(this,this)):this.autoplay&&(this.play(),null===(h=this.onUpdate)||void 0===h||h.call(this,t.from,!0,this))}play(){var t;return this.isPlaying||(this.isPlaying=!0,null===(t=this.onPlay)||void 0===t||t.call(this,this)),this}pause(){return this.isPlaying&&(this.isPlaying=!1),this}stop(){var t;return this.isPlaying&&(this.isPlaying=!1,null===(t=this.onStop)||void 0===t||t.call(this,this)),this}reset(t){const e=this.interpolate(this.isReverse?1-this.delta:this.delta);return this.interpolate=this.createInterpolator(e,t.to),this.elapsed=0,this.iteration=0,"number"==typeof t.delay&&(this.delay=t.delay),"number"==typeof t.duration&&(this.duration=t.duration),"function"==typeof t.ease&&(this.ease=t.ease),this}update(t){var e,i,n;if(this.elapsed+=t,this.elapsed<=this.delay)return this;const o=this.interpolate(this.isReverse?1-this.delta:this.delta);return null===(e=this.onUpdate)||void 0===e||e.call(this,o,!1,this),this.elapsed-this.delay>=this.duration&&(this.iteration<this.repeat?(this.iteration++,this.elapsed=(this.elapsed-this.delay)%this.duration+this.delay,this.repeatType===Us.Reverse&&(this.isReverse=!this.isReverse),null===(i=this.onRepeat)||void 0===i||i.call(this,this)):(this.stop(),null===(n=this.onComplete)||void 0===n||n.call(this,this))),this}get delta(){return this.ease(Ae(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(t,e){if("object"!=typeof e)return this.interpolateValue(t,e);const i=Object.keys(e).map(n=>[n,this.interpolateValue(t[n],e[n])]);return n=>{const o={};for(const[r,a]of i)o[r]=a(n);return o}}interpolateValue(t,e){try{switch(typeof t){case"number":return qn(t,e);case"string":return function gu(s,t){if("string"==typeof s)try{s=H.fromString(s)}catch{s=H.fromArray([0,0,0])}if("string"==typeof t)try{t=H.fromString(t)}catch{t=H.fromArray([0,0,0])}const e=qn(s.r,t.r),i=qn(s.g,t.g),n=qn(s.b,t.b),o=qn(s.a,t.a);return r=>H.fromArray([e(r),i(r),n(r),o(r)]).toRgbaString()}(t,e)}}catch{}throw new Error(`Unable to interpolate values: ${t}, ${e}`)}}const Zt={added:{animationDuration:.25,animationDelay:.75},updated:{animationDuration:.5,animationDelay:.25},removed:{animationDuration:.25,animationDelay:0},unknown:{animationDuration:1,animationDelay:0}};function Et(s,t,e,i,n,o,r){const{defaultDuration:a}=e,{fromFn:l,toFn:c,intermediateFn:d}=n,h=Hs(i),u=h?i:[],p=h?[]:i,f={added:{},removed:{}};o&&r&&(f.added=Qo(r.added,!0),f.removed=Qo(r.removed,!0));const g=(b,_)=>{var x,k;let E,O=0,A=0;for(const D of _){const L=b[O]===D,T={last:A>=_.length-1,lastLive:O>=b.length-1,prev:_[A-1],prevFromProps:E,prevLive:b[O-1],next:_[A+1],nextLive:b[O+(L?1:0)]},N=`${s}_${t}_${D.id}`;e.stopByAnimationId(N);let w="unknown";L?o&&r&&(w=mu(D,D.datum,o,f)):w="removed";const P=l(D,D.datum,w,T),{animationDelay:V,animationDuration:$,start:q={},finish:tt={}}=P,et=le(P,["animationDelay","animationDuration","start","finish"]),Q=c(D,D.datum,w,T),{animationDelay:lt,animationDuration:dt,start:Dt={},finish:Kt={}}=Q,pt=le(Q,["animationDelay","animationDuration","start","finish"]);e.animate({id:N,groupId:s,from:et,to:pt,ease:Zn,onPlay:()=>{D.setProperties(Object.assign(Object.assign({},q),Dt))},onUpdate(Oe){D.setProperties(Oe),d&&D.setProperties(d(D,D.datum,w,T))},onStop:()=>{D.setProperties(Object.assign(Object.assign(Object.assign({},pt),tt),Kt))},duration:(null!==(x=$??dt)&&void 0!==x?x:1)*a,delay:(null!==(k=V??lt)&&void 0!==k?k:0)*a}),L&&O++,A++,E=et}};let y=0;for(const b of p){const _=b.nodes();g(_.filter(k=>!b.isGarbage(k)),_),e.animate({id:`${s}_${t}_selection_${y}`,groupId:s,from:0,to:1,ease:Zn,onStop(){b.cleanup()}}),y++}g(u,u)}function ni(s,t,e,i,n,o,r={}){const a=Hs(i),l=a?i:[],c=a?[]:i,{animationDelay:d=0,animationDuration:h=1,start:u={},finish:p={}}=r,{defaultDuration:f}=e;e.animate({id:`${s}_${t}`,groupId:s,from:n,to:o,ease:Zn,onPlay:()=>{for(const g of l)g.setProperties(u);for(const g of c)for(const y of g.nodes())y.setProperties(u)},onUpdate(g){for(const y of l)y.setProperties(g);for(const y of c)for(const b of y.nodes())b.setProperties(g)},onStop:()=>{for(const g of l)g.setProperties(Object.assign(Object.assign({},o),p));for(const g of c)for(const y of g.nodes())y.setProperties(Object.assign(Object.assign({},o),p))},duration:h*f,delay:d*f})}function mu(s,t,e,i){const n=e(s,t);return i.added[n]?"added":i.removed[n]?"removed":"updated"}var vu=Object.freeze({__proto__:null,NODE_UPDATE_PHASES:["removed","updated","added"],FROM_TO_MIXINS:Zt,fromToMotion:Et,staticFromToMotion:ni});const an=s=>`(${s})`,si=s=>`${an(s)}?`,rl=s=>si(`?:${s}`),bu=new RegExp(["^",rl(`${si(".")}${an("[<>=^]")}`),si("[+\\-( ]"),si("[$\u20ac\xa3\xa5\u20a3\u20b9#]"),si("0"),si("\\d+"),si(","),rl(`\\.${an("\\d+")}`),si("~"),si("[%a-z]"),"$"].join(""),"i"),xu=new RegExp(["^",an(".*?"),`#\\{${an(".+?")}\\}`,an(".*?"),"$"].join(""));function al(s){let t,e;const i=xu.exec(s);i&&([,t,s,e]=i);const n=bu.exec(s);if(!n)throw new Error(`The number formatter is invalid: ${s}`);const[,o,r,a,l,c,d,h,u,p,f]=n;return{fill:o,align:r,sign:a,symbol:l,zero:c,width:parseInt(d),comma:h,precision:parseInt(u),trim:!!p,type:f,prefix:t,suffix:e}}function ll(s){const t="string"==typeof s?al(s):s,{fill:e,align:i,sign:n="-",symbol:o,zero:r,width:a,comma:l,type:c,prefix:d="",suffix:h="",precision:u}=t;let{trim:p}=t;const f=void 0===u||isNaN(u);let g,y;if(c)if(c in de&&c in ln)g=f?ln[c]:de[c];else if(c in de)g=de[c];else{if(!(c in ln))throw new Error(`The number formatter type is invalid: ${c}`);g=ln[c]}else g=de.g,p=!0;return y=null==u||f?c?6:12:u,b=>{let _=g(b,y);return p&&(_=function Su(s){return s.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}(_)),l&&(_=function _u(s,t){let e=s.indexOf(".");e<0&&(e=s.length);const i=s.substring(0,e).split(""),n=s.substring(e);for(let o=i.length-3;o>0;o-=3)i.splice(o,0,t);return`${i.join("")}${n}`}(_,l)),_=function Au(s,t,e=""){if("("===e)return s>=0?t:`(${t})`;return`${s>=0?"+"===e?"+":"":Eu}${t}`}(b,_,n),o&&"#"!==o&&(_=`${o}${_}`),"#"===o&&"x"===c&&(_=`0x${_}`),"s"===c&&(_=`${_}${function ku(s){return Ou[cl(s)]}(b)}`),("%"===c||"p"===c)&&(_=`${_}%`),null!=a&&!isNaN(a)&&(_=function Du(s,t,e=" ",i=">"){let n=s;if(">"!==i&&i){if("<"===i)n=n.padEnd(t,e);else if("^"===i){const o=Math.max(0,t-n.length),r=Math.ceil(o/2),a=Math.floor(o/2);n=n.padStart(r+n.length,e),n=n.padEnd(a+n.length,e)}}else n=n.padStart(t,e);return n}(_,a,e??r,i)),_=`${d}${_}${h}`,_}}const Xs=s=>Math.floor(Math.abs(s)),ln={b:s=>Xs(s).toString(2),c:s=>String.fromCharCode(s),d:s=>Math.round(Math.abs(s)).toFixed(0),o:s=>Xs(s).toString(8),x:s=>Xs(s).toString(16),X:s=>ln.x(s).toUpperCase(),n:s=>ln.d(s),"%":s=>`${Xs(100*s).toFixed(0)}`},de={e:(s,t)=>Math.abs(s).toExponential(t),E:(s,t)=>de.e(s,t).toUpperCase(),f:(s,t)=>Math.abs(s).toFixed(t),F:(s,t)=>de.f(s,t).toUpperCase(),g:(s,t)=>{if(0===s)return"0";const e=Math.abs(s),i=Math.floor(Math.log10(e));return i>=-4&&i<t?e.toFixed(t-1-i):e.toExponential(t-1)},G:(s,t)=>de.g(s,t).toUpperCase(),n:(s,t)=>de.g(s,t),p:(s,t)=>de.r(100*s,t),r:(s,t)=>{if(0===s)return"0";const e=Math.abs(s),n=Math.floor(Math.log10(e))-(t-1);if(n<=0)return e.toFixed(-n);const o=Math.pow(10,n);return(Math.round(e/o)*o).toFixed()},s:(s,t)=>{const e=cl(s);return de.r(s/Math.pow(10,e),t)},"%":(s,t)=>de.f(100*s,t)};function cl(s){const t=Math.log10(Math.abs(s)),e=3*Math.floor(t/3);return Math.max(dl,Math.min(hl,e))}const dl=-24,hl=24,Ou={[dl]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[hl]:"Y"},Eu="\u2212";function Ks(s,t,e,i,n){if(e<2)return Qn(s,t,t-s);const o=cn(s,t,e,i,n);return isNaN(o)?new er(0):Qn(s=Math.ceil(s/o)*o,t=Math.floor(t/o)*o,o)}const pl=[1,2,5,10];function cn(s,t,e,i=0,n=1/0){const r=Math.floor(Math.log10((t-s)/e)),a=Math.pow(10,r),l=pl.map(c=>{const h=Math.ceil((t-s)/(c*a));return{multiplier:c,isWithinBounds:h>=i&&h<=n,diffCount:Math.abs(h-e)}}).sort((c,d)=>c.isWithinBounds!==d.isWithinBounds?c.isWithinBounds?-1:1:c.diffCount-d.diffCount)[0].multiplier;return!l||isNaN(l)?NaN:l*a}class er extends Array{constructor(t,e){if(super(),e)for(let i=0,n=e.length;i<n;i++)this[i]=e[i];this.fractionDigits=t}}function Qn(s,t,e){const n=(l=>{var c,d;const h=l.split("e");return Math.max((null!==(d=null===(c=h[0].split(".")[1])||void 0===c?void 0:c.length)&&void 0!==d?d:0)-Number(h[1]),0)})((e%1).toExponential()),o=Math.pow(10,n),r=Math.ceil((t-s)/e),a=new er(n);for(let l=0;l<=r;l++)a.push(Math.round((s+e*l)*o)/o);return a}let ot=(()=>{class s{static is(e){return e instanceof s}constructor(e,i){this.domain=e,this.range=i,this.nice=!1,this.tickCount=s.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClampMode="raw",this.cache=null,this.cacheProps=["domain","range","nice","tickCount","minTickCount","maxTickCount"]}transform(e){return e}transformInvert(e){return e}calcBandwidth(e=1){const i=this.getDomain(),n=Math.max(...this.range),o=(i[1]-i[0])/e+1,r=Math.floor(n),a=Math.min(o,r);return n/Math.max(1,a)}fromDomain(e){return"number"==typeof e?e:e instanceof Date?e.getTime():NaN}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(e,i){var n;const o=null!==(n=i?.clampMode)&&void 0!==n?n:this.defaultClampMode;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const r=this.getDomain().map(u=>this.transform(u)),[a,l]=r,{range:c}=this,[d,h]=c;if(e=this.transform(e),"clamped"===o){if(e<a)return d;if(e>l)return h}return a===l?(d+h)/2:e===a?d:e===l?h:d+(this.fromDomain(e)-this.fromDomain(a))/(this.fromDomain(l)-this.fromDomain(a))*(h-d)}invert(e){this.refresh();const i=this.getDomain().map(p=>this.transform(p)),[n,o]=i,{range:r}=this,[a,l]=r,c=a>l;let u;return e<(c?l:a)?c?o:n:e>(c?a:l)?c?n:o:(u=this.toDomain(a===l?(this.fromDomain(n)+this.fromDomain(o))/2:this.fromDomain(n)+(e-a)/(l-a)*(this.fromDomain(o)-this.fromDomain(n))),this.transformInvert(u))}didChange(){const{cache:e}=this;return!(e&&!this.cacheProps.some(n=>this[n]!==e[n])||(this.cache={},this.cacheProps.forEach(n=>this.cache[n]=this[n]),0))}refresh(){this.didChange()&&this.update()}getPixelRange(){const e=this.range.slice().sort((i,n)=>i-n);return e[1]-e[0]}isDenseInterval({start:e,stop:i,interval:n,count:o}){return o??(o=(i-e)/("number"==typeof n?n:1)),o>=this.getPixelRange()&&(B.warn("the configured tick interval results in more than 1 tick per pixel, ignoring. Supply a larger tick interval or omit this configuration."),!0)}}return s.defaultTickCount=5,s.defaultMaxTickCount=6,s})();class Fi extends ot{constructor(){super([0,1],[0,1]),this.type="linear"}toDomain(t){return t}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:ot.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||this.domain.some(r=>!isFinite(r)))return[];this.refresh();const[i,n]=this.getDomain(),{interval:o}=this;if(o){const r=Math.abs(o);if(!this.isDenseInterval({start:i,stop:n,interval:r}))return Qn(i,n,r)}return Ks(i,n,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(t,e){var i,n;const o=null!==(i=this.tickCount)&&void 0!==i?i:ot.defaultTickCount;return null!==(n=this.interval)&&void 0!==n?n:cn(t,e,o,this.minTickCount,this.maxTickCount)}updateNiceDomain(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:ot.defaultTickCount;let[i,n]=this.domain;if(e<1)return void(this.niceDomain=[i,n]);if(1===e)return void(this.niceDomain=function Tu(s,t){const e=Math.floor(Math.log10(t-s)),i=Math.pow(10,e);return pl.map(n=>{const o=n*i,r=Math.floor(s/o)*o,a=Math.ceil(t/o)*o;return{error:1-(t-s)/(a-r),domain:[r,a]}}).sort((n,o)=>n.error-o.error)[0].domain}(i,n));let r=i,a=n;for(let l=0;l<4;l++){const c=this.getTickStep(i,n),[d,h]=this.domain;if(c>=1)i=Math.floor(d/c)*c,n=Math.ceil(h/c)*c;else{const u=1/c;i=Math.floor(d*u)/u,n=Math.ceil(h*u)/u}if(i===r&&n===a)break;r=i,a=n}this.niceDomain=[i,n]}tickFormat({ticks:t,specifier:e}){return function ul(s,t){const e=al(t??",f"),{precision:i}=e;(null==i||isNaN(i))&&("f"===e.type||"%"===e.type?e.precision=Math.max(...s.map(o=>{if("number"!=typeof o||0===o)return 0;const r=Math.floor(Math.log10(Math.abs(o))),l=o.toExponential((e.type?6:12)-1).replace(/\.?0+e/,"e"),c=l.indexOf(".");if(c<0)return r>=0?0:-r;const d=l.indexOf("e")-c;return Math.max(0,d-r-1)})):(!e.type||e.type in de)&&(e.precision=Math.max(...s.map(o=>{if("number"!=typeof o)return 0;const r=o.toExponential((e.type?6:12)-1).replace(/\.?0+e/,"e");return r.substring(0,r.indexOf("e")).replace(".","").length}))));const n=ll(e);return o=>n(Number(o))}(t??this.ticks(),e)}}function fl(s,t){let e=0;return"number"==typeof s&&"number"==typeof t?e=s-t:"string"==typeof s&&"string"==typeof t?e=s.localeCompare(t):null==s&&null==t||(e=null==s?-1:null==t?1:String(s).localeCompare(String(t))),e}function gl(s,t,e){const i=n=>"function"==typeof n?n():n;for(const n in s){const o=e(i(s[n]),i(t[n]));if(0!==o)return o}return 0}class z extends Ot{zIndexChanged(){var t;this.layer&&(null===(t=this._layerManager)||void 0===t||t.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return null!=this.layer}constructor(t){var e;super({isVirtual:t?.isVirtual}),this.opts=t,this.opacity=1,this.lastBBox=void 0;const{zIndex:i,zIndexSubOrder:n}=t??{};this.isContainerNode=!0,void 0!==i&&(this.zIndex=i),void 0!==n&&(this.zIndexSubOrder=n),this.name=null===(e=this.opts)||void 0===e?void 0:e.name}_setLayerManager(t){var e,i;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(super._setLayerManager(t),t&&null!==(e=this.opts)&&void 0!==e&&e.layer){const{zIndex:n,zIndexSubOrder:o,name:r}=null!==(i=this.opts)&&void 0!==i?i:{};this.layer=t.addLayer({zIndex:n,zIndexSubOrder:o,name:r,getComputedOpacity:()=>this.getComputedOpacity(),getVisibility:()=>this.getVisibility()})}}getComputedOpacity(){let t=1,e=this;do{e instanceof z&&(t*=e.opacity)}while(e=e.parent);return t}getVisibility(){let t=this,e=this.visible;for(;t=t.parent;)t.visible||(e=t.visible);return e}visibilityChanged(){this.layer&&(this.layer.enabled=this.visible)}markDirty(t,e=M.TRIVIAL){if(this.isVirtual)return void super.markDirty(t,e);let i=e;(e<M.MINOR||null!=this.layer)&&(i=M.TRIVIAL),super.markDirty(t,e,i)}containsPoint(t,e){return!0}computeBBox(){return this.computeTransformMatrix(),z.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}render(t){var e,i;const{opts:{name:n}={},_debug:o=(()=>{})}=this,{dirty:r,dirtyZIndex:a,layer:l,children:c,clipRect:d,dirtyTransform:h}=this;let{ctx:u,forceRender:p,clipBBox:f}=t;const{resized:g,stats:y}=t,b=u.getTransform(),_=r>=M.MINOR||a||g;let x=_,k=!1;for(const T of c)if(x||(x=null==T.layerManager&&T.dirty>=M.TRIVIAL),k||(k=null!=T.layerManager&&T.dirty>=M.TRIVIAL),x)break;if(n&&o({name:n,group:this,isDirty:_,isChildDirty:x,dirtyTransform:h,renderCtx:t,forceRender:p}),h)p="dirtyTransform";else if(l){const T=this.computeBBox();(void 0===this.lastBBox||!this.lastBBox.equals(T))&&(p="dirtyTransform",this.lastBBox=T)}if(!(_||x||k||p))return n&&y&&o({name:n,result:"skipping",renderCtx:t,counts:this.nodeCount,group:this}),l&&y&&(y.layersSkipped++,y.nodesSkipped+=this.nodeCount.count),void this.markClean({recursive:!1});const E=this.visible;if(l){if(u=l.context,u.save(),u.resetTransform(),"dirtyTransform"!==p&&(p=x||a),p&&l.clear(),f){const{width:T,height:N,x:w,y:P}=f;o(()=>({name:n,clipBBox:f,ctxTransform:u.getTransform(),renderCtx:t,group:this})),this.clipCtx(u,w,P,T,N)}u.setTransform(b)}else u.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(u),d){const{x:T,y:N,width:w,height:P}=d;u.save(),o(()=>({name:n,clipRect:d,ctxTransform:u.getTransform(),renderCtx:t,group:this})),this.clipCtx(u,T,N,w,P),f=this.matrix.transformBBox(d)}const O=this.hasVirtualChildren();a?(this.sortChildren(c),"dirtyTransform"!==p&&(p=!0)):O&&this.sortChildren(c);const D=p!==t.forceRender||f!==t.clipBBox||u!==t.ctx?Object.assign(Object.assign({},t),{ctx:u,forceRender:p,clipBBox:f}):t;let L=0;for(const T of c)T.visible&&E?p||T.dirty!==M.NONE?(u.save(),T.render(D),u.restore()):y&&(L+=T.nodeCount.count):(T.markClean(),y&&(L+=T.nodeCount.count));if(y&&(y.nodesSkipped+=L),super.render(t),d&&u.restore(),O)for(const T of this.virtualChildren)T.markClean({recursive:"virtual"});l&&(y&&y.layersRendered++,u.restore(),p&&l.snapshot(),null===(i=(e=l.context).verifyDepthZero)||void 0===i||i.call(e)),n&&y&&o({name:n,result:"rendered",skipped:L,renderCtx:t,counts:this.nodeCount,group:this})}sortChildren(t){this.dirtyZIndex=!1,t.sort((e,i)=>{var n,o;return gl([e.zIndex,...null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0],e.serialNumber],[i.zIndex,...null!==(o=i.zIndexSubOrder)&&void 0!==o?o:[void 0,void 0],i.serialNumber],fl)})}clipCtx(t,e,i,n,o){t.beginPath(),t.moveTo(e,i),t.lineTo(e+n,i),t.lineTo(e+n,i+o),t.lineTo(e,i+o),t.closePath(),t.clip()}static computeBBox(t){let e=1/0,i=-1/0,n=1/0,o=-1/0;return t.forEach(r=>{if(!r.visible)return;const a=r.computeTransformedBBox();if(!a)return;const l=a.x,c=a.y;l<e&&(e=l),c<n&&(n=c),l+a.width>i&&(i=l+a.width),c+a.height>o&&(o=c+a.height)}),new U(e,n,i-e,o-n)}setClipRectInGroupCoordinateSpace(t){this.clipRect=t?this.transformBBox(t):void 0}}z.className="Group",m([F({redraw:M.MAJOR,convertor:s=>Math.min(1,Math.max(0,s))}),v("design:type",Number)],z.prototype,"opacity",void 0);class rt{static select(t,e,i=!0){return new rt(t,e,i)}static selectAll(t,e){const i=[],n=o=>{e(o)&&i.push(o),o.children.forEach(n)};return n(t),i}static selectByClass(t,e){return rt.selectAll(t,i=>i instanceof e)}static selectByTag(t,e){return rt.selectAll(t,i=>i.tag===e)}constructor(t,e,i=!0){this.parentNode=t,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=Tt.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(Ot,e)?()=>new e:e}createNode(t,e,i){const n=this.nodeFactory(t);return n.datum=t,e?.(n),null!=i?this._nodes.splice(i,0,n):this._nodes.push(n),this.parentNode.appendChild(n),n}update(t,e,i){if(this.garbageBin.size>0&&this.debug(`Selection - update() called with pending garbage: ${t}`),i){const n=new Map(t.map((o,r)=>[i(o),[o,r]]));for(const[o,r]of this._nodesMap.entries())if(n.has(r)){const[a]=n.get(r);o.datum=a,this.garbageBin.delete(o),n.delete(r)}else this.garbageBin.add(o);for(const[o,[r,a]]of n.entries())this._nodesMap.set(this.createNode(r,e,a),o)}else{const n=Math.max(t.length,this.data.length);for(let o=0;o<n;o++)o>=t.length?this.garbageBin.add(this._nodes[o]):o>=this._nodes.length?this.createNode(t[o],e):(this._nodes[o].datum=t[o],this.garbageBin.delete(this._nodes[o]))}return this.data=t.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return 0===this.garbageBin.size||(this._nodes=this._nodes.filter(t=>!this.garbageBin.has(t)||(this._nodesMap.delete(t),this.garbageBin.delete(t),this.parentNode.removeChild(t),!1))),this}clear(){return this.update([]),this}isGarbage(t){return this.garbageBin.has(t)}hasGarbage(){return this.garbageBin.size>0}each(t){return this._nodes.forEach((e,i)=>t(e,e.datum,i)),this}*[Symbol.iterator](){for(let t=0;t<this._nodes.length;t++){const e=this._nodes[t],i=this._nodes[t].datum;yield{node:e,datum:i,index:t}}}select(t){return rt.selectAll(this.parentNode,t)}selectByClass(t){return rt.selectByClass(this.parentNode,t)}selectByTag(t){return rt.selectByTag(this.parentNode,t)}nodes(){return this._nodes}}class Bt extends J{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(t){this.x1=t,this.x2=t}set y(t){this.y1=t,this.y2=t}computeBBox(){return new U(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(t,e){if(this.x1===this.x2||this.y1===this.y2){const{x:i,y:n}=this.transformPoint(t,e);return this.computeBBox().grow(this.strokeWidth/2).containsPoint(i,n)}return!1}render(t){var e;const{ctx:i,forceRender:n,stats:o}=t;if(this.dirty===M.NONE&&!n)return void(o&&(o.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:r,y1:a,x2:l,y2:c}=this;if(r===l){const d=Math.round(r)+Math.floor(this.strokeWidth)%2/2;r=d,l=d}else if(a===c){const d=Math.round(a)+Math.floor(this.strokeWidth)%2/2;a=d,c=d}i.beginPath(),i.moveTo(r,a),i.lineTo(l,c),this.fillStroke(i),null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}function ts(s,t,e,i,n,o,r,a){const l=(e-s)*(a-o)-(i-t)*(r-n);if(0===l)return null;const c=((r-n)*(t-o)-(s-n)*(a-o))/l,d=((e-s)*(t-o)-(i-t)*(s-n))/l;return c>=0&&c<=1&&d>=0&&d<=1?{x:s+c*(e-s),y:t+c*(i-t)}:null}function Ru(s,t,e,i,n,o,r,a,l,c,d,h){const u=[],p=c-h,f=d-l,g=l*(h-c)-c*(d-l),y=yl(s,e,n,r),b=yl(t,i,o,a),O=function Mu(s,t,e,i){if(0===s)return function Lu(s,t,e){if(0===s)return function Nu(s,t){const e=-t/s;return 0!==s&&e>=0&&e<=1?[e]:[]}(t,e);const i=t*t-4*s*e,n=[];if(0===i){const o=-t/(2*s);o>=0&&o<=1&&n.push(o)}else if(i>0){const o=Math.sqrt(i),r=(-t-o)/(2*s),a=(-t+o)/(2*s);r>=0&&r<=1&&n.push(r),a>=0&&a<=1&&n.push(a)}return n}(t,e,i);const n=t/s,o=e/s,a=(3*o-n*n)/9,l=(9*n*o-i/s*27-2*n*n*n)/54,c=a*a*a+l*l,d=1/3,h=[];if(c>=0){const u=Math.sqrt(c),p=Math.sign(l+u)*Math.pow(Math.abs(l+u),d),f=Math.sign(l-u)*Math.pow(Math.abs(l-u),d),g=Math.abs(Math.sqrt(3)*(p-f)/2),y=-d*n+(p+f);if(y>=0&&y<=1&&h.push(y),0===g){const b=-d*n-(p+f)/2;b>=0&&b<=1&&h.push(b)}}else{const u=Math.acos(l/Math.sqrt(-a*a*a)),p=d*n,f=2*Math.sqrt(-a),g=f*Math.cos(d*u)-p,y=f*Math.cos(d*(u+2*Math.PI))-p,b=f*Math.cos(d*(u+4*Math.PI))-p;g>=0&&g<=1&&h.push(g),y>=0&&y<=1&&h.push(y),b>=0&&b<=1&&h.push(b)}return h}(p*y[0]+f*b[0],p*y[1]+f*b[1],p*y[2]+f*b[2],p*y[3]+f*b[3]+g);for(const A of O){const D=A*A,L=A*D,T=y[0]*L+y[1]*D+y[2]*A+y[3],N=b[0]*L+b[1]*D+b[2]*A+b[3];let w;w=l!==d?(T-l)/(d-l):(N-c)/(h-c),w>=0&&w<=1&&u.push({x:T,y:N})}return u}function yl(s,t,e,i){return[3*t-s-3*e+i,3*s-6*t+3*e,-3*s+3*t,s]}function ml(s,t,e,i,n,o,r,a,l,c){const d=(c-a)/(l-r),h=a-d*r,u=Math.pow(d,2)+1,p=2*(d*(h-t)-s),f=Math.pow(s,2)+Math.pow(h-t,2)-Math.pow(e,2),g=Math.pow(p,2)-4*u*f;if(g<0)return[];const y=(-p+Math.sqrt(g))/2/u,b=(-p-Math.sqrt(g))/2/u,_=[];return[y,b].forEach(x=>{if(!(x>=Math.min(r,l)&&x<=Math.max(r,l)))return;const E=d*x+h,O=Ut(i);let A=Ut(n),D=Ut(Math.atan2(E,x));A<=O&&(A+=2*Math.PI),D<O&&(D+=2*Math.PI),o!==(D>=O&&D<=A)&&_.push({x,y:E})}),_}function vl(s,t,e){const i=Math.sqrt(Math.pow(s,2)+Math.pow(t,2)),{innerRadius:n,outerRadius:o}=e;if(e.startAngle===e.endAngle||i<Math.min(n,o)||i>Math.max(n,o))return!1;const r=Ps(e.startAngle),a=Ps(e.endAngle),l=Math.atan2(t,s);return r<a?l<=a&&l>=r:l<=a&&l>=-Math.PI||l>=r&&l<=Math.PI}function bl(s,t){const{startAngle:e,endAngle:i,innerRadius:n,outerRadius:o}=t,r={x:o*Math.cos(e),y:o*Math.sin(e)},a={x:o*Math.cos(i),y:o*Math.sin(i)},l=0===n?{x:0,y:0}:{x:n*Math.cos(e),y:n*Math.sin(e)},c=0===n?{x:0,y:0}:{x:n*Math.cos(i),y:n*Math.sin(i)};return null!=ts(s.start.x,s.start.y,s.end.x,s.end.y,r.x,r.y,l.x,l.y)||null!=ts(s.start.x,s.start.y,s.end.x,s.end.y,a.x,a.y,c.x,c.y)||ml(0,0,o,e,i,!0,s.start.x,s.start.y,s.end.x,s.end.y).length>0}Bt.className="Line",Bt.defaultStyles=Object.assign({},J.defaultStyles,{fill:void 0,strokeWidth:1}),m([F({redraw:M.MAJOR}),v("design:type",Number)],Bt.prototype,"x1",void 0),m([F({redraw:M.MAJOR}),v("design:type",Number)],Bt.prototype,"y1",void 0),m([F({redraw:M.MAJOR}),v("design:type",Number)],Bt.prototype,"x2",void 0),m([F({redraw:M.MAJOR}),v("design:type",Number)],Bt.prototype,"y2",void 0);var At=function(s){return s[s.Move=0]="Move",s[s.Line=1]="Line",s[s.Arc=2]="Arc",s[s.Curve=3]="Curve",s[s.ClosePath=4]="ClosePath",s}(At||{});class Bi{constructor(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}isDirty(){if(this._closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length)return!0;for(let t=0;t<this.commands.length;t++)if(this.commands[t]!==this.previousCommands[t])return!0;for(let t=0;t<this.params.length;t++)if(this.params[t]!==this.previousParams[t])return!0;return!1}draw(t){const e=this.commands,i=this.params;let n=0;t.beginPath();for(const o of e)switch(o){case At.Move:t.moveTo(i[n++],i[n++]);break;case At.Line:t.lineTo(i[n++],i[n++]);break;case At.Curve:t.bezierCurveTo(i[n++],i[n++],i[n++],i[n++],i[n++],i[n++]);break;case At.Arc:t.arc(i[n++],i[n++],i[n++],i[n++],i[n++],1===i[n++]);break;case At.ClosePath:t.closePath()}0===e.length&&t.closePath()}moveTo(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push(At.Move),this.params.push(t,e)}lineTo(t,e){this.xy?(this.commands.push(At.Line),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)}rect(t,e,i,n){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.closePath()}arc(t,e,i,n,o,r=!1){const a=t+i*Math.cos(o),l=e+i*Math.sin(o);this.xy?(this.xy[0]=a,this.xy[1]=l):this.xy=[a,l],this.commands.push(At.Arc),this.params.push(t,e,i,n,o,r?1:0)}cubicCurveTo(t,e,i,n,o,r){this.xy||this.moveTo(t,e),this.commands.push(At.Curve),this.params.push(t,e,i,n,o,r),this.xy&&(this.xy[0]=o,this.xy[1]=r)}get closedPath(){return this._closedPath}closePath(){this.xy&&(this.xy=void 0,this.commands.push(At.ClosePath),this._closedPath=!0)}clear({trackChanges:t}={trackChanges:!1}){t?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1}isPointInPath(t,e){const i=this.commands,n=this.params,o=i.length,r=-1e4,a=-1e4;let l=NaN,c=NaN,d=0,h=0,u=0;for(let p=0,f=0;p<o;p++)switch(i[p]){case At.Move:!isNaN(l)&&ts(l,c,d,h,r,a,t,e)&&u++,d=n[f++],l=d,h=n[f++],c=h;break;case At.Line:ts(d,h,n[f++],n[f++],r,a,t,e)&&u++,d=n[f-2],h=n[f-1];break;case At.Curve:u+=Ru(d,h,n[f++],n[f++],n[f++],n[f++],n[f++],n[f++],r,a,t,e).length,d=n[f-2],h=n[f-1];break;case At.Arc:const g=n[f++],y=n[f++],b=n[f++],_=n[f++],x=n[f++];u+=ml(g,y,b,_,x,!!n[f++],r,a,t,e).length,d=g+Math.cos(x)*b,h=y+Math.sin(x)*b;break;case At.ClosePath:!isNaN(l)&&ts(l,c,d,h,r,a,t,e)&&u++}return u%2==1}getPoints(){const{commands:t,params:e}=this,i=[];let n=0;for(let o=0;o<t.length;o++)switch(t[o]){case At.Move:case At.Line:i.push({x:e[n++],y:e[n++]});break;case At.Curve:n+=4,i.push({x:e[n++],y:e[n++]});break;case At.Arc:i.push({x:e[n++],y:e[n++]}),n+=4}return i}}function st(s){const{redraw:t=M.MAJOR,changeCb:e,convertor:i}=s??{};return F({redraw:t,type:"path",convertor:i,changeCb:e})}class he extends J{constructor(){super(...arguments),this.path=new Bi,this.clipScalingX=1,this.clipScalingY=1,this._dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty(this,M.MAJOR))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var t,e,i,n;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!==(e=null===(t=this.fillShadow)||void 0===t?void 0:t.isDirty())&&void 0!==e&&e||null!==(n=null===(i=this.clipPath)||void 0===i?void 0:i.isDirty())&&void 0!==n&&n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}isDirtyPath(){return!1}updatePath(){}clip(t,e){const i=t.getTransform(),n=1!==this.clipScalingX||1!==this.clipScalingY;n&&t.scale(this.clipScalingX,this.clipScalingY),e(),n&&t.setTransform(i)}render(t){var e;const{ctx:i,forceRender:n,stats:o}=t;this.dirty!==M.NONE||n?(this.computeTransformMatrix(),this.matrix.toContext(i),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.clipPath&&null!=this.clipMode?(i.save(),"normal"===this.clipMode&&this.clip(i,()=>{var r;null===(r=this.clipPath)||void 0===r||r.draw(i),i.clip()}),this.clipScalingX>0&&this.clipScalingY>0&&(this.path.draw(i),this.fillStroke(i)),"punch-out"===this.clipMode&&this.clip(i,()=>{var r,a;null===(r=this.clipPath)||void 0===r||r.draw(i),i.clip();const{x:l=-1e4,y:c=-1e4,width:d=2e4,height:h=2e4}=null!==(a=this.computeBBox())&&void 0!==a?a:{};i.clearRect(l,c,d,h)}),i.restore()):(this.path.draw(i),this.fillStroke(i)),null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)):o&&(o.nodesSkipped+=this.nodeCount.count)}}he.className="Path",m([st(),v("design:type",Bi)],he.prototype,"clipPath",void 0),m([st(),v("design:type",String)],he.prototype,"clipMode",void 0),m([st(),v("design:type",Object)],he.prototype,"clipScalingX",void 0),m([st(),v("design:type",Object)],he.prototype,"clipScalingY",void 0);class Ne extends he{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.angleOffset=0,this.inset=0}computeBBox(){const t=this.outerRadius;return new U(this.centerX-t,this.centerY-t,2*t,2*t)}updatePath(){const t=this.path,{angleOffset:e,inset:i}=this,n=this.startAngle+e,o=this.endAngle+e,r=Math.abs(this.endAngle-this.startAngle)>=2*Math.PI,a=this.centerX,l=this.centerY;if(t.clear(),r){const c=this.innerRadius<=0?0:this.innerRadius+i,d=Math.min(c,this.outerRadius-i),h=Math.max(c,this.outerRadius-i);t.arc(a,l,h,n,o),d>0&&(t.moveTo(a+d*Math.cos(o),l+d*Math.sin(o)),t.arc(a,l,d,o,n,!0))}else{const c=Math.min(this.innerRadius+i,this.outerRadius-i),d=Math.max(this.innerRadius+i,this.outerRadius-i),h=c>0?i/c:0,u=d>0?i/d:0,p=Math.abs(o-n);if(p<2*u)return;const g=c<=i||p<2*h;if(g){const y=Math.abs(p)<.5*Math.PI?i*(1+Math.cos(p))/Math.sin(p):NaN;let b;b=y>0&&y<d?Math.max(Math.hypot(i,y),c):c;const _=.5*(n+o);t.moveTo(a+b*Math.cos(_),l+b*Math.sin(_))}else t.moveTo(a+c*Math.cos(n+h),l+c*Math.sin(n+h));t.arc(a,l,d,n+u,o-u),g||(c>0?t.arc(a,l,c,o-h,n+h,!0):t.lineTo(a,l))}t.closePath(),this.dirtyPath=!1}isPointInPath(t,e){const{angleOffset:i}=this,n=this.startAngle+i,o=this.endAngle+i,r=Math.min(this.innerRadius,this.outerRadius),a=Math.max(this.innerRadius,this.outerRadius),l=this.transformPoint(t,e);return vl(l.x,l.y,{startAngle:n,endAngle:o,innerRadius:r,outerRadius:a})}}function ue(s,t){if(xl(s)&&xl(t)){const e={};return Object.keys(s).forEach(i=>{e[i]=i in t?ue(s[i],t[i]):s[i]}),Object.keys(t).forEach(i=>{i in s||(e[i]=t[i])}),e}return Array.isArray(s)&&!Array.isArray(t)||ir(s)&&!ir(t)?s:t}function ir(s){return"object"==typeof s&&null!==s}function nr(s){return ir(s)&&!Array.isArray(s)}function xl(s){return nr(s)&&s.constructor===Object}function te(...s){var t;const e={};for(const i of s){if(!i)continue;const n=Po(i)?Fo(i):Object.keys(i);for(const o of n)nr(e[o])&&nr(i[o])?e[o]=te(e[o],i[o]):null!==(t=e[o])&&void 0!==t||(e[o]=i[o])}return e}Ne.className="Sector",m([st(),v("design:type",Number)],Ne.prototype,"centerX",void 0),m([st(),v("design:type",Number)],Ne.prototype,"centerY",void 0),m([st(),v("design:type",Number)],Ne.prototype,"innerRadius",void 0),m([st(),v("design:type",Number)],Ne.prototype,"outerRadius",void 0),m([st(),v("design:type",Number)],Ne.prototype,"startAngle",void 0),m([st(),v("design:type",Number)],Ne.prototype,"endAngle",void 0),m([st(),v("design:type",Number)],Ne.prototype,"angleOffset",void 0),m([st(),v("design:type",Number)],Ne.prototype,"inset",void 0);let dn=null;function mt(s){if(null!=s)return""===s?"":(dn??(dn=document.createElement("div")),dn.textContent=String(s),dn.innerHTML)}const sr=s=>"string"==typeof s,Sl=s=>!!s&&Object.prototype.hasOwnProperty.call(s,"toString")&&sr(s.toString());function or(s){return ee(s)||!!(i=s)&&Object.prototype.hasOwnProperty.call(i,"valueOf")&&ee(i.valueOf())||(i=>i instanceof Date&&!isNaN(+i))(s);var i}function es(s,t){return t&&or(s)?s:t?void 0:function _l(s){return sr(s)||Sl(s)}(s)?s:String(s)}const ee=s=>"number"==typeof s&&Number.isFinite(s),is=new Map;function $s(s,t){var e,i,n;const o=JSON.stringify(s,null,0);return is.has(t)||is.set(t,new Map),!(null===(e=is.get(t))||void 0===e)&&e.has(o)||null===(i=is.get(t))||void 0===i||i.set(o,t(s)),null===(n=is.get(t))||void 0===n?void 0:n.get(o)}const rr={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let s=NaN;return(t=1/0,e)=>{const i=e.keys[0],n=Math.abs(i-s);return s=i,!isNaN(n)&&n>0&&n<t?n:t}}},kl={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:s}})=>{if(null!=s)return[...s].sort((t,e)=>{for(let i=0;i<t.length;i++){const n=t[i]-e[i];if(0!==n)return n}return 0})}};function Fu({normaliseTo:s,mode:t}){const e=(i,n)=>{const o=i*s/n;return o>=0?Math.min(s,o):Math.max(-s,o)};return()=>()=>(i,n)=>{const o=[0,0];for(const a of n){const l=i[a],c=l<0?0:1;"sum"===t?o[c]+=l:o[c]=0===c?Math.min(o[c],l):Math.max(o[c],l)}const r=Math.max(Math.abs(o[0]),o[1]);for(const a of n)i[a]=e(i[a],r)}}function qs(s,t,e,i="sum"){return{scopes:[s.id],type:"group-value-processor",matchGroupIds:t,adjust:$s({normaliseTo:e,mode:i},Fu)}}function Bu({normaliseTo:s,zeroDomain:t,rangeMin:e,rangeMax:i}){const n=s[1]-s[0],o=(r,a,l)=>{const c=s[0]+(r-a)/l*n;return 0===l?t:c>=s[1]?s[1]:c<s[0]?s[0]:c};return()=>(r,a)=>{let[l,c]=r.domain.values[a];null!=e&&(l=e),null!=i&&(c=i);const d=c-l;r.domain.values[a]=[s[0],s[1]];for(const h of r.data){let u=h.values;"ungrouped"===r.type&&(u=[u]);for(const p of u)p[a]=o(p[a],l,d)}}}function ar(s,t,e,i,n,o){return{scopes:[s.id],type:"property-value-processor",property:t,adjust:$s({normaliseTo:e,rangeMin:n,rangeMax:o,zeroDomain:i},Bu)}}function ns(s,t=[]){return{type:"processor",scopes:[s.id],property:"animationValidation",calculate(e){var i;const{keys:n,values:o}=e.defs,{input:r,data:a}=e;let l=!0,c=!0;const d=[];for(let u=0;u<o.length;u++)null!==(i=o[u].scopes)&&void 0!==i&&i.some(p=>p===s.id)&&t.some(p=>o[u].id===p)&&d.push([u,o[u]]);const h=(u,p,f)=>{var g;if("category"===p.valueType)return void(l&&(l=e.domain[f][u].length===r.count));let y=null===(g=a[0])||void 0===g?void 0:g[f][u];for(let b=1;(l||c)&&b<a.length;b++){const _=a[b][f][u];c&&(c=y<=_),l&&(l=y!==_),y=_}};for(let u=0;(l||c)&&u<n.length;u++)h(u,n[u],"keys");for(let u=0;(l||c)&&u<d.length;u++){const[p,f]=d[u];h(p,f,"values")}return{uniqueKeys:l,orderedKeys:c}}}}function Gu({mode:s,separateNegative:t}){return()=>()=>(e,i)=>{const n=[0,0];for(const o of i){const r=e[o],a=Xn(r)&&t?0:1;"number"!=typeof r||isNaN(r)||("normal"===s&&(n[a]+=r),e[o]=n[a],"trailing"===s&&(n[a]+=r))}}}function ju({mode:s,sum:t}){return()=>{const e=[];let i=!0;return()=>(n,o)=>{let r=0;for(const a of o){const l=n[a],c=i&&"current"===t?0:e[a];e[a]=l;const d="current"===t?l:c;"number"!=typeof l||isNaN(l)||"number"!=typeof c||isNaN(c)?n[a]=r:("normal"===s&&(r+=d),n[a]=r,"trailing"===s&&(r+=d))}i=!1}}}function Ol(s,t,e,i,n=!1){let o;return o=e.startsWith("window")?$s({mode:e.endsWith("-trailing")?"trailing":"normal",sum:i},ju):$s({mode:e,separateNegative:n},Gu),{scopes:[s.id],type:"group-value-processor",matchGroupIds:[t],adjust:o}}function hn(s,t=!0){return{type:"processor",property:"diff",calculate:e=>{const i={changed:!1,moved:[],added:[],updated:[],removed:[],addedIndices:[],updatedIndices:[],removedIndices:[]},n=new Map,o=new Map,r=new Map,a=new Map,l=new Map,c=new Map,d=new Map;for(let h=0;h<Math.max(s.data.length,e.data.length);h++){const u=s.data[h],p=e.data[h],f=u?un(u.keys):"",g=p?un(p.keys):"";f!==g?(a.has(g)?((t||!zn(a.get(g).values,p.values))&&(r.set(g,p),c.set(g,h),n.set(g,p)),a.delete(g),d.delete(g)):p&&(o.set(g,p),l.set(g,h)),o.has(f)?((t||!zn(o.get(f).values,u.values))&&(r.set(f,u),c.set(f,h),n.set(f,u)),o.delete(f),l.delete(f)):u&&(r.delete(f),c.delete(f),a.set(f,u),d.set(f,h))):zn(u.values,p.values)||(r.set(g,p),c.set(g,h))}return i.added=Array.from(o.keys()),i.updated=Array.from(r.keys()),i.removed=Array.from(a.keys()),i.moved=Array.from(n.keys()),i.addedIndices=Array.from(l.values()),i.updatedIndices=Array.from(c.values()),i.removedIndices=Array.from(d.values()),i.changed=i.added.length>0||i.updated.length>0||i.removed.length>0,i}}}function un(s){return s.join("___")}class Gt{constructor(){this.enabled=!0,this.color="#464646",this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return vi(this)}}function Zs(s){const{parallelFlipRotation:t=0,regularFlipRotation:e=0}=s,i=s.rotation?Ut(ce(s.rotation)):0,n=!i&&t>=0&&t<=Math.PI?-1:1,o=!i&&e>=0&&e<=Math.PI?-1:1;let r=0;return s.parallel?r=n*Math.PI/2:-1===o&&(r=Math.PI),{configuredRotation:i,defaultRotation:r,parallelFlipFlag:n,regularFlipFlag:o}}function lr(s,t,e,i,n){const o=t>0&&t<=Math.PI,r=e>0&&e<=Math.PI;if(s){if(!t&&!e)return"center";if(i*(o||r?-1:1)==-1)return"end"}else if(i*n==-1)return"end";return"start"}function zu(s,t,e,i,n){const{width:o,height:r}=t,a=new U(e,i,0,0);n.transformBBox(a,t);const{x:l=0,y:c=0}=t;return t.width=o,t.height=r,{point:{x:l,y:c,size:0},label:{width:o,height:r,text:s}}}m([S(nt),v("design:type",Object)],Gt.prototype,"enabled",void 0),m([S(me),v("design:type",Object)],Gt.prototype,"color",void 0),m([S(gi),v("design:type",String)],Gt.prototype,"fontStyle",void 0),m([S(yi),v("design:type",String)],Gt.prototype,"fontWeight",void 0),m([S(C(0)),v("design:type",Object)],Gt.prototype,"fontSize",void 0),m([S($t),v("design:type",Object)],Gt.prototype,"fontFamily",void 0),m([S(Ke),v("design:type",Function)],Gt.prototype,"formatter",void 0);var ut=function(s){return s[s.SERIES_BACKGROUND_ZINDEX=-10]="SERIES_BACKGROUND_ZINDEX",s[s.AXIS_GRID_ZINDEX=0]="AXIS_GRID_ZINDEX",s[s.AXIS_ZINDEX=20]="AXIS_ZINDEX",s[s.SERIES_CROSSLINE_RANGE_ZINDEX=30]="SERIES_CROSSLINE_RANGE_ZINDEX",s[s.SERIES_LAYER_ZINDEX=500]="SERIES_LAYER_ZINDEX",s[s.AXIS_FOREGROUND_ZINDEX=750]="AXIS_FOREGROUND_ZINDEX",s[s.SERIES_CROSSHAIR_ZINDEX=1e3]="SERIES_CROSSHAIR_ZINDEX",s[s.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",s[s.SERIES_CROSSLINE_LINE_ZINDEX=2500]="SERIES_CROSSLINE_LINE_ZINDEX",s[s.LEGEND_ZINDEX=3e3]="LEGEND_ZINDEX",s}(ut||{});class ve extends he{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){const{x:t,y:e,size:i}=this,n=i/2;return new U(t-n,e-n,i,i)}applyPath(t,e){const{path:i}=this;let{x:n,y:o}=this;i.clear();for(const{x:r,y:a,t:l}of e)n+=r*t,o+=a*t,"move"===l?i.moveTo(n,o):i.lineTo(n,o);i.closePath()}}m([st(),v("design:type",Number)],ve.prototype,"x",void 0),m([st(),v("design:type",Number)],ve.prototype,"y",void 0),m([st({convertor:Math.abs}),v("design:type",Number)],ve.prototype,"size",void 0);let Js=(()=>{class s extends ve{updatePath(){const{x:e,y:i,path:n,size:o}=this,r=o/2;n.clear(),n.arc(e,i,r,0,2*Math.PI),n.closePath()}}return s.className="Circle",s})();const oi={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},pn={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"};class El{constructor(t){this.modules={},this.parent=t}destroy(){for(const[t,e]of Object.entries(this.modules))e.instance.destroy(),delete this.modules[t],delete this.parent[t]}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);if(t.optionsKey in this.parent)throw new Error(`AG Charts - class already has option key '${t.optionsKey}'`);null==this.moduleContext&&(this.moduleContext=this.parent.createModuleContext());const e=new t.instanceConstructor(Object.assign({},this.moduleContext));this.modules[t.optionsKey]={instance:e},this.parent[t.optionsKey]=e}removeModule(t){var e,i;null===(i=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===i||i.destroy(),delete this.modules[t.optionsKey],delete this.parent[t.optionsKey]}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}*[Symbol.iterator](){for(const{instance:t}of Object.values(this.modules))yield t}}class Qs{constructor(){this.registeredListeners=new Map}addListener(t,e,i){const n={symbol:Symbol(t),handler:e,meta:i};return this.registeredListeners.has(t)?this.registeredListeners.get(t).push(n):this.registeredListeners.set(t,[n]),()=>this.removeListener(n.symbol)}removeListener(t){for(const[e,i]of this.registeredListeners.entries()){const n=i.findIndex(o=>o.symbol===t);if(n>=0){i.splice(n,1),0===i.length&&this.registeredListeners.delete(e);break}}}dispatch(t,...e){const n=new class i{constructor(){this.results=void 0}push(r){var a;void 0!==r&&(null!==(a=this.results)&&void 0!==a||(this.results=[]),this.results.push(r))}};for(const o of this.getListenersByType(t))try{n.push(o.handler(...e))}catch(r){B.errorOnce(r)}return n.results}dispatchWrapHandlers(t,e,...i){for(const n of this.getListenersByType(t))try{e(n.handler,n.meta,...i)}catch(o){B.errorOnce(o)}}getListenersByType(t){var e;return null!==(e=this.registeredListeners.get(t))&&void 0!==e?e:[]}}class Al{constructor(){this.eventListeners=new Map}addEventListener(t,e){if("function"!=typeof e)throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(t);i?i.add(e):this.eventListeners.set(t,new Set([e]))}removeEventListener(t,e){var i;null===(i=this.eventListeners.get(t))||void 0===i||i.delete(e),0===this.eventListeners.size&&this.eventListeners.delete(t)}hasEventListener(t){return this.eventListeners.has(t)}clearEventListeners(){this.eventListeners.clear()}fireEvent(t){var e;null===(e=this.eventListeners.get(t.type))||void 0===e||e.forEach(i=>i(t))}}function ss(s,t=[1/0,-1/0]){for(const e of s)"number"==typeof e&&(e<t[0]&&(t[0]=e),e>t[1]&&(t[1]=e));return t}function to(s,t=[0,0]){for(const e of s)"number"==typeof e&&(e<0&&(t[0]+=e),e>0&&(t[1]+=e));return t}function cr(s,t){return{id:t,scopes:[s.id],type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(e,i=[0,0])=>{var n,o;return i[0]+=null!==(n=e?.[0])&&void 0!==n?n:0,i[1]+=null!==(o=e?.[1])&&void 0!==o?o:0,i}}}function dr(s,t,e,i){const n={id:t,scopes:[s.id],matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:(o,r=[])=>{const a=r[1]-r[0];return e.aggregateFunction(o).map(l=>l/a)}};return e.groupAggregateFunction&&(n.groupAggregateFunction=e.groupAggregateFunction),n}function Nl(s){return()=>{let t=0;return e=>"number"!=typeof e||isNaN(e)?e:(t+=s?Math.max(0,e):e,t)}}var vt=function(s){return s[s.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",s[s.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",s[s.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",s[s.NEAREST_NODE=3]="NEAREST_NODE",s}(vt||{});function hr(s){return null!=es(s,!0)}function Ml(s){return null!=es(s,!1)}function ie(s,t,e,i={}){return Object.assign({scopes:[s.id],property:t,type:"key",valueType:e?"range":"category",validation:e?hr:Ml},i)}function bt(s,t,e,i={}){return Object.assign({scopes:[s.id],property:t,type:"value",valueType:e?"range":"category",validation:e?hr:Ml},i)}function Cl(s,t,e,i={}){const{onlyPositive:n}=i,o=le(i,["onlyPositive"]);return Object.assign(Object.assign({},bt(s,t,e,o)),{processor:Nl(n)})}function bi(s,t,e,i,n="current",o){return[bt(s,t,e,o),Ol(s,o.groupId,i,n,o.separateNegative)]}class eo{constructor(t,e,{datum:i},n){this.type=t,this.event=e,this.datum=i,this.seriesId=n.id}}class ri{constructor(){this.fill="yellow",this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.lineDashOffset=void 0}}m([S(St),v("design:type",String)],ri.prototype,"fill",void 0),m([S(Z(0,1)),v("design:type",Number)],ri.prototype,"fillOpacity",void 0),m([S(St),v("design:type",String)],ri.prototype,"stroke",void 0),m([S(Z(0)),v("design:type",Number)],ri.prototype,"strokeWidth",void 0),m([S(Z(0,1)),v("design:type",Number)],ri.prototype,"strokeOpacity",void 0),m([S(mi),v("design:type",Array)],ri.prototype,"lineDash",void 0),m([S(Z(0)),v("design:type",Number)],ri.prototype,"lineDashOffset",void 0);class io{constructor(){this.strokeWidth=void 0,this.dimOpacity=void 0,this.enabled=void 0}}m([S(Z(0)),v("design:type",Number)],io.prototype,"strokeWidth",void 0),m([S(Z(0,1)),v("design:type",Number)],io.prototype,"dimOpacity",void 0),m([S(De),v("design:type",Boolean)],io.prototype,"enabled",void 0);class Il{constructor(){this.color="black"}}m([S(St),v("design:type",String)],Il.prototype,"color",void 0);class ur{constructor(){this.item=new ri,this.series=new io,this.text=new Il}}var $e=function(s){return s[s.None=0]="None",s[s.This=1]="This",s[s.Other=2]="Other",s}($e||{});class Le extends Al{get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}set data(t){this._data=t,this.onDataChange()}get data(){var t;return null!==(t=this._data)&&void 0!==t?t:this._chartData}onDataChange(){this.nodeDataRefresh=!0}setChartData(t){this._chartData=t,this.data===t&&this.onDataChange()}hasData(){const{data:t}=this;return t&&(!Array.isArray(t)||t.length>0)}set visible(t){this._visible=t,this.visibleChanged()}get visible(){return this._visible}onSeriesGroupingChange(t,e){const{id:i,type:n,visible:o,rootGroup:r,highlightGroup:a,annotationGroup:l}=this;t&&this.ctx.seriesStateManager.deregisterSeries({id:i,type:n}),e&&this.ctx.seriesStateManager.registerSeries({id:i,type:n,visible:o,seriesGrouping:e}),null!=this.rootGroup.parent&&this.ctx.seriesLayerManager.changeGroup({id:i,type:n,rootGroup:r,highlightGroup:a,annotationGroup:l,getGroupZIndexSubOrder:c=>this.getGroupZIndexSubOrder(c),seriesGrouping:e,oldGrouping:t})}getBandScalePadding(){return{inner:1,outer:0}}constructor(t){super(),this.NodeClickEvent=eo,this.id=ii(this),this.rootGroup=new z({name:"seriesRoot",isVirtual:!0}),this.axes={[I.X]:void 0,[I.Y]:void 0},this.directions=[I.X,I.Y],this.nodeDataRefresh=!0,this._visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.seriesGrouping=void 0,this._declarationOrder=-1,this.seriesListeners=new Qs,this.highlightStyle=new ur,this.moduleMap=new El(this),this.nodeDataDependencies={},this.ctx=t.moduleCtx;const{useLabelLayer:e=!1,pickModes:i=[vt.NEAREST_BY_MAIN_AXIS_FIRST],directionKeys:n={},directionNames:o={},contentGroupVirtual:r=!0,canHaveAxes:a=!1}=t;this.directionKeys=n,this.directionNames=o,this.canHaveAxes=a,this.contentGroup=this.rootGroup.appendChild(new z({name:`${this.id}-content`,layer:!r,isVirtual:r,zIndex:ut.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=new z({name:`${this.id}-highlight`,layer:!r,isVirtual:r,zIndex:ut.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")}),this.highlightNode=this.highlightGroup.appendChild(new z({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new z({name:"highlightLabel",zIndex:10})),this.pickModes=i,this.labelGroup=this.rootGroup.appendChild(new z({name:`${this.id}-series-labels`,layer:e,zIndex:ut.SERIES_LABEL_ZINDEX})),this.annotationGroup=new z({name:`${this.id}-annotation`,layer:!r,isVirtual:r,zIndex:ut.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("annotation")})}getGroupZIndexSubOrder(t,e=0){let i=0;switch(t){case"data":case"paths":break;case"labels":i+=2e4;break;case"marker":i+=1e4;break;case"highlight":e+=15e3;break;case"annotation":i+=15e3}return[()=>this._declarationOrder+i,e]}addListener(t,e){return this.seriesListeners.addListener(t,e)}dispatch(t,e){return this.seriesListeners.dispatch(t,e)}addChartEventListeners(){}destroy(){this.ctx.seriesStateManager.deregisterSeries(this),this.ctx.seriesLayerManager.releaseGroup(this)}getDirectionValues(t,e){const i=this.resolveKeyDirection(t),n=e?.[i],o=[];if(!n)return o;const r=(...a)=>{for(const l of a)Array.isArray(l)?r(...l):"object"==typeof l?r(...Object.values(l)):o.push(l)};return r(...n.map(a=>this[a])),o}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}getDomain(t){var e;const i=this.getSeriesDomain(t);return(null!==(e=this.dispatch("data-getDomain",{direction:t}))&&void 0!==e?e:[]).reduce((o,r)=>o.concat(r),i)}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){this.ctx.seriesStateManager.registerSeries(this)}getOpacity(){const{dimOpacity:e=1,enabled:i=!0}=this.highlightStyle.series;if(!i||1===e)return 1;switch(this.isItemIdHighlighted()){case $e.None:case $e.This:return 1;default:return e}}getStrokeWidth(t){const{strokeWidth:e,enabled:i=!0}=this.highlightStyle.series;if(!i||void 0===e)return t;switch(this.isItemIdHighlighted()){case $e.This:return e;case $e.None:case $e.Other:return t}}isItemIdHighlighted(){var t,e;const{series:i}=null!==(e=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight())&&void 0!==e?e:{};return null==i?$e.None:i!==this?$e.Other:$e.This}getModuleTooltipParams(t){var e;return(null!==(e=this.dispatch("tooltip-getParams",{datum:t}))&&void 0!==e?e:[]).reduce((n,o)=>Object.assign(Object.assign({},o),n),{})}pickNode(t,e){const{pickModes:i,visible:n,rootGroup:o}=this;if(n&&o.visible)for(const r of i){if(e&&!e.includes(r))continue;let a;switch(r){case vt.EXACT_SHAPE_MATCH:a=this.pickNodeExactShape(t);break;case vt.NEAREST_BY_MAIN_AXIS_FIRST:case vt.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST:a=this.pickNodeMainAxisFirst(t,r===vt.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST);break;case vt.NEAREST_NODE:a=this.pickNodeClosestDatum(t)}if(a)return{pickMode:r,match:a.datum,distance:a.distance}}}pickNodeExactShape(t){const e=this.contentGroup.pickNode(t.x,t.y);return e&&{datum:e.datum,distance:0}}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeMainAxisFirst(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(t,e){this.fireEvent(new this.NodeClickEvent("nodeClick",t,e,this))}fireNodeDoubleClickEvent(t,e){this.fireEvent(new this.NodeClickEvent("nodeDoubleClick",t,e,this))}toggleSeriesItem(t,e){this.visible=e,this.nodeDataRefresh=!0,this.dispatch("visibility-changed",{itemId:t,enabled:e})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return Object.assign(Object.assign({},this.ctx),{series:this})}getLabelText(t,e,i=String){var n;return t.formatter&&null!==(n=this.ctx.callbackCache.call(t.formatter,Object.assign({seriesId:this.id},e)))&&void 0!==n?n:i(e.value)}getMarkerStyle(t,e,i=t.getStyle()){var n,o;const a=te({size:null!==(o=null===(n=e.datum.point)||void 0===n?void 0:n.size)&&void 0!==o?o:0},i);return t.formatter?te(this.ctx.callbackCache.call(t.formatter,Object.assign(Object.assign(Object.assign({seriesId:this.id},a),e),{datum:e.datum.datum})),a):a}updateMarkerStyle(t,e,i,n=e.getStyle(),{applyTranslation:o=!0}={}){const{point:r}=i.datum,a=this.getMarkerStyle(e,i,n),l=this.visible&&a.size>0&&r&&!isNaN(r.x)&&!isNaN(r.y);t.setProperties(o?Object.assign(Object.assign({visible:l},a),{translationX:r?.x,translationY:r?.y}):Object.assign({visible:l},a)),"function"==typeof e.shape&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}getMinRect(){}checkResize(t){const e={seriesRectWidth:t?.width,seriesRectHeight:t?.height},i=null!=Ue(this.nodeDataDependencies,e);return i&&(this.nodeDataDependencies=e,this.markNodeDataDirty()),i}}function kt({id:s},t,e,i){ni(s,t,e,i,{opacity:0},{opacity:1},Jn)}function no({id:s},t,e,i){ni(s,t,e,i,{opacity:1},{opacity:0},Jn)}function xi(s){return{opacity:1}}Le.highlightedZIndex=1e12,m([S($t),v("design:type",Object)],Le.prototype,"id",void 0),m([S(nt),v("design:type",Object)],Le.prototype,"_visible",void 0),m([S(nt),v("design:type",Object)],Le.prototype,"showInLegend",void 0),m([S($t),v("design:type",Object)],Le.prototype,"cursor",void 0),m([S(Ko),v("design:type",Object)],Le.prototype,"nodeClickRange",void 0),m([Ht({changeValue:function(s,t){this.onSeriesGroupingChange(t,s)}}),v("design:type",Object)],Le.prototype,"seriesGrouping",void 0);const so={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function pr(s,t=new Date(s.getFullYear(),0,1)){const e=s.getTimezoneOffset()-t.getTimezoneOffset(),i=s.getTime()-t.getTime()+6e4*e;return Math.floor(i/864e5)}function Pl(s,t){const n=(t-new Date(s.getFullYear(),0,1).getDay()+7)%7,o=new Date(s.getFullYear(),0,n+1);return o<=s?Math.floor(pr(s,o)/7)+1:0}function Gl(s,t=s.getFullYear()){const i=new Date(t,0,1).getDay(),o=new Date(t,0,(4-i+7)%7-3+1);return o<=s?Math.floor(pr(s,o)/7)+1:Gl(s,t-1)}const Ju={a:s=>so.shortDays[s.getDay()],A:s=>so.days[s.getDay()],b:s=>so.shortMonths[s.getMonth()],B:s=>so.months[s.getMonth()],c:"%x, %X",d:(s,t)=>jt(s.getDate(),2,t??"0"),e:"%_d",f:(s,t)=>jt(1e3*s.getMilliseconds(),6,t??"0"),H:(s,t)=>jt(s.getHours(),2,t??"0"),I:(s,t)=>{const e=s.getHours()%12;return 0===e?"12":jt(e,2,t??"0")},j:(s,t)=>jt(pr(s)+1,3,t??"0"),m:(s,t)=>jt(s.getMonth()+1,2,t??"0"),M:(s,t)=>jt(s.getMinutes(),2,t??"0"),L:(s,t)=>jt(s.getMilliseconds(),3,t??"0"),p:s=>s.getHours()<12?"AM":"PM",Q:s=>String(s.getTime()),s:s=>String(Math.floor(s.getTime()/1e3)),S:(s,t)=>jt(s.getSeconds(),2,t??"0"),u:s=>{let t=s.getDay();return t<1&&(t+=7),String(t%7)},U:(s,t)=>jt(Pl(s,0),2,t??"0"),V:(s,t)=>jt(Gl(s),2,t??"0"),w:(s,t)=>jt(s.getDay(),2,t??"0"),W:(s,t)=>jt(Pl(s,1),2,t??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(s,t)=>jt(s.getFullYear()%100,2,t??"0"),Y:(s,t)=>jt(s.getFullYear(),4,t??"0"),Z:s=>function Zu(s){const t=s.getTimezoneOffset(),e=Math.abs(t);return`${t>0?"-":"+"}${jt(Math.floor(e/60),2,"0")}${jt(Math.floor(e%60),2,"0")}`}(s),"%":()=>"%"},Qu={_:" ",0:"0","-":""};function jt(s,t,e){const i=String(Math.floor(s));return i.length>=t?i:`${e.repeat(t-i.length)}${i}`}function oo(s){const t=[];for(;s.length>0;){let e=s.indexOf("%");if(0!==e){const a=e>0?s.substring(0,e):s;t.push(a)}if(e<0)break;const n=Qu[s[e+1]];null!=n&&e++;const o=s[e+1],r=Ju[o];if("function"==typeof r)t.push([r,n]);else if("string"==typeof r){const a=oo(r);t.push([a,n])}else t.push(`${n??""}${o}`);s=s.substring(e+2)}return e=>{const i="number"==typeof e?new Date(e):e;return t.map(n=>"string"==typeof n?n:n[0](i,n[1])).join("")}}const tp=/(#\{(.*?)\})/g;function jl(s,t,e){return s.replace(tp,function(...i){const n=i[2],[o,r]=n.split(":"),a=t[o];if("number"==typeof a){const l=r&&e&&e[r];if(l){const{locales:c,options:d}=l;return a.toLocaleString(c,d)}return String(a)}if(a instanceof Date){const l=r&&e&&e[r];return"string"==typeof l?oo(l)(a):a.toDateString()}return"string"==typeof a||a?.toString?String(a):""})}function fr(s,t){const e=s.createElement("style");e.innerHTML=t,s.head.insertBefore(e,s.head.querySelector("style"))}const It="ag-chart-tooltip",Yl="ag-chart-dark-tooltip",ep=`\n.${It} {\n    transition: transform 0.1s ease;\n    display: table;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    white-space: nowrap;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: rgb(70, 70, 70);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);\n}\n\n.${It}-no-interaction {\n    pointer-events: none;\n    user-select: none;\n}\n\n.${It}-no-animation {\n    transition: none !important;\n}\n\n.${It}-hidden {\n    visibility: hidden;\n}\n\n.${It}-title {\n    position: relative;\n    padding: 8px 14px;\n    border-top-left-radius: 2px;\n    border-top-right-radius: 2px;\n    color: white;\n    background-color: #888888;\n    z-index: 1;\n}\n\n.${It}-title:only-child {\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n}\n\n.${It}-content {\n    padding: 6px 14px;\n    line-height: 1.7em;\n    background: white;\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n    border: 1px solid rgba(0, 0, 0, 0.15);\n    overflow: hidden;\n}\n\n.${It}-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid #d9d9d9;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.${It}-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: calc(100% - 1px);\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid white;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.${It}.${Yl} {\n    color: white;\n    background: #15181c;\n}\n\n.${It}.${Yl} .${It}-content {\n    border-color: rgba(255, 255, 255, 0.15);\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n`;function os(s,t){var e,i,n;if("string"==typeof s)return s;const{content:o=(null!==(e=t?.content)&&void 0!==e?e:""),title:r=t?.title,color:a=(null!==(i=t?.color)&&void 0!==i?i:"white"),backgroundColor:l=(null!==(n=t?.backgroundColor)&&void 0!==n?n:"#888")}=s;return`${r?`<div class="${It}-title"\n        style="color: ${a}; background-color: ${l}">${r}</div>`:""}${o?`<div class="${It}-content">${o}</div>`:""}`}const ip=["pointer","node"],np=j(s=>ip.includes(s),"expecting a position type keyword such as 'pointer' or 'node'");class rs{constructor(){this.type="pointer",this.xOffset=0,this.yOffset=0}}m([S(np),v("design:type",String)],rs.prototype,"type",void 0),m([S(C()),v("design:type",Number)],rs.prototype,"xOffset",void 0),m([S(C()),v("design:type",Number)],rs.prototype,"yOffset",void 0);class Me{constructor(t,e,i,n){this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.lastVisibilityChange=Date.now(),this.position=new rs,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=n,this.window=i;const o=e.createElement("div");if(this.element=this.tooltipRoot.appendChild(o),this.element.classList.add(It),this.canvasElement=t,typeof IntersectionObserver<"u"){const r=new IntersectionObserver(a=>{for(const l of a)l.target===this.canvasElement&&0===l.intersectionRatio&&this.toggle(!1)},{root:this.tooltipRoot});r.observe(this.canvasElement),this.observer=r}Me.tooltipDocuments.indexOf(e)<0&&(fr(e,ep),Me.tooltipDocuments.push(e))}destroy(){const{parentNode:t}=this.element;t&&t.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)}isVisible(){const{element:t}=this;return!t.classList.contains(It+"-hidden")}updateClass(t,e){const{element:i,class:n,lastClass:o,enableInteraction:r,lastVisibilityChange:a}=this,l=this.isVisible(),c=!!t;let d=1/0;if(l!==c){const g=Date.now();d=g-a,this.lastVisibilityChange=g}const h=(g,y)=>{const b=`${It}-${g}`;y?i.classList.add(b):i.classList.remove(b)};d>5&&h("no-animation",!l&&c&&d>100),h("no-interaction",!r),h("hidden",!t),h("arrow",!!e),n!==o&&(o&&i.classList.remove(o),n&&i.classList.add(n),this.lastClass=n)}show(t,e,i=!1){var n,o,r,a,l,c,d;const{element:h,canvasElement:u}=this;if(void 0!==e)h.innerHTML=e;else if(!h.innerHTML)return void this.toggle(!1);const p=(N,w,P)=>Math.max(Math.min(w,P),N),f=null!==(o=null===(n=t.position)||void 0===n?void 0:n.xOffset)&&void 0!==o?o:0,g=null!==(a=null===(r=t.position)||void 0===r?void 0:r.yOffset)&&void 0!==a?a:0,y=u.getBoundingClientRect(),b=y.left+t.offsetX-h.clientWidth/2+f,_=y.top+t.offsetY-h.clientHeight-8+g,x=this.getWindowBoundingBox(),E=x.y+x.height-h.clientHeight,O=p(x.x,b,x.x+x.width-h.clientWidth-1),A=p(x.y,_,E),T=null!==(c=null!==(l=t.showArrow)&&void 0!==l?l:this.showArrow)&&void 0!==c?c:!(O!==b||A!==_||f||g);if(this.updateShowArrow(T),h.style.transform=`translate(${Math.round(O)}px, ${Math.round(A)}px)`,this.enableInteraction=null!==(d=t.enableInteraction)&&void 0!==d&&d,this.delay>0&&!i)return this.toggle(!1),void(this.showTimeout=this.window.setTimeout(()=>{this.toggle(!0)},this.delay));this.toggle(!0)}getWindowBoundingBox(){return new U(0,0,this.window.innerWidth,this.window.innerHeight)}toggle(t){t||this.window.clearTimeout(this.showTimeout),this.updateClass(t,this._showArrow)}pointerLeftOntoTooltip(t){var e;if(!this.enableInteraction)return!1;const i=null===(e=t.sourceEvent.relatedTarget)||void 0===e?void 0:e.classList,o=!!["","-title","-content"].filter(r=>i?.contains(`${It}${r}`));return void 0!==i&&o}updateShowArrow(t){this._showArrow=t}}Me.tooltipDocuments=[],m([S(nt),v("design:type",Boolean)],Me.prototype,"enabled",void 0),m([S(De),v("design:type",Boolean)],Me.prototype,"showArrow",void 0),m([S(Y),v("design:type",String)],Me.prototype,"class",void 0),m([S(C(0)),v("design:type",Number)],Me.prototype,"delay",void 0),m([S(Ko),v("design:type",Object)],Me.prototype,"range",void 0);class Wl{constructor(){this.enabled=!1}}m([S(nt),v("design:type",Object)],Wl.prototype,"enabled",void 0);class be{constructor(){this.enabled=!0,this.showArrow=void 0,this.format=void 0,this.renderer=void 0,this.interaction=new Wl,this.position=new rs}toTooltipHtml(t,e,i){var n,o;const r=null!==(n=i?.format)&&void 0!==n?n:this.format,a=null!==(o=i?.renderer)&&void 0!==o?o:this.renderer;return r?os({content:jl(r,e)},t):a?os(a(e),t):os(t)}}function gr(s,t,e,i){const n=[e.convert(0),e.convert(1)],o=[i.convert(0),i.convert(1)],r=Math.PI/-2+ce(t);return{nodes:{toFn:(u,p,f,{prevLive:g})=>{var y,b;let{startAngle:_,endAngle:x,innerRadius:k,outerRadius:E}=p;const{stroke:O,fill:A}=p.sectorFormat;if("removed"===f&&g?(_=null===(y=g.datum)||void 0===y?void 0:y.endAngle,x=null===(b=g.datum)||void 0===b?void 0:b.endAngle):"removed"===f&&!g&&(_=r,x=r),"removed"===f){const D=(({radius:u})=>({innerRadius:n[0],outerRadius:n[0]+(n[1]-n[0])*u}))(p);k=D.innerRadius,E=D.outerRadius}return{startAngle:_,endAngle:x,outerRadius:E,innerRadius:k,stroke:O,fill:A}},fromFn:(u,p,f,{prevFromProps:g})=>{var y,b,_,x,k,E;let{startAngle:O,endAngle:A,innerRadius:D,outerRadius:L}=u,{fill:T,stroke:N}=p.sectorFormat;if("unknown"===f||"added"===f&&!g?(O=r,A=r,D=p.innerRadius,L=p.outerRadius):"added"===f&&g&&(O=null!==(y=g.endAngle)&&void 0!==y?y:r,A=null!==(b=g.endAngle)&&void 0!==b?b:r,D=null!==(_=g.innerRadius)&&void 0!==_?_:p.innerRadius,L=null!==(x=g.outerRadius)&&void 0!==x?x:p.outerRadius),"added"===f&&!s){const w=(({radius:u})=>({innerRadius:o[0],outerRadius:o[0]+(o[1]-o[0])*u}))(p);D=w.innerRadius,L=w.outerRadius}return"updated"===f&&(T=null!==(k=u.fill)&&void 0!==k?k:T,N=null!==(E=u.stroke)&&void 0!==E?E:N),{startAngle:O,endAngle:A,innerRadius:D,outerRadius:L,fill:T,stroke:N}}},innerCircle:{fromFn:(u,p)=>{var f,g,y;return{size:null!==(y=null!==(g=null===(f=u.previousDatum)||void 0===f?void 0:f.radius)&&void 0!==g?g:u.size)&&void 0!==y?y:0}},toFn:(u,p)=>{var f;return{size:null!==(f=p.radius)&&void 0!==f?f:0}}}}}function sp(s,t){return{startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,fill:t.sectorFormat.fill,stroke:t.sectorFormat.stroke}}function Mt(s,t){const e=Hs(s),i=e?s:[],n=e?[]:s;for(const o of n){for(const r of o.nodes()){const a=t(r,r.datum);r.setProperties(a)}o.cleanup()}for(const o of i){const r=t(o,o.datum);o.setProperties(r)}}m([S(nt),v("design:type",Object)],be.prototype,"enabled",void 0),m([S(De),v("design:type",Boolean)],be.prototype,"showArrow",void 0),m([S(Y),v("design:type",String)],be.prototype,"format",void 0),m([S(Ke),v("design:type",Function)],be.prototype,"renderer",void 0);var op=Object.freeze({__proto__:null,resetMotion:Mt});class as{constructor(t,e,i){this.states=e,this.preTransitionCb=i,this.debug=Tt.create(!0,"animation"),this.state=t,this.debug(`%c${this.constructor.name} | init -> ${t}`,"color: green")}transition(t,e){var i,n;const o=this.states[this.state],r=o?.[t];if(!r)return void this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.state}`,"color: grey");let a=this.state;return"string"==typeof r?a=r:"object"==typeof r&&(a=r.target),this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${a}`,"color: green"),null===(i=this.preTransitionCb)||void 0===i||i.call(this,this.state,a),this.state=a,"function"==typeof r?r(e):"object"==typeof r&&(null===(n=r.action)||void 0===n||n.call(r,e)),this.state}}class zl extends Le{isContinuous(){var t,e;return{isContinuousX:ot.is(null===(t=this.axes[I.X])||void 0===t?void 0:t.scale),isContinuousY:ot.is(null===(e=this.axes[I.Y])||void 0===e?void 0:e.scale)}}requestDataModel(t,e,i){var n;return R(this,void 0,void 0,function*(){const o=i.props,r=null!==(n=this.dispatch("data-prerequest",this.isContinuous()))&&void 0!==n?n:[];for(const c of r)o.push(...c);const{dataModel:a,processedData:l}=yield t.request(this.id,e??[],Object.assign(Object.assign({},i),{props:o}));return this.dataModel=a,this.processedData=l,this.dispatch("data-processed",{dataModel:a,processedData:l}),{dataModel:a,processedData:l}})}isProcessedDataAnimatable(){var t,e;const i=null===(e=null===(t=this.processedData)||void 0===t?void 0:t.reduced)||void 0===e?void 0:e.animationValidation;if(!i)return!0;const{orderedKeys:n,uniqueKeys:o}=i;return!!n&&!!o}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}}class yr extends zl{constructor(t){var{useLabelLayer:e=!1,pickModes:i=[vt.EXACT_SHAPE_MATCH],canHaveAxes:n=!1,animationResetFns:o}=t,r=le(t,["useLabelLayer","pickModes","canHaveAxes","animationResetFns"]);super(Object.assign(Object.assign({},r),{useLabelLayer:e,pickModes:i,contentGroupVirtual:!1,directionKeys:{[I.X]:["angleKey"],[I.Y]:["radiusKey"]},directionNames:{[I.X]:["angleName"],[I.Y]:["radiusName"]},canHaveAxes:n})),this.sectorGroup=this.contentGroup.appendChild(new z),this.itemSelection=rt.select(this.sectorGroup,()=>this.nodeFactory(),!1),this.labelSelection=rt.select(this.labelGroup,W,!1),this.highlightSelection=rt.select(this.highlightGroup,()=>this.nodeFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.sectorGroup.zIndexSubOrder=[()=>this._declarationOrder,1],this.animationResetFns=o,this.animationState=new as("empty",{empty:{update:{target:"ready",action:a=>this.animateEmptyUpdateReady(a)}},ready:{updateData:"waiting",clear:"clearing",highlight:a=>this.animateReadyHighlight(a),highlightMarkers:a=>this.animateReadyHighlightMarkers(a),resize:a=>this.animateReadyResize(a)},waiting:{update:{target:"ready",action:a=>this.animateWaitingUpdateReady(a)}},clearing:{update:{target:"empty",action:a=>this.animateClearingUpdateEmpty(a)}}},()=>this.checkProcessedDataAnimatable())}getLabelData(){return[]}computeLabelsBBox(t,e){return null}resetAllAnimation(){var t;const{item:e,label:i}=null!==(t=this.animationResetFns)&&void 0!==t?t:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&Mt([this.itemSelection,this.highlightSelection],e),i&&Mt([this.labelSelection],i),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(t){var e;const{item:i}=null!==(e=this.animationResetFns)&&void 0!==e?e:{};i&&Mt([this.highlightSelection],i)}animateReadyHighlightMarkers(t){}animateReadyResize(t){this.resetAllAnimation()}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t){return{seriesRect:t}}}class rp extends eo{constructor(t,e,i,n){super(t,e,i,n),this.angleKey=n.angleKey,this.radiusKey=n.radiusKey,this.calloutLabelKey=n.calloutLabelKey,this.sectorLabelKey=n.sectorLabelKey}}var ls=function(s){return s[s.Sector=0]="Sector",s[s.Callout=1]="Callout",s[s.Label=2]="Label",s}(ls||{});class fn extends Gt{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}}m([S(C(0)),v("design:type",Object)],fn.prototype,"offset",void 0),m([S(C(0)),v("design:type",Object)],fn.prototype,"minAngle",void 0),m([S(C(0)),v("design:type",Object)],fn.prototype,"minSpacing",void 0),m([S(C(0)),v("design:type",Object)],fn.prototype,"maxCollisionOffset",void 0),m([S(nt),v("design:type",Object)],fn.prototype,"avoidCollisions",void 0);class mr extends Gt{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}}m([S(C()),v("design:type",Object)],mr.prototype,"positionOffset",void 0),m([S(C(0,1)),v("design:type",Object)],mr.prototype,"positionRatio",void 0);class ro{constructor(){this.length=10,this.strokeWidth=1}}m([S($n),v("design:type",Array)],ro.prototype,"colors",void 0),m([S(C(0)),v("design:type",Number)],ro.prototype,"length",void 0),m([S(C(0)),v("design:type",Number)],ro.prototype,"strokeWidth",void 0);class Vl extends yt{constructor(){super(...arguments),this.showInLegend=!1}}m([S(nt),v("design:type",Object)],Vl.prototype,"showInLegend",void 0);class vr extends Gt{constructor(){super(...arguments),this.text="",this.margin=2}}m([S($t),v("design:type",Object)],vr.prototype,"text",void 0),m([S(C()),v("design:type",Object)],vr.prototype,"margin",void 0);class br{constructor(){this.fill="transparent",this.fillOpacity=1}}m([S(me),v("design:type",Object)],br.prototype,"fill",void 0),m([S(Z(0,1)),v("design:type",Object)],br.prototype,"fillOpacity",void 0);class at extends yr{constructor(t){super({moduleCtx:t,useLabelLayer:!0,animationResetFns:{item:sp,label:xi}}),this.previousRadiusScale=new Fi,this.radiusScale=new Fi,this.backgroundGroup=this.rootGroup.appendChild(new z({name:`${this.id}-background`,layer:!0,zIndex:ut.SERIES_BACKGROUND_ZINDEX})),this.innertCircleGroup=this.backgroundGroup.appendChild(new z({name:`${this.id}-innerCircle`})),this.nodeData=[],this.seriesItemEnabled=[],this.title=void 0,this.calloutLabel=new fn,this.sectorLabel=new mr,this.calloutLine=new ro,this.tooltip=new be,this.angleKey="",this.angleName="",this.innerLabels=[],this.innerCircle=void 0,this.radiusKey=void 0,this.radiusName=void 0,this.radiusMin=void 0,this.radiusMax=void 0,this.calloutLabelKey=void 0,this.calloutLabelName=void 0,this.sectorLabelKey=void 0,this.sectorLabelName=void 0,this.legendItemKey=void 0,this.fills=Object.values(oi),this.strokes=Object.values(pn),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.innerRadiusOffset=0,this.innerRadiusRatio=1,this.strokeWidth=1,this.shadow=void 0,this.highlightStyle=new ur,this.surroundingRadius=void 0,this.NodeClickEvent=rp,this.angleScale=new Fi,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(o=>o+Math.PI/2);const e=new z({name:"pieCalloutLabels"}),i=new z({name:"pieSectorLabels"}),n=new z({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(i),this.labelGroup.append(n),this.calloutLabelSelection=rt.select(e,z),this.sectorLabelSelection=rt.select(i,W),this.innerLabelsSelection=rt.select(n,W),this.innerCircleSelection=rt.select(this.innertCircleGroup,Js)}addChartEventListeners(){var t;null===(t=this.ctx.chartEventManager)||void 0===t||t.addListener("legend-item-click",e=>this.onLegendItemClick(e))}visibleChanged(){this.processSeriesItemEnabled()}processSeriesItemEnabled(){var t;const{data:e,visible:i}=this;this.seriesItemEnabled=null!==(t=e?.map(()=>i))&&void 0!==t?t:[]}nodeFactory(){return new Ne}getSeriesDomain(t){return t===I.X?this.angleScale.domain:this.radiusScale.domain}processData(t){var e,i;return R(this,void 0,void 0,function*(){let{data:n}=this;const{angleKey:o,radiusKey:r,calloutLabelKey:a,sectorLabelKey:l,legendItemKey:c,seriesItemEnabled:d}=this;if(null==o||null==n)return;const h=!this.ctx.animationManager.isSkipped(),u=[],p=[];c?u.push(ie(this,c,!1,{id:"legendItemKey"})):a?u.push(ie(this,a,!1,{id:"calloutLabelKey"})):l&&u.push(ie(this,l,!1,{id:"sectorLabelKey"})),r&&p.push(function Rl(s,t,e={}){const{min:i=-1/0,max:n=1/0}=e,o=le(e,["min","max"]);return Object.assign({scopes:[s.id],type:"value",property:t,valueType:"range",validation:hr,processor:()=>r=>"number"!=typeof r||isNaN(r)?r:Math.min(Math.max(r,i),n)},o)}(this,r,{id:"radiusValue",min:null!==(e=this.radiusMin)&&void 0!==e?e:0,max:this.radiusMax}),bt(this,r,!0,{id:"radiusRaw"}),ar(this,{id:"radiusValue"},[0,1],1,null!==(i=this.radiusMin)&&void 0!==i?i:0,this.radiusMax)),a&&p.push(bt(this,a,!1,{id:"calloutLabelValue"})),l&&p.push(bt(this,l,!1,{id:"sectorLabelValue"})),c&&p.push(bt(this,c,!1,{id:"legendItemValue"})),h&&this.processedData&&u.length>0&&p.push(hn(this.processedData)),p.push(ns(this)),n=n.map((f,g)=>d[g]?f:Object.assign(Object.assign({},f),{[o]:0})),yield this.requestDataModel(t,n,{props:[...u,Cl(this,o,!0,{id:"angleValue",onlyPositive:!0}),bt(this,o,!0,{id:"angleRaw"}),ar(this,{id:"angleValue"},[0,1],0,0),...p]}),this.animationState.transition("updateData")})}maybeRefreshNodeData(){return R(this,void 0,void 0,function*(){if(!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=yield this.createNodeData();this.nodeData=t,this.nodeDataRefresh=!1})}getProcessedDataIndexes(t){return{angleIdx:t.resolveProcessedDataIndexById(this,"angleValue").index,radiusIdx:this.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue").index:-1,calloutLabelIdx:this.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,sectorLabelIdx:this.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,legendItemIdx:this.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue").index:-1}}createNodeData(){return R(this,void 0,void 0,function*(){const{id:t,processedData:e,dataModel:i,rotation:n,angleScale:o}=this;if(!e||!i||"ungrouped"!==e.type)return[];const{angleIdx:r,radiusIdx:a,calloutLabelIdx:l,sectorLabelIdx:c,legendItemIdx:d}=this.getProcessedDataIndexes(i);let h=0;const u=e.data.map((p,f)=>{var g;const{datum:y,values:b}=p,_=b[r],x=o.convert(h)+ce(n);h=_;const k=o.convert(h)+ce(n),E=Math.abs(k-x),O=x+E/2,A=b[r+1],D=a>=0&&null!==(g=b[a])&&void 0!==g?g:1,L=a>=0?b[a+1]:void 0,T=d>=0?b[d]:void 0,N=this.getLabels(y,O,E,!0,b[l],b[c],T),w=this.getSectorFormat(y,f,!1);return Object.assign({itemId:f,series:this,datum:y,index:f,angleValue:A,midAngle:O,midCos:Math.cos(O),midSin:Math.sin(O),startAngle:x,endAngle:k,sectorFormat:w,radiusValue:L,radius:D,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(D),0),legendItemValue:T},N)});return[{itemId:t,nodeData:u,labelData:u}]})}getLabels(t,e,i,n,o,r,a){const{calloutLabel:l,sectorLabel:c,legendItemKey:d}=this,h=!n||l.enabled?this.calloutLabelKey:void 0,u=!n||c.enabled?this.sectorLabelKey:void 0;if(!h&&!u&&!d)return{};const p={datum:t,angleKey:this.angleKey,angleName:this.angleName,radiusKey:this.radiusKey,radiusName:this.radiusName,calloutLabelKey:this.calloutLabelKey,calloutLabelName:this.calloutLabelName,sectorLabelKey:this.sectorLabelKey,sectorLabelName:this.sectorLabelName,legendItemKey:this.legendItemKey},f={};return h&&i>ce(l.minAngle)&&(f.calloutLabel=Object.assign(Object.assign({},this.getTextAlignment(e)),{text:this.getLabelText(l,Object.assign(Object.assign({},p),{value:o})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),u&&(f.sectorLabel={text:this.getLabelText(c,Object.assign(Object.assign({},p),{value:r}))}),null!=d&&null!=a&&(f.legendItem={key:d,text:a}),f}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Ps(t),n=-3*Math.PI/4;return e[function Yo(s,t){return s>=0?Math.floor(s%t):Math.floor(s%t+t)}(Math.floor((i-n)/(Math.PI/2)),e.length)]}getSectorFormat(t,e,i){var n,o,r,a,l;const{angleKey:c,radiusKey:d,fills:h,strokes:u,formatter:p,id:f,ctx:{callbackCache:g,highlightManager:y}}=this,b=y.getActiveHighlight(),_=i&&b?.series===this&&e===b.itemId,{fill:x,fillOpacity:k,stroke:E,strokeWidth:O,strokeOpacity:A}=te(_&&this.highlightStyle.item,{fill:h[e%h.length],fillOpacity:this.fillOpacity,stroke:u[e%u.length],strokeWidth:this.getStrokeWidth(this.strokeWidth),strokeOpacity:this.getOpacity()});let D;return p&&(D=g.call(p,{datum:t,angleKey:c,radiusKey:d,fill:x,stroke:E,fills:h,strokes:u,strokeWidth:O,highlighted:_,seriesId:f})),{fill:null!==(n=D?.fill)&&void 0!==n?n:x,fillOpacity:null!==(o=D?.fillOpacity)&&void 0!==o?o:k,stroke:null!==(r=D?.stroke)&&void 0!==r?r:E,strokeWidth:null!==(a=D?.strokeWidth)&&void 0!==a?a:O,strokeOpacity:null!==(l=D?.strokeOpacity)&&void 0!==l?l:A}}getInnerRadius(){const{radius:t,innerRadiusRatio:e,innerRadiusOffset:i}=this,n=t*e+i;return n===t||n<0?0:n}getOuterRadius(){return Math.max(this.radius*this.outerRadiusRatio+this.outerRadiusOffset,0)}updateRadiusScale(t){const e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e),this.nodeData=this.nodeData.map(i=>{var{radius:n}=i,o=le(i,["radius"]);return Object.assign(Object.assign({},o),{radius:n,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(n),0)})})}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);return 0===i?NaN:-i-(2+(null!==(e=null===(t=this.title)||void 0===t?void 0:t.spacing)&&void 0!==e?e:0))-Math.max(0,-i)}update({seriesRect:t}){return R(this,void 0,void 0,function*(){const{title:e}=this,i={seriesRectWidth:t?.width,seriesRectHeight:t?.height},n=null!=Ue(this.nodeDataDependencies,i);if(n&&(this.nodeDataDependencies=i),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(n),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),e){const o=this.getTitleTranslationY(),r=e.node.computeBBox();e.node.visible=e.enabled&&isFinite(o)&&!this.bboxIntersectsSurroundingSeries(r,0,o),e.node.translationY=isFinite(o)?o:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(t)})}updateTitleNodes(){var t,e;const{title:i,oldTitle:n}=this;n!==i&&(n&&(null===(t=this.labelGroup)||void 0===t||t.removeChild(n.node)),i&&(i.node.textBaseline="bottom",null===(e=this.labelGroup)||void 0===e||e.appendChild(i.node)),this.oldTitle=i)}updateNodeMidPoint(){this.nodeData.forEach(t=>{const e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}})}updateSelections(){return R(this,void 0,void 0,function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()})}updateGroupSelection(){return R(this,void 0,void 0,function*(){const{itemSelection:t,highlightSelection:e,calloutLabelSelection:i,sectorLabelSelection:n,innerLabelsSelection:o}=this,r=(a,l)=>{let c=this.nodeData;l&&(c=c.map(d=>Object.assign(Object.assign({},d),{sectorFormat:Object.assign({},d.sectorFormat)}))),a.update(c),this.ctx.animationManager.isSkipped()&&a.cleanup()};r(t,!1),r(e,!0),i.update(this.nodeData,a=>{const l=new Bt;l.tag=ls.Callout,l.pointerEvents=qt.None,a.appendChild(l);const c=new W;c.tag=ls.Label,c.pointerEvents=qt.None,a.appendChild(c)}),n.update(this.nodeData,a=>{a.pointerEvents=qt.None}),o.update(this.innerLabels,a=>{a.pointerEvents=qt.None})})}updateInnerCircleSelection(){const{innerCircle:t}=this;let e=0;const i=this.getInnerRadius();if(i>0){const o=Math.min(i,this.getOuterRadius());e=Math.ceil(2*o+1)}this.innerCircleSelection.update(t?[{radius:e}]:[])}updateNodes(t){return R(this,void 0,void 0,function*(){const e=this.ctx.highlightManager.getActiveHighlight(),i=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&e?.series===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((o,{radius:r})=>{var a,l;o.setProperties({fill:null===(a=this.innerCircle)||void 0===a?void 0:a.fill,opacity:null===(l=this.innerCircle)||void 0===l?void 0:l.fillOpacity,size:r})});const n=(o,r,a,l)=>{const c=this.getSectorFormat(r.datum,r.itemId,l);r.sectorFormat.fill=c.fill,r.sectorFormat.stroke=c.stroke;const d=this.ctx.animationManager.isSkipped();d&&(o.startAngle=r.startAngle,o.endAngle=r.endAngle,o.innerRadius=r.innerRadius,o.outerRadius=r.outerRadius),(l||d)&&(o.fill=c.fill,o.stroke=c.stroke),o.strokeWidth=c.strokeWidth,o.fillOpacity=c.fillOpacity,o.strokeOpacity=this.strokeOpacity,o.lineDash=this.lineDash,o.lineDashOffset=this.lineDashOffset,o.fillShadow=this.shadow,o.lineJoin="round"};this.itemSelection.each((o,r,a)=>n(o,r,0,!1)),this.highlightSelection.each((o,r,a)=>{const l=e?.series===this&&o.datum.itemId===e.itemId;n(o,r,0,l),o.visible=l}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.animationState.transition("update")})}updateCalloutLineNodes(){var t;const{calloutLine:e}=this,i=e.length,n=e.strokeWidth,o=null!==(t=e.colors)&&void 0!==t?t:this.strokes,{offset:r}=this.calloutLabel;this.calloutLabelSelection.selectByTag(ls.Callout).forEach((a,l)=>{const c=a.datum,{calloutLabel:d,outerRadius:h}=c;if(d?.text&&!d.hidden&&0!==h){a.visible=!0,a.strokeWidth=n,a.stroke=o[l%o.length],a.fill=void 0;const u=c.midCos*h,p=c.midSin*h;let f=c.midCos*(h+i),g=c.midSin*(h+i);if((d.collisionTextAlign||0!==d.collisionOffsetY)&&null!=d.box){const b=d.box;let _=f,x=g;f<b.x?_=b.x:f>b.x+b.width&&(_=b.x+b.width),g<b.y?x=b.y:g>b.y+b.height&&(x=b.y+b.height);const k=_-f,E=x-g,O=Math.sqrt(Math.pow(k,2)+Math.pow(E,2)),A=O-r;A>0&&(f+=k*A/O,g+=E*A/O)}a.x1=u,a.y1=p,a.x2=f,a.y2=g}else a.visible=!1})}getLabelOverflow(t,e,i){const n=i.x-this.centerX,o=i.x+i.width-this.centerX;let c=1;e.x+1<n?c=(e.x+e.width-n)/e.width:e.x+e.width-1>o&&(c=(o-e.x)/e.width);const d=e.y+1<i.y-this.centerY||e.y+e.height-1>i.y+i.height-this.centerY;return{textLength:1===c?t.length:Math.floor(t.length*c)-1,hasVerticalOverflow:d,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t,e=0,i=0){const{surroundingRadius:n}=this;if(null==n)return!1;const o=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],r=Math.pow(n,2);return o.some(a=>Math.pow(a.x,2)+Math.pow(a.y,2)>r)}computeCalloutLabelCollisionOffsets(){const{radiusScale:t,calloutLabel:e,calloutLine:i}=this,{offset:n,minSpacing:o}=e,r=t.convert(0),l=this.nodeData,c=this.nodeData.filter(x=>!(x=>!x.calloutLabel||0===x.outerRadius)(x));if(c.forEach(x=>{const k=x.calloutLabel;null!=k&&(k.hidden=!1,k.collisionTextAlign=void 0,k.collisionOffsetY=0)}),c.length<=1)return;const d=c.filter(x=>x.midCos<0).sort((x,k)=>x.midSin-k.midSin),h=c.filter(x=>x.midCos>=0).sort((x,k)=>x.midSin-k.midSin),u=c.filter(x=>{var k;return x.midSin<0&&"center"===(null===(k=x.calloutLabel)||void 0===k?void 0:k.textAlign)}).sort((x,k)=>x.midCos-k.midCos),p=c.filter(x=>{var k;return x.midSin>=0&&"center"===(null===(k=x.calloutLabel)||void 0===k?void 0:k.textAlign)}).sort((x,k)=>x.midCos-k.midCos),f=new W,g=x=>{var k;const E=x.calloutLabel;if(null==E)return new U(0,0,0,0);const O=x.outerRadius+i.length+n,A=x.midCos*O,D=x.midSin*O+E.collisionOffsetY;return f.text=E.text,f.x=A,f.y=D,f.setFont(this.calloutLabel),f.setAlign({textAlign:null!==(k=E.collisionTextAlign)&&void 0!==k?k:E.textAlign,textBaseline:E.textBaseline}),f.computeBBox()},y=(x,k,E)=>{const O=g(x).grow(o/2),A=g(k).grow(o/2);O.x<A.x+A.width&&O.x+O.width>A.x&&("to-top"===E?O.y<A.y+A.height:O.y+O.height>A.y)&&(k.calloutLabel.collisionOffsetY="to-top"===E?O.y-A.y-A.height:O.y+O.height-A.y)},b=x=>{const k=x.slice().sort((O,A)=>Math.abs(O.midSin)-Math.abs(A.midSin))[0],E=x.indexOf(k);for(let O=E-1;O>=0;O--)y(x[O+1],x[O],"to-top");for(let O=E+1;O<x.length;O++)y(x[O-1],x[O],"to-bottom")},_=x=>{const k=c.some(T=>0!==T.calloutLabel.collisionOffsetY),E=x.map(T=>g(T)),O=E.map(T=>T.clone().grow(o/2));let A=!1;for(let T=0;T<O.length&&!A;T++){const N=O[T];for(let w=T+1;w<x.length;w++)if(N.collidesBBox(O[w])){A=!0;break}}const D=l.map(T=>{const{startAngle:N,endAngle:w,outerRadius:P}=T;return{startAngle:N,endAngle:w,innerRadius:r,outerRadius:P}}),L=E.some(T=>D.some(N=>function wu(s,t){const n={x:s.x,y:s.y+s.height},o={x:s.x+s.width,y:s.y+s.height};return bl({start:{x:s.x,y:s.y},end:{x:s.x+s.width,y:s.y}},t)||bl({start:n,end:o},t)}(T,N)));!A&&!k&&!L||x.filter(T=>"center"===T.calloutLabel.textAlign).forEach(T=>{T.calloutLabel.collisionTextAlign=T.midCos<0?"right":T.midCos>0?"left":"center"})};b(d),b(h),_(u),_(p)}updateCalloutLabelNodes(t){const{radiusScale:e,calloutLabel:i,calloutLine:n}=this,o=n.length,{offset:r,color:a}=i,l=new W;this.calloutLabelSelection.selectByTag(ls.Label).forEach(c=>{var d;const{datum:h}=c,u=h.calloutLabel,p=e.convert(h.radius),f=Math.max(0,p);if(!u?.text||0===f||u.hidden)return void(c.visible=!1);const g=f+o+r,y=h.midCos*g,b=h.midSin*g+u.collisionOffsetY,_={textAlign:null!==(d=u.collisionTextAlign)&&void 0!==d?d:u.textAlign,textBaseline:u.textBaseline};l.text=u.text,l.x=y,l.y=b,l.setFont(this.calloutLabel),l.setAlign(_);const x=l.computeBBox();let k=u.text,E=!0;if(i.avoidCollisions){const{textLength:O,hasVerticalOverflow:A}=this.getLabelOverflow(u.text,x,t);k=u.text.length===O?u.text:`${u.text.substring(0,O)}\u2026`,E=!A}c.text=k,c.x=y,c.y=b,c.setFont(this.calloutLabel),c.setAlign(_),c.fill=a,c.visible=E})}computeLabelsBBox(t,e){var i;return R(this,void 0,void 0,function*(){const{calloutLabel:n,calloutLine:o}=this,r=o.length,{offset:a,maxCollisionOffset:l,minSpacing:c}=n;if(!n.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const d=[],h=new W;let u;if(null!==(i=this.title)&&void 0!==i&&i.text&&this.title.enabled){const p=this.getTitleTranslationY();isFinite(p)&&(h.text=this.title.text,h.x=0,h.y=p,h.setFont(this.title),h.setAlign({textBaseline:"bottom",textAlign:"center"}),u=h.computeBBox(),d.push(u))}return this.nodeData.forEach(p=>{var f;const g=p.calloutLabel;if(!g||0===p.outerRadius)return null;const y=p.outerRadius+r+a,b=p.midCos*y,_=p.midSin*y+g.collisionOffsetY;h.text=g.text,h.x=b,h.y=_,h.setFont(this.calloutLabel),h.setAlign({textAlign:null!==(f=g.collisionTextAlign)&&void 0!==f?f:g.textAlign,textBaseline:g.textBaseline});const x=h.computeBBox();if(g.box=x,Math.abs(g.collisionOffsetY)>l)g.hidden=!0;else{if(u){const k=e.y-this.centerY,E=new U(u.x-c,k,u.width+2*c,u.y+u.height+c-k);if(x.collidesBBox(E))return void(g.hidden=!0)}if(t.hideWhenNecessary){const{textLength:k,hasVerticalOverflow:E,hasSurroundingSeriesOverflow:O}=this.getLabelOverflow(g.text,x,e);if(E||g.text.length>2&&k<2||O)return void(g.hidden=!0)}g.hidden=!1,d.push(x)}}),0===d.length?null:U.merge(d)})}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:n,fontWeight:o,fontFamily:r,positionOffset:a,positionRatio:l,color:c}=this.sectorLabel,d=e>0,h=1===this.seriesItemEnabled.filter(Boolean).length;this.sectorLabelSelection.each((u,p)=>{const{sectorLabel:f,outerRadius:g}=p;let y=!1;if(f&&0!==g){const b=e*(1-l)+g*l+a;u.fill=c,u.fontStyle=n,u.fontWeight=o,u.fontSize=i,u.fontFamily=r,u.text=f.text,!d&&h?(u.x=0,u.y=0):(u.x=p.midCos*b,u.y=p.midSin*b),u.textAlign="center",u.textBaseline="middle";const x=u.computeBBox(),k=[[x.x,x.y],[x.x+x.width,x.y],[x.x+x.width,x.y+x.height],[x.x,x.y+x.height]],{startAngle:E,endAngle:O}=p,A={startAngle:E,endAngle:O,innerRadius:e,outerRadius:g};k.every(([D,L])=>vl(D,L,A))&&(y=!0)}u.visible=y})}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each((h,u)=>{const{fontStyle:p,fontWeight:f,fontSize:g,fontFamily:y,color:b}=u;h.fontStyle=p,h.fontWeight=f,h.fontSize=g,h.fontFamily=y,h.text=u.text,h.x=0,h.y=0,h.fill=b,h.textAlign="center",h.textBaseline="alphabetic",t.push(h.computeBBox()),e.push(u.margin)});const i=h=>0===h?0:e[h],n=h=>h===e.length-1?0:e[h],o=t.reduce((h,u,p)=>h+u.height+i(p)+n(p),0),r=Math.max(...t.map(h=>h.width)),a=this.getInnerRadius(),c=Math.sqrt(Math.pow(r/2,2)+Math.pow(o/2,2))<=(a>0?a:this.getOuterRadius()),d=[];for(let h=0,u=-o/2;h<t.length;h++){const f=t[h].height+u+i(h);d.push(f),u=f+n(h)}this.innerLabelsSelection.each((h,u,p)=>{h.y=d[p],h.visible=c})}getDatumLegendName(t){const{angleKey:e,calloutLabelKey:i,sectorLabelKey:n,legendItemKey:o}=this,{sectorLabel:r,calloutLabel:a,legendItem:l}=t;return o&&void 0!==l?l.text:i&&i!==e&&void 0!==a?.text?a.text:n&&n!==e&&void 0!==r?.text?r.text:void 0}getTooltipHtml(t){var e;if(!this.angleKey)return"";const{datum:i,angleValue:n,sectorFormat:{fill:o}}=t,r=mt(null===(e=this.title)||void 0===e?void 0:e.text),a=ee(n)?function jo(s,t=2){const e=Math.floor(Math.log(Math.abs(s))/Math.LN10);return e>=0||!isFinite(e)?s.toFixed(t):s.toFixed(Math.abs(e)-1+t)}(n):String(n),l=this.getDatumLegendName(t);return this.tooltip.toTooltipHtml({title:r??l,content:r&&l?`${l}: ${a}`:a,backgroundColor:o},{datum:i,title:r,color:o,seriesId:this.id,angleKey:this.angleKey,angleName:this.angleName,radiusKey:this.radiusKey,radiusName:this.radiusName,calloutLabelKey:this.calloutLabelKey,calloutLabelName:this.calloutLabelName,sectorLabelKey:this.sectorLabelKey,sectorLabelName:this.sectorLabelName})}getLegendData(t){var e,i,n,o,r;const{processedData:a,angleKey:l,calloutLabelKey:c,sectorLabelKey:d,legendItemKey:h,id:u,dataModel:p}=this;if(!p||!a||0===a.data.length||"category"!==t)return[];if(!(h||c&&c!==l||d&&d!==l))return[];const{calloutLabelIdx:f,sectorLabelIdx:g,legendItemIdx:y}=this.getProcessedDataIndexes(p),b=(null===(e=this.title)||void 0===e?void 0:e.showInLegend)&&this.title.text,_=[];for(let x=0;x<a.data.length;x++){const{datum:k,values:E}=a.data[x],O=[];b&&O.push(b);const A=this.getLabels(k,2*Math.PI,2*Math.PI,!1,E[f],E[g],E[y]);if(h&&void 0!==A.legendItem?O.push(A.legendItem.text):c&&c!==l&&void 0!==(null===(i=A.calloutLabel)||void 0===i?void 0:i.text)?O.push(null===(n=A.calloutLabel)||void 0===n?void 0:n.text):d&&d!==l&&void 0!==(null===(o=A.sectorLabel)||void 0===o?void 0:o.text)&&O.push(null===(r=A.sectorLabel)||void 0===r?void 0:r.text),0===O.length)continue;const D=this.getSectorFormat(k,x,!1);_.push({legendType:"category",id:u,itemId:x,seriesId:u,enabled:this.seriesItemEnabled[x],label:{text:O.join(" - ")},marker:{fill:D.fill,stroke:D.stroke,fillOpacity:this.fillOpacity,strokeOpacity:this.strokeOpacity,strokeWidth:this.strokeWidth}})}return _}onLegendItemClick(t){const{enabled:e,itemId:i,series:n}=t;n.id===this.id?this.toggleSeriesItem(i,e):"pie"===n.type&&this.toggleOtherSeriesItems(n,i,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e,i){var n,o;const{legendItemKey:r,dataModel:a}=this;if(!r||!a)return;const l=t.legendItemKey&&(null===(n=t.data)||void 0===n?void 0:n.find((d,h)=>h===e)[t.legendItemKey]);if(!l)return;const c=a.resolveProcessedDataIndexById(this,"legendItemValue").index;null===(o=this.processedData)||void 0===o||o.data.forEach(({values:d},h)=>{d[c]===l&&this.toggleSeriesItem(h,i)})}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=gr(!0,this.rotation,this.radiusScale,this.previousRadiusScale);Et(this.id,"nodes",e,[this.itemSelection,this.highlightSelection],i.nodes),Et(this.id,"innerCircle",e,[this.innerCircleSelection],i.innerCircle),kt(this,"callout",e,[this.calloutLabelSelection]),kt(this,"sector",e,[this.sectorLabelSelection]),kt(this,"inner",e,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var t,e,i,n,o,r;const{itemSelection:a,highlightSelection:l,processedData:c,radiusScale:d,previousRadiusScale:h}=this,{animationManager:u}=this.ctx,p=null===(t=c?.reduced)||void 0===t?void 0:t.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const f=0===(null!==(e=p?.moved.length)&&void 0!==e?e:0)&&p?.addedIndices.every(_=>!p.removedIndices.includes(_)),g=(null!==(i=c?.defs.keys.length)&&void 0!==i?i:0)>0,y=null===(r=null===(o=null===(n=c?.reduced)||void 0===n?void 0:n.animationValidation)||void 0===o?void 0:o.uniqueKeys)||void 0===r||r;(!f||!g||!y)&&this.ctx.animationManager.skipCurrentBatch();const b=gr(!1,this.rotation,d,h);Et(this.id,"nodes",u,[a,l],b.nodes,(_,x)=>this.getDatumId(x),p),Et(this.id,"innerCircle",u,[this.innerCircleSelection],b.innerCircle),kt(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),kt(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),kt(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,radiusScale:i,previousRadiusScale:n}=this,{animationManager:o}=this.ctx,r=gr(!1,this.rotation,i,n);Et(this.id,"nodes",o,[t,e],r.nodes),Et(this.id,"innerCircle",o,[this.innerCircleSelection],r.innerCircle),no(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),no(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),no(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){var e,i,n;const{calloutLabelKey:o,sectorLabelKey:r,legendItemKey:a}=this;if(null!==(n=null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.animationValidation)&&void 0!==n&&n.uniqueKeys){if(a)return t[a];if(o)return t[o];if(r)return t[r]}}getDatumId(t){var e;const{index:i}=t;return null!==(e=this.getDatumIdFromData(t.datum))&&void 0!==e?e:`${i}`}onDataChange(){this.processSeriesItemEnabled()}}at.className="PieSeries",at.type="pie",m([S($t),v("design:type",Object)],at.prototype,"angleKey",void 0),m([S($t),v("design:type",Object)],at.prototype,"angleName",void 0),m([S(Y),v("design:type",String)],at.prototype,"radiusKey",void 0),m([S(Y),v("design:type",String)],at.prototype,"radiusName",void 0),m([S(Z(0)),v("design:type",Number)],at.prototype,"radiusMin",void 0),m([S(Z(0)),v("design:type",Number)],at.prototype,"radiusMax",void 0),m([S(Y),v("design:type",String)],at.prototype,"calloutLabelKey",void 0),m([S(Y),v("design:type",String)],at.prototype,"calloutLabelName",void 0),m([S(Y),v("design:type",String)],at.prototype,"sectorLabelKey",void 0),m([S(Y),v("design:type",String)],at.prototype,"sectorLabelName",void 0),m([S(Y),v("design:type",String)],at.prototype,"legendItemKey",void 0),m([S(rn),v("design:type",Array)],at.prototype,"fills",void 0),m([S(rn),v("design:type",Array)],at.prototype,"strokes",void 0),m([S(C(0,1)),v("design:type",Object)],at.prototype,"fillOpacity",void 0),m([S(C(0,1)),v("design:type",Object)],at.prototype,"strokeOpacity",void 0),m([S(mi),v("design:type",Array)],at.prototype,"lineDash",void 0),m([S(C(0)),v("design:type",Number)],at.prototype,"lineDashOffset",void 0),m([S(Ke),v("design:type",Function)],at.prototype,"formatter",void 0),m([S(C(-360,360)),v("design:type",Object)],at.prototype,"rotation",void 0),m([S(C()),v("design:type",Object)],at.prototype,"outerRadiusOffset",void 0),m([S(C(0)),v("design:type",Object)],at.prototype,"outerRadiusRatio",void 0),m([S(C()),v("design:type",Object)],at.prototype,"innerRadiusOffset",void 0),m([S(C(0)),v("design:type",Object)],at.prototype,"innerRadiusRatio",void 0),m([S(C(0)),v("design:type",Object)],at.prototype,"strokeWidth",void 0);const cs={constructors:{},constructedArrays:new WeakMap};const Hl={constructors:{title:yt,subtitle:yt,footnote:yt,shadow:Pi,innerCircle:br,"axes[].title":Te,"series[].innerLabels[]":vr},allowedTypes:{"legend.pagination.marker.shape":["primitive","function"],"series[].marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}};function Xl(){return{constructors:Object.assign(Object.assign({},Hl.constructors),cs.constructors),constructedArrays:cs.constructedArrays,allowedTypes:Object.assign({},Hl.allowedTypes)}}class qe extends J{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new U(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:n,stats:o}=t;if(this.dirty===M.NONE&&!n)return void(o&&(o.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:r,y1:a,x2:l,y2:c}=this;r=this.align(r),a=this.align(a),l=this.align(l),c=this.align(c);const{fill:d,opacity:h,isRange:u}=this;if(u&&d){const{fillOpacity:x}=this;i.fillStyle=d,i.globalAlpha=h*x,i.beginPath(),i.moveTo(r,a),i.lineTo(l,a),i.lineTo(l,c),i.lineTo(r,c),i.closePath(),i.fill()}const{stroke:f,strokeWidth:g,startLine:y,endLine:b}=this;if((y||b)&&f&&g){const{strokeOpacity:x,lineDash:k,lineDashOffset:E,lineCap:O,lineJoin:A}=this;i.strokeStyle=f,i.globalAlpha=h*x,i.lineWidth=g,k&&i.setLineDash(k),E&&(i.lineDashOffset=E),O&&(i.lineCap=O),A&&(i.lineJoin=A),i.beginPath(),y&&(i.moveTo(r,a),i.lineTo(l,a)),b&&(i.moveTo(l,c),i.lineTo(r,c)),i.stroke()}null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}qe.className="Range",qe.defaultStyles=Object.assign(Object.assign({},J.defaultStyles),{strokeWidth:1}),m([F({redraw:M.MINOR}),v("design:type",Number)],qe.prototype,"x1",void 0),m([F({redraw:M.MINOR}),v("design:type",Number)],qe.prototype,"y1",void 0),m([F({redraw:M.MINOR}),v("design:type",Number)],qe.prototype,"x2",void 0),m([F({redraw:M.MINOR}),v("design:type",Number)],qe.prototype,"y2",void 0),m([F({redraw:M.MINOR}),v("design:type",Boolean)],qe.prototype,"startLine",void 0),m([F({redraw:M.MINOR}),v("design:type",Boolean)],qe.prototype,"endLine",void 0),m([F({redraw:M.MINOR}),v("design:type",Boolean)],qe.prototype,"isRange",void 0);const ap={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},lp={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function Kl({yDirection:s,padding:t=0,position:e="top",bbox:i}){const n=s?ap:lp,{xTranslationDirection:o,yTranslationDirection:r}=n[e];return{xTranslation:o*(t+(s?i.width:i.height)/2),yTranslation:r*(t+(s?i.height:i.width)/2)}}const xr=({yDirection:s,xEnd:t,yStart:e,yEnd:i})=>s?{x:t/2,y:e}:{x:t,y:isNaN(i)?e:(e+i)/2},$l=({yDirection:s,xStart:t,xEnd:e,yStart:i,yEnd:n})=>s?{x:t,y:isNaN(n)?i:(i+n)/2}:{x:e/2,y:i},ql=({yDirection:s,xEnd:t,yStart:e,yEnd:i})=>s?{x:t,y:isNaN(i)?e:(e+i)/2}:{x:t/2,y:isNaN(i)?e:i},Zl=({yDirection:s,xStart:t,xEnd:e,yStart:i,yEnd:n})=>s?{x:e/2,y:isNaN(n)?i:n}:{x:t,y:isNaN(n)?i:(i+n)/2},Jl=({yDirection:s,xStart:t,xEnd:e,yStart:i})=>s?{x:t/2,y:i}:{x:e,y:i},Ql=({yDirection:s,xStart:t,yStart:e,yEnd:i})=>s?{x:t,y:isNaN(i)?e:i}:{x:t,y:e},tc=({yDirection:s,xEnd:t,yStart:e,yEnd:i})=>s?{x:t,y:e}:{x:t,y:isNaN(i)?e:i},ec=({yDirection:s,xStart:t,xEnd:e,yStart:i,yEnd:n})=>s?{x:e,y:isNaN(n)?i:n}:{x:t,y:isNaN(n)?i:n},hp={top:{c:xr},bottom:{c:Zl},left:{c:$l},right:{c:ql},topLeft:{c:Jl},topRight:{c:tc},bottomLeft:{c:Ql},bottomRight:{c:ec},inside:{c:({xEnd:s,yStart:t,yEnd:e})=>({x:s/2,y:isNaN(e)?t:(t+e)/2})},insideLeft:{c:$l},insideRight:{c:ql},insideTop:{c:xr},insideBottom:{c:Zl},insideTopLeft:{c:Jl},insideBottomLeft:{c:Ql},insideTopRight:{c:tc},insideBottomRight:{c:ec}},up=["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],pp=j((s,t)=>gt(s,t,e=>up.includes(e)),"expecting an optional crossLine label position keyword such as 'topLeft', 'topRight' or 'inside'"),fp=j((s,t)=>gt(s,t,e=>"range"===e||"line"===e),"expecting a crossLine type keyword such as 'range' or 'line'");class xe{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}}m([S(De),v("design:type",Boolean)],xe.prototype,"enabled",void 0),m([S(Y),v("design:type",String)],xe.prototype,"text",void 0),m([S(gi),v("design:type",String)],xe.prototype,"fontStyle",void 0),m([S(yi),v("design:type",String)],xe.prototype,"fontWeight",void 0),m([S(C(0)),v("design:type",Number)],xe.prototype,"fontSize",void 0),m([S($t),v("design:type",String)],xe.prototype,"fontFamily",void 0),m([S(C()),v("design:type",Number)],xe.prototype,"padding",void 0),m([S(St),v("design:type",String)],xe.prototype,"color",void 0),m([S(pp),v("design:type",String)],xe.prototype,"position",void 0),m([S(Z(-360,360)),v("design:type",Number)],xe.prototype,"rotation",void 0),m([S(De),v("design:type",Boolean)],xe.prototype,"parallel",void 0);class Rt{constructor(){this.id=ii(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new xe,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=I.X,this.group=new z({name:`${this.id}`,layer:!0,zIndex:Rt.LINE_LAYER_ZINDEX}),this.crossLineRange=new qe,this.crossLineLabel=new W,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;const{group:t,crossLineRange:e,crossLineLabel:i}=this;t.append([e,i]),e.pointerEvents=qt.None}update(t){this.enabled&&t&&0!==this.data.length?(this.group.visible=!0,this.group.zIndex=this.getZIndex(this.isRange),this.updateNodes()):this.group.visible=!1}calculateLayout(t){if(!t||!this.createNodeData())return;const{sideFlag:i,gridLength:n,data:o}=this,r=[],l=i*n,c=o[0],d=o[1],h=new U(Math.min(0,l),Math.min(c,d),Math.abs(0-l),Math.abs(c-d));r.push(h);const u=this.computeLabelBBox();return u&&r.push(u),U.merge(r)}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(){var t,e;const{scale:i,gridLength:n,sideFlag:o,direction:r,label:{position:a="top"},clippedRange:l,strokeWidth:c=0}=this;if(this.data=[],!i)return!1;const d=null!==(t=i.bandwidth)&&void 0!==t?t:0,h=x=>Math.max(Math.min(...l),Math.min(Math.max(...l),x)),[u,p]=[0,o*n];let[f,g]=this.getRange(),[y,b]=[Number(i.convert(f,{clampMode:"clamped"})),i.convert(g,{clampMode:"clamped"})+d];y=h(y),b=h(b),[f,g]=[Number(i.convert(f)),i.convert(g)+d];const _=!isNaN(y)&&!isNaN(b)&&(f===y||g===b||y!==b)&&Math.abs(b-y)>0;if(_&&y!==Math.min(y,b)&&([y,b]=[Math.min(y,b),Math.max(y,b)],[f,g]=[g,f]),this.isRange=_,this.startLine=!isNaN(f)&&c>0&&f===y,this.endLine=!isNaN(g)&&c>0&&g===b,!_&&!this.startLine&&!this.endLine)return!1;if(this.data=[y,b],this.label.enabled){const x=r===I.Y,{c:k=xr}=null!==(e=hp[a])&&void 0!==e?e:{},{x:E,y:O}=k({yDirection:x,xStart:u,xEnd:p,yStart:y,yEnd:b});this.labelPoint={x:E,y:O}}return!0}updateRangeNode(){var t;const{crossLineRange:e,sideFlag:i,gridLength:n,data:o,startLine:r,endLine:a,isRange:l,fill:c,fillOpacity:d,stroke:h,strokeWidth:u,lineDash:p}=this;e.x1=0,e.x2=i*n,e.y1=o[0],e.y2=o[1],e.startLine=r,e.endLine=a,e.isRange=l,e.fill=c,e.fillOpacity=d??1,e.stroke=h,e.strokeWidth=u??1,e.strokeOpacity=null!==(t=this.strokeOpacity)&&void 0!==t?t:1,e.lineDash=p}updateLabel(){const{crossLineLabel:t,label:e}=this;e.text&&(t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.fill=e.color,t.text=e.text)}positionLabel(){const{crossLineLabel:t,labelPoint:{x:e,y:i}={},label:{parallel:n,rotation:o,position:r="top",padding:a=0},direction:l,parallelFlipRotation:c,regularFlipRotation:d}=this;if(void 0===e||void 0===i)return;const{defaultRotation:h,configuredRotation:u}=Zs({rotation:o,parallel:n,regularFlipRotation:d,parallelFlipRotation:c});t.rotation=h+u,t.textBaseline="middle",t.textAlign="center";const p=t.computeTransformedBBox();if(!p)return;const f=l===I.Y,{xTranslation:g,yTranslation:y}=Kl({yDirection:f,padding:a,position:r,bbox:p});t.translationX=e+g,t.translationY=i+y}getZIndex(t=!1){return t?Rt.RANGE_LAYER_ZINDEX:Rt.LINE_LAYER_ZINDEX}getRange(){const{value:t,range:e,scale:i}=this,n=ot.is(i);let[o,r]=e??[t,void 0];return!n&&void 0===r&&(r=o),o=null!=es(o,n)?o:void 0,r=null!=es(r,n)?r:void 0,n&&o===r&&(r=void 0),void 0===o&&void 0!==r&&(o=r,r=void 0),[o,r]}computeLabelBBox(){const{label:t}=this;if(!t.enabled)return;const e=new W;e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=t.text;const{labelPoint:{x:i,y:n}={},label:{parallel:o,rotation:r,position:a="top",padding:l=0},direction:c,parallelFlipRotation:d,regularFlipRotation:h}=this;if(void 0===i||void 0===n)return;const{configuredRotation:u}=Zs({rotation:r,parallel:o,regularFlipRotation:h,parallelFlipRotation:d});e.rotation=u,e.textBaseline="middle",e.textAlign="center";const p=e.computeTransformedBBox();if(!p)return;const f=c===I.Y,{xTranslation:g,yTranslation:y}=Kl({yDirection:f,padding:l,position:a,bbox:p});return e.translationX=i+g,e.translationY=n+y,e.computeTransformedBBox()}calculatePadding(t){var e,i,n,o,r,a,l,c;const{isRange:d,startLine:h,endLine:u,direction:p,label:{padding:f=0,position:g="top"}}=this;if(!d&&!h&&!u)return;const y=this.computeLabelBBox(),b=y?.x,_=y?.y;if(!y||null==b||null==_)return;const x=function cp({yDirection:s,bbox:t,padding:e=0,position:i="top"}){const n={};return i.startsWith("inside")||("top"!==i||s?"bottom"!==i||s?"left"===i&&s?n.left=e+t.width:"right"===i&&s&&(n.right=e+t.width):n.bottom=e+t.height:n.top=e+t.height),n}({yDirection:p===I.Y,padding:f,position:g,bbox:y});t.left=Math.max(null!==(e=t.left)&&void 0!==e?e:0,null!==(i=x.left)&&void 0!==i?i:0),t.right=Math.max(null!==(n=t.right)&&void 0!==n?n:0,null!==(o=x.right)&&void 0!==o?o:0),t.top=Math.max(null!==(r=t.top)&&void 0!==r?r:0,null!==(a=x.top)&&void 0!==a?a:0),t.bottom=Math.max(null!==(l=t.bottom)&&void 0!==l?l:0,null!==(c=x.bottom)&&void 0!==c?c:0)}}Rt.LINE_LAYER_ZINDEX=ut.SERIES_CROSSLINE_LINE_ZINDEX,Rt.RANGE_LAYER_ZINDEX=ut.SERIES_CROSSLINE_RANGE_ZINDEX,Rt.className="CrossLine",m([S(De),v("design:type",Boolean)],Rt.prototype,"enabled",void 0),m([S(fp),v("design:type",String)],Rt.prototype,"type",void 0),m([S(Bs(2)),v("design:type",Array)],Rt.prototype,"range",void 0),m([S(St),v("design:type",String)],Rt.prototype,"fill",void 0),m([S(Z(0,1)),v("design:type",Number)],Rt.prototype,"fillOpacity",void 0),m([S(St),v("design:type",String)],Rt.prototype,"stroke",void 0),m([S(Z()),v("design:type",Number)],Rt.prototype,"strokeWidth",void 0),m([S(Z(0,1)),v("design:type",Number)],Rt.prototype,"strokeOpacity",void 0),m([S(mi),v("design:type",Array)],Rt.prototype,"lineDash",void 0);const ic=s=>s;class gn extends ot{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.cacheProps=["domain","range","nice","tickCount","base"],this.baseLog=ic,this.basePow=ic,this.log=t=>this.domain[0]>=0?this.baseLog(t):-this.baseLog(-t),this.pow=t=>this.domain[0]>=0?this.basePow(t):-this.basePow(-t),this.defaultClampMode="clamped"}toDomain(t){return t}transform(t){return this.domain[0]>=0?Math.log(t):-Math.log(-t)}transformInvert(t){return this.domain[0]>=0?Math.exp(t):-Math.exp(-t)}update(){!this.domain||this.domain.length<2||(this.updateLogFn(),this.updatePowFn(),this.nice&&this.updateNiceDomain())}updateLogFn(){const{base:t}=this;let e;if(10===t)e=Math.log10;else if(t===Math.E)e=Math.log;else if(2===t)e=Math.log2;else{const i=Math.log(t);e=n=>Math.log(n)/i}this.baseLog=e}updatePowFn(){const{base:t}=this;let e;e=10===t?gn.pow10:t===Math.E?Math.exp:i=>Math.pow(t,i),this.basePow=e}updateNiceDomain(){const[t,e]=this.domain,i=this.pow(Math.floor(this.log(t))),n=this.pow(Math.ceil(this.log(e)));this.niceDomain=[i,n]}static pow10(t){return t>=0?Math.pow(10,t):1/Math.pow(10,-t)}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:10;if(!this.domain||this.domain.length<2||e<1)return[];this.refresh();const i=this.base,[n,o]=this.getDomain();let r=this.log(n),a=this.log(o);if(this.interval){const y=Math.abs(this.interval),b=Math.abs(a-r),_=Qn(r,a,Math.min(b,y)).map(x=>this.pow(x)).filter(x=>x>=n&&x<=o);if(!this.isDenseInterval({start:n,stop:o,interval:y,count:_.length}))return _}if(i%1!=0||a-r>=e)return Ks(r,a,Math.min(a-r,e)).map(y=>this.pow(y));const d=[],h=n>0;r=Math.floor(r)-1,a=Math.round(a)+1;const u=Math.min(...this.range),f=(Math.max(...this.range)-u)/e;let g=1/0;for(let y=r;y<=a;y++){const b=this.convert(this.pow(y+1));for(let _=1;_<i;_++){const x=h?_:i-_+1,k=this.pow(y)*x,E=this.convert(k),O=Math.abs(g-E),A=Math.abs(E-b);k>=n&&k<=o&&(1===_||O>=f&&A>=f)&&(d.push(k),g=E)}}return d}tickFormat({count:t,ticks:e,specifier:i}){const{base:n}=this;return null==i&&(i=10===n?".0e":","),"string"==typeof i&&(i=ll(i)),t===1/0?i:(null==e&&this.ticks(),o=>i(o))}}m([S(C(0)),v("design:type",Object)],gn.prototype,"base",void 0);var it=function(s){return s[s.MILLISECOND=0]="MILLISECOND",s[s.SECOND=1]="SECOND",s[s.MINUTE=2]="MINUTE",s[s.HOUR=3]="HOUR",s[s.WEEK_DAY=4]="WEEK_DAY",s[s.SHORT_MONTH=5]="SHORT_MONTH",s[s.MONTH=6]="MONTH",s[s.SHORT_YEAR=7]="SHORT_YEAR",s[s.YEAR=8]="YEAR",s}(it||{});const Gi={[it.MILLISECOND]:".%L",[it.SECOND]:":%S",[it.MINUTE]:"%I:%M",[it.HOUR]:"%I %p",[it.WEEK_DAY]:"%a",[it.SHORT_MONTH]:"%b %d",[it.MONTH]:"%B",[it.SHORT_YEAR]:"%y",[it.YEAR]:"%Y"};function Re(s){return s instanceof Date?s.getTime():s}class Sr extends ot{constructor(){super([new Date(2022,11,7),new Date(2022,11,8)],[0,1]),this.type="time",this.cacheProps=["domain","range","nice","tickCount","interval","minTickCount","maxTickCount"],this.year=ka,this.month=_a,this.week=Sa,this.day=xa,this.hour=ba,this.minute=ma,this.second=ga,this.millisecond=pa,this.tickIntervals=[[this.second,1,1e3],[this.second,5,5e3],[this.second,15,15e3],[this.second,30,3e4],[this.minute,1,ae],[this.minute,5,5*ae],[this.minute,15,15*ae],[this.minute,30,30*ae],[this.hour,1,We],[this.hour,3,3*We],[this.hour,6,6*We],[this.hour,12,12*We],[this.day,1,fi],[this.day,2,2*fi],[this.week,1,jn],[this.week,2,2*jn],[this.week,3,3*jn],[this.month,1,Yn],[this.month,2,2*Yn],[this.month,3,3*Yn],[this.month,4,4*Yn],[this.month,6,6*Yn],[this.year,1,ws]]}toDomain(t){return new Date(t)}calculateDefaultTickFormat(t=[]){let e=it.YEAR;const i=c=>{c<e&&(e=c)};for(const c of t)i(this.getLowestGranularityFormat(c));const n=Re(t[0]),o=Re(t[t.length-1]),r=new Date(n).getFullYear(),l=new Date(o).getFullYear()-r>0;return this.buildFormatString(e,l)}buildFormatString(t,e){let i=[Gi[t]],n=0;const o=this.getDomain(),r=Math.min(...o.map(Re)),l=Math.max(...o.map(Re))-r;switch(t){case it.SECOND:l/ae>1&&i.push(Gi[it.MINUTE]);case it.MINUTE:l/We>1&&i.push(Gi[it.HOUR]);case it.HOUR:n=i.length,l/fi>1&&i.push(Gi[it.WEEK_DAY]);case it.WEEK_DAY:if(l/jn>1||e){const c=i.indexOf(Gi[it.WEEK_DAY]);c>-1&&i.splice(c,1,Gi[it.SHORT_MONTH])}case it.SHORT_MONTH:case it.MONTH:(l/ws>1||e)&&i.push(Gi[it.YEAR])}return n<i.length&&(i=[...i.slice(0,n),i.slice(n).join(" ")]),n>0&&(i=[...i.slice(0,n).reverse(),...i.slice(n)],n<i.length&&i.splice(n,0," ")),i.join("")}getLowestGranularityFormat(t){return this.second.floor(t)<t?it.MILLISECOND:this.minute.floor(t)<t?it.SECOND:this.hour.floor(t)<t?it.MINUTE:this.day.floor(t)<t?it.HOUR:this.month.floor(t)<t?this.week.floor(t)<t?it.WEEK_DAY:it.SHORT_MONTH:this.year.floor(t)<t?it.MONTH:it.YEAR}defaultTickFormat(t){const e=this.calculateDefaultTickFormat(t);return i=>oo(e)(i)}getTickInterval({start:t,stop:e,count:i,minCount:n,maxCount:o}){const{tickIntervals:r}=this;let a,l;const c=i??ot.defaultTickCount,d=Math.abs(e-t)/Math.max(c,1);let h=0;for(;h<r.length&&d>r[h][2];)h++;if(0===h)l=Math.max(cn(t,e,c,n,o),1),a=this.millisecond;else if(h===r.length)l=cn(t/ws,e/ws,c,n,o),a=this.year;else{const f=d-r[h-1][2]<r[h][2]-d?h-1:h;[a,l]=r[f]}return a.every(l)}invert(t){return new Date(super.invert(t))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const[t,e]=this.getDomain().map(Re);if(void 0!==this.interval)return this.getTicksForInterval({start:t,stop:e});if(this.nice){const{tickCount:i}=this;if(2===i)return this.niceDomain;if(1===i)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:t,stop:e})}getDefaultTicks({start:t,stop:e}){const i=this.getTickInterval({start:t,stop:e,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return i?i.range(new Date(t),new Date(e)):[]}getTicksForInterval({start:t,stop:e}){const{interval:i,tickIntervals:n}=this;if(!i)return[];if(i instanceof Gn){const h=i.range(new Date(t),new Date(e));return this.isDenseInterval({start:t,stop:e,interval:i,count:h.length})?this.getDefaultTicks({start:t,stop:e}):h}const o=Math.abs(i);if(this.isDenseInterval({start:t,stop:e,interval:o}))return this.getDefaultTicks({start:t,stop:e});const r=[...n];r.reverse();const a=r.find(h=>o%h[2]==0);if(a)return a[0].every(o/(a[2]/a[1])).range(new Date(t),new Date(e));let l=new Date(t);const c=new Date(e),d=[];for(;l<=c;)d.push(l),l=new Date(l),l.setMilliseconds(l.getMilliseconds()+o);return d}tickFormat({ticks:t,specifier:e}){return null==e?this.defaultTickFormat(t):oo(e)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[e,i]=this.domain;for(let n=0;n<4;n++){this.updateNiceDomainIteration(e,i);const[o,r]=this.niceDomain;if(Re(e)===Re(o)&&Re(i)===Re(r))break;e=o,i=r}}updateNiceDomainIteration(t,e){const i=Re(t),n=Re(e),{interval:o}=this;let r;if(o instanceof Gn)r=o;else{const a="number"==typeof o?(n-i)/Math.max(o,1):this.tickCount;r=this.getTickInterval({start:i,stop:n,count:a,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(r){const a=r.range(t,e,!0);this.niceDomain=[a[0],a[a.length-1]]}}}class Si{constructor(t=0,e=t,i=t,n=e){this.top=t,this.right=e,this.bottom=i,this.left=n}clear(){this.top=this.right=this.bottom=this.left=0}}function gp(s,t){return s.length===t.length&&s.every((e,i)=>Number(e)===Number(t[i]))}function yp(s,t,e,i,n){let o=s.x;s.x<t?o=t:s.x>t+i&&(o=t+i);let r=s.y;s.y<e?r=e:s.y>e+n&&(r=e+n);const a=s.x-o,l=s.y-r;return Math.sqrt(a*a+l*l)<=.5*s.size}function nc(s,t,e,i,n){return s.x+s.width>t&&s.x<t+i&&s.y+s.height>e&&s.y<e+n}function mp(s,t,e,i,n){return t+i<s.x+s.width&&t>s.x&&e>s.y&&e+n<s.y+s.height}m([S(C(0)),v("design:type",Number)],Si.prototype,"top",void 0),m([S(C(0)),v("design:type",Number)],Si.prototype,"right",void 0),m([S(C(0)),v("design:type",Number)],Si.prototype,"bottom",void 0),m([S(C(0)),v("design:type",Number)],Si.prototype,"left",void 0);const Sp=["stroke","lineDash"],_p=j(ti(void 0,s=>{for(const t in s)if(!Sp.includes(t))return!1;return!0}),"expecting an Array of objects with gridline style properties such as 'stroke' and 'lineDash'");class ao{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}}function ai(s,t=[void 0]){return Un((e,i,n)=>t.includes(n)?s:n)}m([S(nt),v("design:type",Object)],ao.prototype,"enabled",void 0),m([S(C(0)),v("design:type",Number)],ao.prototype,"width",void 0),m([S(_p),v("design:type",Array)],ao.prototype,"style",void 0);class Lt{constructor(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0}getSideFlag(){return this.mirrored?1:-1}getFont(){return vi(this)}}m([S(nt),v("design:type",Object)],Lt.prototype,"enabled",void 0),m([S(De),v("design:type",Boolean)],Lt.prototype,"autoWrap",void 0),m([S(Z(0)),v("design:type",Number)],Lt.prototype,"maxWidth",void 0),m([S(Z(0)),v("design:type",Number)],Lt.prototype,"maxHeight",void 0),m([S(gi),v("design:type",String)],Lt.prototype,"fontStyle",void 0),m([S(yi),v("design:type",String)],Lt.prototype,"fontWeight",void 0),m([S(C(1)),v("design:type",Number)],Lt.prototype,"fontSize",void 0),m([S($t),v("design:type",String)],Lt.prototype,"fontFamily",void 0),m([S(C(0)),v("design:type",Number)],Lt.prototype,"padding",void 0),m([S(ei()),ai(NaN),v("design:type",Number)],Lt.prototype,"minSpacing",void 0),m([S(St),v("design:type",String)],Lt.prototype,"color",void 0),m([S(Z(-360,360)),v("design:type",Number)],Lt.prototype,"rotation",void 0),m([S(nt),v("design:type",Boolean)],Lt.prototype,"avoidCollisions",void 0),m([S(nt),v("design:type",Boolean)],Lt.prototype,"mirrored",void 0),m([S(nt),v("design:type",Boolean)],Lt.prototype,"parallel",void 0),m([S(Y),v("design:type",String)],Lt.prototype,"format",void 0);class ds{constructor(){this.enabled=!0,this.width=1,this.color=void 0}}m([S(nt),v("design:type",Object)],ds.prototype,"enabled",void 0),m([S(C(0)),v("design:type",Number)],ds.prototype,"width",void 0),m([S(St),v("design:type",String)],ds.prototype,"color",void 0);const kp=j((s,t)=>gt(s,t,(e,i)=>0!==e&&C(0)(e,i)||e instanceof Gn),"expecting an optional non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'");class we{constructor(){this.enabled=!0,this.width=1,this.size=6,this.color=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}}function _r(s){const t=Math.min(...s.range),e=Math.max(...s.range),i=Math.floor(t),n=Math.ceil(e);return{min:i,max:n,visible:i!==n}}m([S(nt),v("design:type",Object)],we.prototype,"enabled",void 0),m([S(C(0)),v("design:type",Number)],we.prototype,"width",void 0),m([S(C(0)),v("design:type",Number)],we.prototype,"size",void 0),m([S(St),v("design:type",String)],we.prototype,"color",void 0),m([S(kp),v("design:type",Object)],we.prototype,"interval",void 0),m([S(Bs()),v("design:type",Array)],we.prototype,"values",void 0),m([S(Xe(ei(1),Kn("maxSpacing"))),ai(NaN),v("design:type",Number)],we.prototype,"minSpacing",void 0);const kr=2*Math.PI,Op=kr/2;var hs=function(s){return s[s.TickLine=0]="TickLine",s[s.TickLabel=1]="TickLabel",s[s.GridLine=2]="GridLine",s[s.GridArc=3]="GridArc",s[s.AxisLine=4]="AxisLine",s}(hs||{}),Ze=function(s){return s[s.CREATE=0]="CREATE",s[s.CREATE_SECONDARY=1]="CREATE_SECONDARY",s[s.FILTER=2]="FILTER",s[s.VALUES=3]="VALUES",s}(Ze||{});class _i{get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}set crossLines(t){var e,i;null===(e=this._crossLines)||void 0===e||e.forEach(n=>this.detachCrossLine(n)),t&&this.assignCrossLineArrayConstructor(t),this._crossLines=t,null===(i=this._crossLines)||void 0===i||i.forEach(n=>{this.attachCrossLine(n),this.initCrossLine(n)})}get crossLines(){return this._crossLines}constructor(t,e){let i;this.moduleCtx=t,this.scale=e,this.id=ii(this),this.nice=!0,this.dataDomain={domain:[],clipped:!1},this.keys=[],this.boundSeries=[],this.includeInvisibleDomains=!1,this.axisGroup=new z({name:`${this.id}-axis`,zIndex:ut.AXIS_ZINDEX}),this.lineNode=this.axisGroup.appendChild(new Bt),this.tickLineGroup=this.axisGroup.appendChild(new z({name:`${this.id}-Axis-tick-lines`,zIndex:ut.AXIS_ZINDEX})),this.tickLabelGroup=this.axisGroup.appendChild(new z({name:`${this.id}-Axis-tick-labels`,zIndex:ut.AXIS_ZINDEX})),this.crossLineGroup=new z({name:`${this.id}-CrossLines`}),this.gridGroup=new z({name:`${this.id}-Axis-grid`}),this.gridLineGroup=this.gridGroup.appendChild(new z({name:`${this.id}-gridLines`,zIndex:ut.AXIS_GRID_ZINDEX})),this.tickLineGroupSelection=rt.select(this.tickLineGroup,Bt,!1),this.tickLabelGroupSelection=rt.select(this.tickLabelGroup,W,!1),this.gridLineGroupSelection=rt.select(this.gridLineGroup,Bt,!1),this.line=new ds,this.tick=this.createTick(),this.gridLine=new ao,this.label=this.createLabel(),this.defaultTickMinSpacing=_i.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new yt,this._gridLength=0,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this.maxThickness=1/0,this.moduleMap=new El(this),this.refreshScale(),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node),this.destroyFns.push(t.interactionManager.addListener("hover",n=>this.checkAxisHover(n))),this.animationManager=t.animationManager,this.animationState=new as("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()}},ready:{update:n=>this.animateReadyUpdate(n),resize:()=>this.resetSelectionNodes()}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines),this.destroyFns.push(t.layoutService.addListener("layout-complete",n=>{null!=i&&null!=Ue(n.chart,i)&&this.animationState.transition("resize"),i=Object.assign({},n.chart)})),this.destroyFns.push(t.updateService.addListener("update-complete",n=>{this.minRect=n.minRect}))}attachCrossLine(t){this.crossLineGroup.appendChild(t.group)}detachCrossLine(t){this.crossLineGroup.removeChild(t.group)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(t=>t())}refreshScale(){var t;this.range=this.scale.range.slice(),null===(t=this.crossLines)||void 0===t||t.forEach(e=>{this.initCrossLine(e)})}updateRange(){var t;const{range:e,visibleRange:i,scale:n}=this,o=(e[1]-e[0])/(i[1]-i[0]),a=e[0]-o*i[0];n.range=[a,a+o],null===(t=this.crossLines)||void 0===t||t.forEach(l=>{l.clippedRange=[e[0],e[1]]})}setCrossLinesVisible(t){this.crossLineGroup.visible=t}attachAxis(t,e){e.appendChild(this.gridGroup),t.appendChild(this.axisGroup),t.appendChild(this.crossLineGroup)}detachAxis(t,e){e.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)}inRange(t,e=0,i=0){const n=Math.min(...this.range),o=Math.max(...this.range);return t+e>=n-i&&t<=o+i}onLabelFormatChange(t,e){const{scale:i,fractionDigits:n}=this,r=!(i instanceof gn)&&n>0?a=>"number"==typeof a?a.toFixed(n):String(a):a=>String(a);if(e&&i&&i.tickFormat)try{this.labelFormatter=i.tickFormat({ticks:t,specifier:e})}catch{this.labelFormatter=r,B.warnOnce(`the axis label format string ${e} is invalid. No formatting will be applied`)}else this.labelFormatter=r}setDomain(){var t;const{scale:e,dataDomain:{domain:i},tick:{values:n}}=this;if(n&&ot.is(e)){const[o,r]=null!==(t=Ee(n))&&void 0!==t?t:[1/0,-1/0],a=Math.min(e.fromDomain(i[0]),o),l=Math.max(e.fromDomain(i[1]),r);e.domain=[e.toDomain(a),e.toDomain(l)]}else e.domain=i}setTickInterval(t){var e;this.scale.interval=null!==(e=this.tick.interval)&&void 0!==e?e:t}setTickCount(t,e,i){const{scale:n}=this;if(t&&ot.is(n)){if("number"==typeof t)return n.tickCount=t,n.minTickCount=e??0,void(n.maxTickCount=i??1/0);n instanceof Sr&&this.setTickInterval(t)}}set gridLength(t){var e;(this._gridLength&&!t||!this._gridLength&&t)&&this.gridLineGroupSelection.clear(),this._gridLength=t,null===(e=this.crossLines)||void 0===e||e.forEach(i=>{this.initCrossLine(i)})}get gridLength(){return this._gridLength}createTick(){return new we}createLabel(){return new Lt}checkAxisHover(t){this.computeBBox().containsPoint(t.offsetX,t.offsetY)&&this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)}update(t){if(!this.tickGenerationResult)return;const{rotation:e,parallelFlipRotation:i,regularFlipRotation:n}=this.calculateRotations(),o=this.label.getSideFlag();this.updatePosition();const r=this.getAxisLineCoordinates(),a=this.tickGenerationResult,{tickData:l,combinedRotation:c,textBaseline:d,textAlign:h}=a,u=le(a,["tickData","combinedRotation","textBaseline","textAlign"]),p=this.tickLabelGroupSelection.nodes().map(f=>f.datum.tickId);if(this.updateSelections(r,l.ticks,{combinedRotation:c,textAlign:h,textBaseline:d,range:this.scale.range}),this.animationManager.isSkipped())this.resetSelectionNodes();else{const f=this.calculateUpdateDiff(p,l);this.animationState.transition("update",f)}return this.updateAxisLine(),this.updateLabels(),this.updateVisibility(),this.updateGridLines(o),this.updateTickLines(),this.updateTitle({anyTickVisible:l.ticks.length>0}),this.updateCrossLines({rotation:e,parallelFlipRotation:i,regularFlipRotation:n}),this.updateLayoutState(),u.primaryTickCount}getAxisLineCoordinates(){const{range:[t,e]}=this;return{x:0,y1:Math.min(t,e),y2:Math.max(t,e)}}getTickLineCoordinates(t){const{tick:e,label:i}=this,o=i.getSideFlag()*e.size,r=Math.min(0,o);return{x1:r,x2:r+Math.abs(o),y:Math.round(t.translationY)}}getTickLabelProps(t,e){const{label:i}=this,{combinedRotation:n,textBaseline:o,textAlign:r,range:a}=e,l=t.tickLabel,h=i.getSideFlag()*(this.tick.size+i.padding+this.seriesAreaPadding);return{tickId:t.tickId,translationY:t.translationY,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,rotation:n,rotationCenterX:h,text:l,textAlign:r,textBaseline:o,visible:""!==l&&null!=l,x:h,y:0,range:a}}setTitleProps(t,e){var i;const{title:n}=this;if(n){if(t.color=n.color,t.fontFamily=n.fontFamily,t.fontSize=n.fontSize,t.fontStyle=n.fontStyle,t.fontWeight=n.fontWeight,t.enabled=n.enabled,t.wrapping=n.wrapping,n.enabled){const o=t.node,{tickSpace:r}=e,a=(null!==(i=n.spacing)&&void 0!==i?i:0)+r,l=this.label.getSideFlag(),c=Ut(this.rotation),d=-1===l&&c>Math.PI&&c<2*Math.PI?-1:1,h=d*l*Math.PI/2,u=1===d?"bottom":"top",{range:p}=this,f=Math.floor(d*l*(p[0]+p[1])/2),g=Math.floor(-1===l?d*-a:-a),{callbackCache:y}=this.moduleCtx,{formatter:b=(x=>x.defaultValue)}=n,_=y.call(b,this.getTitleFormatterParams());o.setProperties({rotation:h,text:_,textBaseline:u,visible:!0,x:f,y:g})}}else t.enabled=!1}calculateLayout(t){var e;const{rotation:i,parallelFlipRotation:n,regularFlipRotation:o}=this.calculateRotations(),r=this.label.getSideFlag(),a=r*(this.tick.size+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.tickGenerationResult=this.generateTicks({primaryTickCount:t,parallelFlipRotation:n,regularFlipRotation:o,labelX:a,sideFlag:r});const l=this.tickGenerationResult,{tickData:c,combinedRotation:d,textBaseline:h,textAlign:u}=l,p=le(l,["tickData","combinedRotation","textBaseline","textAlign"]),f=[],{x:g,y1:y,y2:b}=this.getAxisLineCoordinates(),_=new U(g,y,0,b-y);f.push(_);const{tick:x}=this;x.enabled&&c.ticks.forEach(T=>{const{x1:N,x2:w,y:P}=this.getTickLineCoordinates(T),V=new U(N,P,w-N,0);f.push(V)});const{label:k}=this;if(k.enabled){const T=new W;c.ticks.forEach(N=>{const w=this.getTickLabelProps(N,{combinedRotation:d,textAlign:u,textBaseline:h,range:this.scale.range});if(!w.visible)return;T.setProperties(Object.assign(Object.assign({},w),{translationY:Math.round(N.translationY)}));const P=T.computeTransformedBBox();P&&f.push(P)})}const{title:O}=this;if(O?.enabled){const T=new yt;let N=0;if(c.ticks.length>0){const $=U.merge(f).width;isFinite($)&&(N+=$)}this.setTitleProps(T,{tickSpace:N});const P=T.node.computeTransformedBBox();P&&f.push(P)}const D=(T=>{const N=new Ct,{rotation:w,translationX:P,translationY:V,rotationCenterX:$,rotationCenterY:q}=this.getAxisTransform();return Ct.updateTransformMatrix(N,1,1,w,P,V,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:$,rotationCenterY:q}),N.transformBBox(T)})(U.merge(f)),L=this.isAnySeriesActive();return null===(e=this.crossLines)||void 0===e||e.forEach(T=>{var N;T.sideFlag=-r,T.direction=i===-Math.PI/2?I.X:I.Y,T instanceof Rt&&(T.label.parallel=null!==(N=T.label.parallel)&&void 0!==N?N:this.label.parallel),T.parallelFlipRotation=n,T.regularFlipRotation=o,T.calculateLayout(L)}),this.updateLayoutState(),{primaryTickCount:t=p.primaryTickCount,bbox:D}}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}updateScale(){this.updateRange(),this.calculateDomain(),this.setDomain(),this.setTickInterval(this.tick.interval);const{scale:t,nice:e}=this;ot.is(t)&&(t.nice=e,t.update())}calculateRotations(){const t=ce(this.rotation);return{rotation:t,parallelFlipRotation:Ut(t),regularFlipRotation:Ut(t-Math.PI/2)}}generateTicks({primaryTickCount:t,parallelFlipRotation:e,regularFlipRotation:i,labelX:n,sideFlag:o}){var r;const{scale:a,tick:l,label:{parallel:c,rotation:d,fontFamily:h,fontSize:u,fontStyle:p,fontWeight:f}}=this,g=void 0!==t,{defaultRotation:y,configuredRotation:b,parallelFlipFlag:_,regularFlipFlag:x}=Zs({rotation:d,parallel:c,regularFlipRotation:i,parallelFlipRotation:e}),k=b+y,E=new Ct,{maxTickCount:O}=this.estimateTickCount({minSpacing:l.minSpacing,maxSpacing:null!==(r=l.maxSpacing)&&void 0!==r?r:NaN}),D=!ot.is(a)||isNaN(O)?10:O;let L=lr(c,b,0,o,x);const T=function Wu(s,t,e,i){return s&&!t?e*i==-1?"hanging":"bottom":"middle"}(c,b,o,_),N={fontFamily:h,fontSize:u,fontStyle:p,fontWeight:f,textBaseline:T,textAlign:L};let w={rawTicks:[],ticks:[],labelCount:0},P=0,V=0,$=!0,q=!1;for(;$&&P<=D&&!q;){V=0,L=lr(c,b,0,o,x);const et=this.getTickStrategies({secondaryAxis:g,index:P});for(const Q of et){({tickData:w,index:P,autoRotation:V,terminate:q}=Q({index:P,tickData:w,textProps:N,labelOverlap:$,terminate:q,primaryTickCount:t}));const lt=0!==b||0!==V,dt=k+V;L=lr(c,b,V,o,x),$=this.checkLabelOverlap(dt,lt,E,w.ticks,n,Object.assign(Object.assign({},N),{textAlign:L}))}}return!g&&w.rawTicks.length>0&&(t=w.rawTicks.length),{tickData:w,primaryTickCount:t,combinedRotation:y+b+V,textBaseline:T,textAlign:L}}getTickStrategies({index:t,secondaryAxis:e}){const{scale:i,label:n,tick:o}=this,r=ot.is(i),a=n.enabled&&n.avoidCollisions,c=!0===n.autoRotate&&void 0===n.rotation,d=[];let h;return h=this.tick.values?Ze.VALUES:e?Ze.CREATE_SECONDARY:!r&&0!==t&&a?Ze.FILTER:Ze.CREATE,d.push(({index:p,tickData:f,primaryTickCount:g,terminate:y})=>this.createTickData(h,p,f,y,g)),r||isNaN(o.minSpacing)||d.push(({index:f,tickData:g,primaryTickCount:y,terminate:b})=>this.createTickData(Ze.FILTER,f,g,b,y)),a?(n.autoWrap?d.push(({index:f,tickData:g,textProps:y})=>this.wrapLabels(g,f,y)):c&&d.push(({index:f,tickData:g,labelOverlap:y,terminate:b})=>({index:f,tickData:g,autoRotation:this.getAutoRotation(y),terminate:b})),d):d}createTickData(t,e,i,n,o){var r;const{scale:a,tick:l}=this,{maxTickCount:c,minTickCount:d,defaultTickCount:h}=this.estimateTickCount({minSpacing:l.minSpacing,maxSpacing:null!==(r=l.maxSpacing)&&void 0!==r?r:NaN}),u=ot.is(a),p=!u||isNaN(c)?10:c;let f=u?Math.max(h-e,d):c;const g=void 0===l.interval&&void 0===l.values&&f>d&&(u||t===Ze.FILTER);let y=!0;for(;y&&e<=p;){const _=i.rawTicks;f=u?Math.max(h-e,d):c;const{rawTicks:x,ticks:k,labelCount:E}=this.getTicks({tickGenerationType:t,previousTicks:_,tickCount:f,minTickCount:d,maxTickCount:c,primaryTickCount:o});i.rawTicks=x,i.ticks=k,i.labelCount=E,y=!!g&&gp(x,_),e++}return n||(n=void 0!==l.interval||void 0!==l.values),{tickData:i,index:e,autoRotation:0,terminate:n}}checkLabelOverlap(t,e,i,n,o,r){Ct.updateTransformMatrix(i,1,1,t,0,0);const a=this.createLabelData(n,o,r,i),l=function Yu(s,t){return isNaN(s)?t?0:10:s}(this.label.minSpacing,e);return function xp(s,t){const e=[];for(let i=0;i<s.length;i++){const n=s[i],{point:{x:o,y:r},label:{text:a}}=n;let{label:{width:l,height:c}}=n;if(l+=t??0,c+=t??0,e.some(h=>nc(h,o,r,l,c)))return!0;e.push({index:i,text:a,x:o,y:r,width:l,height:c,datum:n})}return!1}(a,l)}createLabelData(t,e,i,n){const o=[];for(const r of t){const{tickLabel:a,translationY:l}=r;if(""===a||null==a)continue;const c=qa(a),{width:d,height:h}=pu(c,e,l,i),p=zu(a,new U(e,l,d,h),e,l,n);o.push(p)}return o}getAutoRotation(t){var e;return t?Ut(ce(null!==(e=this.label.autoRotateAngle)&&void 0!==e?e:0)):0}getTicks({tickGenerationType:t,previousTicks:e,tickCount:i,minTickCount:n,maxTickCount:o,primaryTickCount:r}){var a;const{range:l,scale:c,visibleRange:d}=this;let h=[];switch(t){case Ze.VALUES:h=this.tick.values;break;case Ze.CREATE_SECONDARY:h=this.updateSecondaryAxisTicks(r);break;case Ze.FILTER:h=this.filterTicks(e,i);break;default:h=this.createTicks(i,n,o)}this.onLabelFormatChange(h,this.label.format),this.fractionDigits=h.fractionDigits>=0?h.fractionDigits:0;const u=(null!==(a=c.bandwidth)&&void 0!==a?a:0)/2,p=[];let f=0;const g=new Map,y=Math.max(0,Math.floor(d[0]*h.length)),b=Math.min(h.length,Math.ceil(d[1]*h.length));for(let _=y;_<b;_++){const x=h[_],k=c.convert(x)+u;if(l.length>0&&!this.inRange(k,0,.001))continue;const E=this.formatTick(x,_);let O=E;if(g.has(O)){const A=g.get(O);g.set(O,A+1),O=`${O}_${A}`}else g.set(O,1);p.push({tick:x,tickId:O,tickLabel:E,translationY:k}),""!==E&&null!=E&&f++}return{rawTicks:h,ticks:p,labelCount:f}}filterTicks(t,e){var i;const o=isNaN(this.tick.minSpacing)&&isNaN(null!==(i=this.tick.maxSpacing)&&void 0!==i?i:NaN)?2:Math.ceil(t.length/e);return t.filter((r,a)=>a%o==0)}createTicks(t,e,i){var n,o,r;return this.setTickCount(t,e,i),null!==(r=null===(o=(n=this.scale).ticks)||void 0===o?void 0:o.call(n))&&void 0!==r?r:[]}estimateTickCount({minSpacing:t,maxSpacing:e}){const{minRect:i}=this,n=this.calculateRangeWithBleed(),o=Math.max(this.defaultTickMinSpacing,n/ot.defaultMaxTickCount);let r=!isNaN(e);isNaN(t)&&(t=o),isNaN(e)&&(e=n),t>e&&(t===o?t=e:e=t);const a=i?this.direction===I.X?i.width:i.height:1;r&&(r=a<o);const l=Ae(1,Math.floor(n/t),r?Math.floor(n/a):1/0),c=Math.min(l,Math.ceil(n/e));return{minTickCount:c,maxTickCount:l,defaultTickCount:Ae(c,ot.defaultTickCount,l)}}updateVisibility(){this.moduleCtx.animationManager.isSkipped()&&this.resetSelectionNodes(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:t,parallelFlipRotation:e,regularFlipRotation:i}){var n;const o=this.label.getSideFlag(),r=this.isAnySeriesActive();null===(n=this.crossLines)||void 0===n||n.forEach(a=>{var l;a.sideFlag=-o,a.direction=t===-Math.PI/2?I.X:I.Y,a instanceof Rt&&(a.label.parallel=null!==(l=a.label.parallel)&&void 0!==l?l:this.label.parallel),a.parallelFlipRotation=e,a.regularFlipRotation=i,a.update(r)})}updateTickLines(){const{tick:t,label:e}=this,i=e.getSideFlag();this.tickLineGroupSelection.each(n=>{n.strokeWidth=t.width,n.stroke=t.color,n.x1=i*t.size,n.x2=0,n.y1=0,n.y2=0})}calculateAvailableRange(){const{range:t}=this,e=Math.min(...t);return Math.max(...t)-e}calculateRangeWithBleed(){const{visibleRange:t}=this,e=1/(t[1]-t[0]);return function Go(s,t=2){const e=Math.pow(10,t);return Math.round(s*e)/e}(this.calculateAvailableRange()*e,2)}calculateDomain(){if(this.linkedTo)this.dataDomain=this.linkedTo.dataDomain;else{const e=this.boundSeries.filter(i=>this.includeInvisibleDomains||i.isEnabled()).flatMap(i=>i.getDomain(this.direction));this.dataDomain=this.normaliseDataDomain(e)}}getAxisTransform(){return{rotation:ce(this.rotation),rotationCenterX:0,rotationCenterY:0,translationX:this.translation.x,translationY:this.translation.y}}updatePosition(){const{crossLineGroup:t,axisGroup:e,gridGroup:i,translation:n,gridLineGroupSelection:o,gridPadding:r,gridLength:a}=this,{rotation:l}=this.calculateRotations(),c=this.label.getSideFlag(),d=Math.floor(n.x),h=Math.floor(n.y);t.setProperties({rotation:l,translationX:d,translationY:h}),e.datum=this.getAxisTransform(),i.setProperties({rotation:l,translationX:d,translationY:h}),o.each(u=>{u.x1=r,u.x2=-c*a+r,u.y=0})}updateSecondaryAxisTicks(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(t,e,i){this.lineNode.datum=t,this.gridLineGroupSelection.update(this.gridLength?e:[],n=>n.append(new Bt({tag:hs.GridLine})),n=>n.tickId),this.tickLineGroupSelection.update(e,n=>n.appendChild(new Bt({tag:hs.TickLine})),n=>n.tickId),this.tickLabelGroupSelection.update(e.map(n=>this.getTickLabelProps(n,i)),n=>n.appendChild(new W({tag:hs.TickLabel})),n=>n.tickId)}updateAxisLine(){const{line:t}=this;this.lineNode.setProperties({stroke:t.color,strokeWidth:t.enabled?t.width:0})}updateGridLines(t){const{gridLine:{style:e,width:i},gridPadding:n,gridLength:o}=this;0===o||0===e.length||this.gridLineGroupSelection.each((r,a,l)=>{const{stroke:c,lineDash:d}=e[l%e.length];r.setProperties({x1:n,x2:-t*o+n,y:0,fill:void 0,stroke:c,strokeWidth:i,lineDash:d})})}updateLabels(){const{label:t}=this;t.enabled&&this.tickLabelGroupSelection.each((e,i)=>{e.setProperties(i,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])})}wrapLabels(t,e,i){const{parallel:n,maxWidth:o,maxHeight:r}=this.label;let a=this.maxThickness,l=Math.round(this.calculateAvailableRange()/t.labelCount);return n&&([a,l]=[l,a]),t.ticks.forEach(c=>{c.tickLabel=W.wrap(c.tickLabel,o??a,r??l,i,"hyphenate")}),{tickData:t,index:e,autoRotation:0,terminate:!0}}updateTitle(t){const{rotation:e,title:i,_titleCaption:n,lineNode:o,tickLineGroup:r,tickLabelGroup:a}=this;if(!i)return void(n.enabled=!1);let l=0;const{anyTickVisible:c}=t;if(i.enabled&&c){const d=z.computeBBox([r,a,o]),h=0===e?d.width:d.height;Math.abs(h)<1/0&&(l+=h)}this.setTitleProps(n,{tickSpace:l})}formatTick(t,e){var i,n;const{label:o,labelFormatter:r,fractionDigits:a,moduleCtx:{callbackCache:l}}=this;if(o.formatter){const c=a>0?t:String(t);return null!==(i=l.call(o.formatter,{value:c,index:e,fractionDigits:a,formatter:r}))&&void 0!==i?i:c}return r&&null!==(n=l.call(r,t))&&void 0!==n?n:String(t)}formatDatum(t){return String(t)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(t=>this.includeInvisibleDomains||t.isEnabled())}clipTickLines(t,e,i,n){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new U(t,e,i,n))}clipGrid(t,e,i,n){this.gridGroup.setClipRectInGroupCoordinateSpace(new U(t,e,i,n))}calculatePadding(t,e){return[Math.abs(.01*t),Math.abs(.01*t)]}getTitleFormatterParams(){var t;const e=this.boundSeries.reduce((i,n)=>{const o=n.getKeys(this.direction),r=n.getNames(this.direction);for(let a=0;a<o.length;a++)i.push({key:o[a],name:r[a]});return i},[]);return{direction:this.direction,boundSeries:e,defaultValue:null===(t=this.title)||void 0===t?void 0:t.text}}normaliseDataDomain(t){return{domain:t,clipped:!1}}getLayoutState(){return Object.assign({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.tick.size},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){var t;return null!==(t=this.axisContext)&&void 0!==t||(this.axisContext=this.createAxisContext()),Object.assign(Object.assign({},this.moduleCtx),{parent:this.axisContext})}createAxisContext(){return{axisId:this.id,direction:this.direction,continuous:ot.is(this.scale),keys:()=>this.boundSeries.flatMap(t=>t.getKeys(this.direction)),scaleValueFormatter:t=>{var e,i;return null===(i=(e=this.scale).tickFormat)||void 0===i?void 0:i.call(e,{specifier:t})},scaleBandwidth:()=>{var t;return null!==(t=this.scale.bandwidth)&&void 0!==t?t:0},scaleConvert:t=>this.scale.convert(t),scaleInvert:t=>{var e,i;return null===(i=(e=this.scale).invert)||void 0===i?void 0:i.call(e,t)}}}animateReadyUpdate(t){const{animationManager:e}=this.moduleCtx,n=function sc(s){const t=c=>{var d,h;const u=Math.min(...null!==(d=c.range)&&void 0!==d?d:[s.min]),p=Math.max(...null!==(h=c.range)&&void 0!==h?h:[s.max]),f=Math.round(c.translationY);return f<u||f>p},i=(c,d,h)=>{const u={translationY:Math.round(c.translationY),opacity:c.opacity};return h=((c,d,h)=>"removed"!==h&&t(c)?"removed":"added"!==h&&t(d)?"added":h)(d,c.datum,h),"added"===h&&(u.translationY=Math.round(d.translationY),u.opacity=0),Object.assign(Object.assign({},u),Zt[h])},n=(c,d,h)=>{const u={translationY:Math.round(d.translationY),opacity:1};return"removed"===h&&(u.opacity=0),u};return{tick:{fromFn:i,toFn:n,intermediateFn:(c,d,h)=>({visible:!t(c)})},line:{fromFn:(c,d)=>{var h,u;return Object.assign(Object.assign({},null!==(u=null!==(h=c.previousDatum)&&void 0!==h?h:d)&&void 0!==u?u:{y:c.y,x1:c.x1,x2:c.x2}),Zt.updated)},toFn:(c,d)=>Object.assign({},d)},label:{fromFn:(c,d,h)=>{var u;const p=null!==(u=c.previousDatum)&&void 0!==u?u:d;let f=p.rotation;return("added"===h||"removed"===h)&&(f=d.rotation),Object.assign(Object.assign({},i(c,d,h)),{x:p.x,y:p.y,rotation:f,rotationCenterX:p.rotationCenterX})},toFn:(c,d,h)=>{var u,p;let f;return f="added"===h||"removed"===h?d.rotation:function Ep(s,t){return Math.abs(t-s)<Op?t:s>t?t+kr:t-kr}(null!==(p=null===(u=c.previousDatum)||void 0===u?void 0:u.rotation)&&void 0!==p?p:d.rotation,d.rotation),Object.assign(Object.assign({},n(0,d,h)),{x:d.x,y:d.y,rotation:f,rotationCenterX:d.rotationCenterX,finish:{rotation:d.rotation}})}},group:{fromFn:(c,d)=>{const{rotation:h,translationX:u,translationY:p}=c;return Object.assign({rotation:h,translationX:u,translationY:p},Zt.updated)},toFn:(c,d)=>{const{rotation:h,translationX:u,translationY:p}=d;return{rotation:h,translationX:u,translationY:p}}}}}(_r(this));Et(this.id,"axis-group",e,[this.axisGroup],n.group),Et(this.id,"line",e,[this.lineNode],n.line),Et(this.id,"line-paths",e,[this.gridLineGroupSelection,this.tickLineGroupSelection],n.tick,(o,r)=>r.tickId,t),Et(this.id,"tick-labels",e,[this.tickLabelGroupSelection],n.label,(o,r)=>r.tickId,t)}resetSelectionNodes(){const{gridLineGroupSelection:t,tickLineGroupSelection:e,tickLabelGroupSelection:i,lineNode:n}=this,o=_r(this);Mt([this.axisGroup],(s,t)=>({rotation:t.rotation,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,translationX:t.translationX,translationY:t.translationY})),Mt([t,e],function rc(s){const{visible:t,min:e,max:i}=s;return(n,o)=>{const r=Math.round(o.translationY);return{translationY:r,opacity:1,visible:t&&r>=e&&r<=i}}}(o)),Mt([i],(s,t)=>({x:t.x,y:t.y,translationY:t.translationY,rotation:t.rotation,rotationCenterX:t.rotationCenterX})),Mt([n],function lc(){return(s,t)=>Object.assign({},t)}())}calculateUpdateDiff(t,e){const i=new Set,n=new Set,o=Math.max(t.length,e.ticks.length);for(let r=0;r<o;r++){const a=e.ticks[r],l=t[r],c=a?.tickId;l!==c&&(n.has(c)?n.delete(c):c&&i.add(c),i.has(l)?i.delete(l):l&&n.add(l))}return{changed:i.size>0||n.size>0,added:[...i.values()],removed:[...n.values()]}}}_i.defaultTickMinSpacing=50,m([S(nt),v("design:type",Boolean)],_i.prototype,"nice",void 0),m([S(Uo),v("design:type",Array)],_i.prototype,"keys",void 0);class Or extends Lt{constructor(){super(...arguments),this.autoRotateAngle=335}}m([S(De),v("design:type",Boolean)],Or.prototype,"autoRotate",void 0),m([S(C(-360,360)),v("design:type",Number)],Or.prototype,"autoRotateAngle",void 0);class yn extends _i{constructor(){super(...arguments),this.thickness=0,this.position="left"}get direction(){return["top","bottom"].includes(this.position)?I.X:I.Y}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(t){return this.updateDirection(),super.update(t)}calculateLayout(t){return this.updateDirection(),super.calculateLayout(t)}createAxisContext(){return Object.assign(Object.assign({},super.createAxisContext()),{position:this.position})}assignCrossLineArrayConstructor(t){!function Ul(s,t){var e;null===(e=cs.constructedArrays)||void 0===e||e.set(s,t)}(t,Rt)}createLabel(){return new Or}}m([S(C(0)),v("design:type",Number)],yn.prototype,"thickness",void 0),m([S(Xo),v("design:type",String)],yn.prototype,"position",void 0);class li extends yn{constructor(t){super(t,new sn),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(t){this._paddingOverrideEnabled=!0,this.scale.paddingInner=t}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(t){this.scale.paddingOuter=t}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(t){const e=[],i=new Set;for(const n of t){const o=n instanceof Date?n.getTime():n;i.has(o)||(i.add(o),e.push(n))}return{domain:e,clipped:!1}}calculateDomain(){if(!this._paddingOverrideEnabled){const t=this.boundSeries.map(e=>{var i;return null===(i=e.getBandScalePadding)||void 0===i?void 0:i.call(e)}).filter(e=>null!=e);t.length>0&&(this.scale.paddingInner=Math.min(...t.map(e=>e.inner)),this.scale.paddingOuter=Math.max(...t.map(e=>e.outer)))}return super.calculateDomain()}}li.className="CategoryAxis",li.type="category",m([S(C(0,1)),v("design:type",Number)],li.prototype,"groupPaddingInner",void 0);class cc{constructor(t="",e,i=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((t,e)=>e!==this.number):[]}}function Tp(s,t,e){const n=e/(t.number-s.number);t.change-=n,t.shift+=e,s.change+=n,t.prelim+=e,t.mod+=e}function Np(s,t,e){return t.getSiblings().indexOf(s.ancestor)>=0?s.ancestor:e}function dc(s,t){const e=s.children;if(e.length){let i=e[0];e.forEach(r=>{dc(r,t),i=function Mp(s,t,e){const i=s.getLeftSibling();if(i){let n=s,o=s,r=i,a=o.getLeftmostSibling(),l=o.mod,c=n.mod,d=r.mod,h=a.mod;for(;r.nextRight()&&o.nextLeft();){r=r.nextRight(),o=o.nextLeft(),a=a.nextLeft(),n=n.nextRight(),n.ancestor=s;const u=r.prelim+d-(o.prelim+l)+e;u>0&&(Tp(Np(r,s,t),s,u),l+=u,c+=u),d+=r.mod,l+=o.mod,h+=a.mod,c+=n.mod}r.nextRight()&&!n.nextRight()?(n.thread=r.nextRight(),n.mod+=d-c):(o.nextLeft()&&!a.nextLeft()&&(a.thread=o.nextLeft(),a.mod+=l-h),t=s)}return t}(r,i,t)}),function Lp(s){const t=s.children;if(t){let e=0,i=0;for(let n=t.length-1;n>=0;n--){const o=t[n];o.prelim+=e,o.mod+=e,i+=o.change,e+=o.shift+i}}}(s);const n=(e[0].prelim+e[e.length-1].prelim)/2,o=s.getLeftSibling();o?(s.prelim=o.prelim+t,s.mod=s.prelim-n):s.prelim=n}else{const i=s.getLeftSibling();s.prelim=i?i.prelim+t:0}}class hc{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){const{x:i,y:n}=e(t);i>this.right&&(this.right=i),i<this.left&&(this.left=i),n>this.bottom&&(this.bottom=n),n<this.top&&(this.top=n)}}function uc(s,t,e){s.x=s.prelim+t,s.y=s.depth,e.update(s),s.children.forEach(i=>uc(i,t+s.mod,e))}function pc(s){const t=s.children;let e=0;t.forEach(i=>{pc(i),i.children.length?e+=i.leafCount:e++}),s.leafCount=e,t.length?(s.subtreeLeft=t[0].subtreeLeft,s.subtreeRight=t[s.children.length-1].subtreeRight,s.x=(s.subtreeLeft+s.subtreeRight)/2):(s.subtreeLeft=s.x,s.subtreeRight=s.x)}function Rp(s){const t=new wp;return dc(s,1),uc(s,-s.prelim,t),pc(s),t}class wp{constructor(){this.dimensions=new hc,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(t){this.dimensions.update(t,e=>({x:e.x,y:e.y})),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)}resize(t,e,i=0,n=0,o=!1){const r=this.leafCount-1,a=this.depth,l=this.dimensions;let c=1,d=1;t>0&&r&&(c=t/r/((l.right-l.left)/r),o&&(c=-c)),e>0&&a&&(d=e/a/((l.bottom-l.top)/a));const h=new hc;this.nodes.forEach(f=>{f.screenX=f.x*c,f.screenY=f.y*d,h.update(f,g=>({x:g.screenX,y:g.screenY}))});const u=-h.left,p=-h.top;this.nodes.forEach(f=>{f.screenX+=u+i,f.screenY+=p+n})}}class fc extends Lt{constructor(){super(...arguments),this.grid=!1}}m([S(nt),v("design:type",Boolean)],fc.prototype,"grid",void 0);class ji extends yn{constructor(t){super(t,new sn),this.tickScale=new sn,this.line=new ds,this.label=new fc,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:e,tickLabelGroup:i,gridLineGroup:n,tickScale:o,scale:r}=this;r.paddingOuter=.1,r.paddingInner=2*r.paddingOuter,this.range=r.range.slice(),this.refreshScale(),o.paddingInner=1,o.paddingOuter=0,this.gridLineSelection=rt.select(n,Bt),this.axisLineSelection=rt.select(e,Bt),this.separatorSelection=rt.select(e,Bt),this.labelSelection=rt.select(i,W)}updateRange(){const{range:t,visibleRange:e,scale:i}=this,n=(t[1]-t[0])/(e[1]-e[0]),r=t[0]-n*e[0];this.tickScale.range=i.range=[r,r+n],this.resizeTickTree()}resizeTickTree(){var t;const e=this.scale,i=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,n=this.tickTreeLayout,o=this.lineHeight;n&&n.resize(Math.abs(i[1]-i[0]),n.depth*o,(Math.min(i[0],i[1])||0)+(null!==(t=e.bandwidth)&&void 0!==t?t:0)/2,-n.depth*o,i[1]-i[0]<0)}get lineHeight(){return 1.5*this.label.fontSize}set gridLength(t){(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineSelection.clear(),this.labelSelection.clear()),this._gridLength=t}get gridLength(){return this._gridLength}calculateDomain(){var t;const{direction:e}=this,i=[];let n;this.boundSeries.filter(a=>a.visible).forEach(a=>{if(e===I.X)if(void 0===n){const l=a.getDomain(e);i.push(l),n="number"==typeof l[0]}else n&&i.push(a.getDomain(e));else i.push(a.getDomain(e))});const o=(new Array).concat(...i),r=null!==(t=Ee(o))&&void 0!==t?t:o;this.dataDomain=this.normaliseDataDomain(r),this.scale.domain=this.dataDomain.domain}normaliseDataDomain(t){const e=t.filter((o,r,a)=>a.indexOf(o)===r),i=function Ap(s,t=!0){const e=new cc;let i=0;return t&&s.forEach(n=>i=Math.max(i,n.labels.length)),s.forEach(n=>{if(t)for(;n.labels.length<i;)n.labels.unshift("");!function Dp(s,t){const e=t.labels.slice().reverse(),i=e.length-1;e.forEach((n,o)=>{const r=s.children,a=r.find(c=>c.label===n),l=o!==i;if(a&&l)s=a;else{const c=new cc(n,s);c.number=r.length,r.push(c),l&&(s=c)}})}(e,n)}),e}(e);this.tickTreeLayout=Rp(i);const n=e.slice();return n.push(""),this.tickScale.domain=n,this.resizeTickTree(),{domain:e,clipped:!1}}update(){this.computedLayout&&(this.updatePosition(),this.updateTitleCaption(),this.updateCategoryLabels(),this.updateSeparators(),this.updateAxisLines(),this.updateCategoryGridLines(),this.resetSelectionNodes())}updateTitleCaption(){const{_titleCaption:t}=this;t.node.visible=!1}updateCategoryLabels(){if(!this.computedLayout)return;const{tickLabelLayout:t}=this.computedLayout;this.labelSelection.update(t).each((i,n)=>{i.setProperties(n)})}updateSeparators(){if(!this.computedLayout)return;const{separatorLayout:t}=this.computedLayout,{range:e}=this;this.separatorSelection.update(t).each((o,r)=>{o.x1=r.x1,o.x2=r.x2,o.y1=r.y,o.y2=r.y,o.visible=r.y>=e[0]-1e-7&&r.y<=e[1]+1e-7,o.stroke=this.tick.color,o.fill=void 0,o.strokeWidth=1})}updateAxisLines(){if(!this.computedLayout)return;const{axisLineLayout:t}=this.computedLayout;this.axisLineSelection.update(t).each((i,n)=>{i.setProperties(Object.assign(Object.assign({},n),{stroke:this.line.color,strokeWidth:this.line.width})),i.x1=n.x,i.x2=n.x,i.y1=n.y1,i.y2=n.y2,i.strokeWidth=this.line.width,i.stroke=this.line.color})}updateCategoryGridLines(){const{gridLength:t,gridLine:e,label:i,range:n,tickScale:o}=this,r=o.ticks(),a=i.getSideFlag(),l=this.gridLineSelection.update(t?r:[]);if(t){const{width:c,style:d}=e,h=d.length;l.each((u,p,f)=>{const g=Math.round(o.convert(p));u.x1=0,u.x2=-a*t,u.y1=g,u.y2=g,u.visible=g>=n[0]&&g<=n[1];const{stroke:y,lineDash:b}=d[f%h];u.stroke=y,u.strokeWidth=c,u.lineDash=b,u.fill=void 0})}}computeLayout(){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:t,label:e,label:{parallel:i},moduleCtx:{callbackCache:n},range:o,title:r,title:{formatter:a=(G=>G.defaultValue)}={}}=this,l=t.range[0],c=t.range[1],h=Math.abs(c-l)/t.domain.length||0,u=ce(this.rotation),p=Math.abs(Math.cos(u))<1e-8,f=e.getSideFlag(),g=this.lineHeight,y=this.tickTreeLayout,b=t.ticks(),_=y?y.nodes:[],x=!!y&&y.depth>1,{defaultRotation:k,configuredRotation:E,parallelFlipFlag:O}=Zs({rotation:e.rotation,parallel:i,regularFlipRotation:Ut(u-Math.PI/2),parallelFlipRotation:Ut(u)}),A=[],L=new Map;let T=0;const N=new W,w=(G,ft)=>{var xt;if(N.setProperties({fill:e.color,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textAlign:"center",textBaseline:-1===O?"bottom":"hanging",translationX:G.screenY-.25*e.fontSize,translationY:G.screenX}),0===ft){if(!(r?.enabled&&b.length>0))return!1;const fe=n.call(a,this.getTitleFormatterParams());N.setProperties({fill:r.color,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStyle:r.fontStyle,fontWeight:r.fontWeight,text:fe,textBaseline:"hanging",translationX:G.screenY-.25*e.fontSize,translationY:G.screenX})}else{if(!(G.screenX>=o[0]&&G.screenX<=o[1]))return!1;N.text=e.formatter&&null!==(xt=n.call(e.formatter,{value:String(G.label),index:ft}))&&void 0!==xt?xt:String(G.label)}return!0};_.forEach((G,ft)=>{if(w(G,ft)){const ht=N.computeTransformedBBox();ht&&(L.set(ft,ht),ht.width>T&&(T=ht.width))}});const P=f*e.padding,V=this.label.grid,$=[];_.forEach((G,ft)=>{let xt=w(G,ft);const ht=ft;N.x=P,N.rotationCenterX=P;const fe=!G.children.length;if(fe){N.rotation=E,N.textAlign="end",N.textBaseline="middle";const Ft=L.get(ht);Ft&&Ft.height>h&&(xt=!1,L.delete(ht))}else{N.translationX-=T-g+this.label.padding;const Ft=G.leafCount*h,Vt=L.get(ht);Vt&&Vt.width>Ft?(xt=!1,L.delete(ht)):N.rotation=p?k:-Math.PI/2}if(G.parent&&x){const Ft=fe?G.screenX-h/2:G.screenX-G.leafCount*h/2;if(fe)(G.number!==G.children.length-1||V)&&$.push({y:Ft,x1:0,x2:-T-2*this.label.padding});else{const Vt=-T-2*this.label.padding+G.screenY;$.push({y:Ft,x1:Vt+g,x2:Vt})}}let zt;if(xt){const Ft=N.computeTransformedBBox();Ft&&L.set(ft,Ft),zt=Object.assign(Object.assign({},(G=>({fill:G.fill,fontFamily:G.fontFamily,fontSize:G.fontSize,fontStyle:G.fontStyle,fontWeight:G.fontWeight,rotation:G.rotation,rotationCenterX:G.rotationCenterX,rotationCenterY:G.rotationCenterY,text:G.text,textAlign:G.textAlign,textBaseline:G.textBaseline,translationX:G.translationX,translationY:G.translationY,visible:G.visible,x:G.x,y:G.y}))(N)),{visible:xt})}else L.delete(ft),zt={visible:xt};A.push(zt)});let q=0;$.forEach(G=>q=Math.min(q,G.x2)),$.push({y:Math.max(l,c),x1:0,x2:q});const tt=[],et=[];$.forEach(G=>{if(G.y>=o[0]-1e-7&&G.y<=o[1]+1e-7){const{x1:ft,x2:xt,y:ht}=G,fe=new U(Math.min(ft,xt),ht,Math.abs(ft-xt),0);et.push(fe),tt.push({x1:ft,x2:xt,y:ht})}});const lt=[],dt=[],Dt=y?y.depth+1:1;for(let G=0;G<Dt;G++){const ft=b.length>0&&(0===G||V&&x),xt=G>0?-T-2*this.label.padding-(G-1)*g:0,ht=new U(xt,Math.min(...o),0,Math.abs(o[1]-o[0]));dt.push(ht),lt.push({x:xt,y1:o[0],y2:o[1],visible:ft})}return{bbox:(G=>{const ft=new Ct,{rotation:xt,translationX:ht,translationY:fe,rotationCenterX:zt,rotationCenterY:Ft}=this.getAxisTransform();return Ct.updateTransformMatrix(ft,1,1,xt,ht,fe,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:zt,rotationCenterY:Ft}),ft.transformBBox(G)})(U.merge([...L.values(),...et,...dt])),tickLabelLayout:A,separatorLayout:tt,axisLineLayout:lt}}calculateLayout(){const{axisLineLayout:t,separatorLayout:e,tickLabelLayout:i,bbox:n}=this.computeLayout();return this.computedLayout={axisLineLayout:t,separatorLayout:e,tickLabelLayout:i},{bbox:n,primaryTickCount:void 0}}}ji.className="GroupedCategoryAxis",ji.type="grouped-category",m([S(St),v("design:type",String)],ji.prototype,"labelColor",void 0);class gc{static isSupported(){return typeof OffscreenCanvas<"u"&&null!=OffscreenCanvas.prototype.transferToImageBitmap}constructor({width:t=600,height:e=300,overrideDevicePixelRatio:i}){this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(t,e),this.realContext=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.context=this.setPixelRatio(i),this.resize(t,e)}snapshot(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()}destroy(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=t??window.devicePixelRatio;return Ha()||(e=1),this._pixelRatio=e,ct.overrideScale(this.realContext,e)}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{canvas:i,context:n,pixelRatio:o}=this;i.width=Math.round(t*o),i.height=Math.round(e*o),n.resetTransform(),this._width=t,this._height=e}}var ki=function(s){return s.SCENE="scene",s.SCENE_STATS="scene:stats",s.SCENE_STATS_VERBOSE="scene:stats:verbose",s.SCENE_DIRTY_TREE="scene:dirtyTree",s}(ki||{});const Er="adv-composite",Ar="dom-composite";let yc=(()=>{class s{constructor(e){var i;this.id=ii(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug=Tt.create(!0,ki.SCENE);const{document:n,window:o,mode:r=(null!==(i=Co("agChartsSceneRenderModel"))&&void 0!==i?i:Er),width:a,height:l,overrideDevicePixelRatio:c}=e;this.overrideDevicePixelRatio=c,this.opts={document:n,window:o,mode:r},this.canvas=new ct({document:n,window:o,width:a,height:l,overrideDevicePixelRatio:c})}set container(e){this.canvas.container=e}get container(){return this.canvas.container}download(e,i){this.canvas.download(e,i)}getDataURL(e){return this.canvas.getDataURL(e)}get width(){return this.pendingSize?this.pendingSize[0]:this.canvas.width}get height(){return this.pendingSize?this.pendingSize[1]:this.canvas.height}resize(e,i){e=Math.round(e),i=Math.round(i);const n=e<=0||i<=0,o=isNaN(e)||isNaN(i);return!(e===this.width&&i===this.height||o||n||(this.pendingSize=[e,i],this.markDirty(),0))}addLayer(e){var i;const{mode:n}=this.opts;if(!["composite",Ar,Er].includes(n))return;const{zIndex:r=this._nextZIndex++,name:a,zIndexSubOrder:l,getComputedOpacity:c,getVisibility:d}=e,{width:h,height:u,overrideDevicePixelRatio:p}=this,f=n===Ar,y=n===Er&&gc.isSupported()?new gc({width:h,height:u,overrideDevicePixelRatio:p}):new ct({document:this.opts.document,window:this.opts.window,width:h,height:u,domLayer:f,zIndex:r,name:a,overrideDevicePixelRatio:p}),b={id:this._nextLayerId++,name:a,zIndex:r,zIndexSubOrder:l,canvas:y,getComputedOpacity:c,getVisibility:d};if(r>=this._nextZIndex&&(this._nextZIndex=r+1),this.layers.push(b),this.sortLayers(),f){const _=this.layers.map(E=>E.canvas).filter(E=>E instanceof ct),x=_.findIndex(E=>E===y);(null!==(i=_[x-1])&&void 0!==i?i:this.canvas).element.insertAdjacentElement("afterend",y.element)}return this.debug("Scene.addLayer() - layers",this.layers),b.canvas}removeLayer(e){const i=this.layers.findIndex(n=>n.canvas===e);i>=0&&(this.layers.splice(i,1),e.destroy(),this.markDirty(),this.debug("Scene.removeLayer() -  layers",this.layers))}moveLayer(e,i,n){const o=this.layers.find(r=>r.canvas===e);o&&(o.zIndex=i,o.zIndexSubOrder=n,this.sortLayers(),this.markDirty(),this.debug("Scene.moveLayer() -  layers",this.layers))}sortLayers(){this.layers.sort((e,i)=>{var n,o;return gl([e.zIndex,...null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0],e.id],[i.zIndex,...null!==(o=i.zIndexSubOrder)&&void 0!==o?o:[void 0,void 0],i.id],fl)})}markDirty(){this._dirty=!0}get dirty(){return this._dirty}set root(e){var i;e!==this._root&&(null===(i=this._root)||void 0===i||i._setLayerManager(),this._root=e,e&&e._setLayerManager({addLayer:n=>this.addLayer(n),moveLayer:(...n)=>this.moveLayer(...n),removeLayer:(...n)=>this.removeLayer(...n),markDirty:()=>this.markDirty(),canvas:this.canvas,debug:Tt.create(ki.SCENE)}),this.markDirty())}get root(){return this._root}strip(){const{layers:e}=this;for(const i of e)i.canvas.destroy(),delete i.canvas;e.splice(0,e.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()}destroy(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})}render(e){var i,n;return R(this,void 0,void 0,function*(){const{debugSplitTimes:o={start:performance.now()},extraDebugStats:r={}}=e??{},{canvas:a,canvas:{context:l},root:c,layers:d,pendingSize:h,opts:{mode:u}}=this;if(h&&(this.canvas.resize(...h),this.layers.forEach(g=>g.canvas.resize(...h)),this.pendingSize=void 0),c&&!c.visible)return void(this._dirty=!1);if(c&&!this.dirty)return this.debug("Scene.render() - no-op",{redrawType:M[c.dirty],tree:this.buildTree(c)}),void this.debugStats(o,l,void 0,r);const p={ctx:l,devicePixelRatio:null!==(i=this.canvas.pixelRatio)&&void 0!==i?i:1,forceRender:!0,resized:!!h,debugNodes:{}};Tt.check(ki.SCENE_STATS_VERBOSE)&&(p.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let f=!1;if((!c||c.dirty>=M.TRIVIAL)&&(f=!0,a.clear()),c){const{dirtyTree:g,paths:y}=this.buildDirtyTree(c);Tt.create(ki.SCENE_DIRTY_TREE)("Scene.render() - dirtyTree",{dirtyTree:g,paths:y})}c&&f&&(this.debug("Scene.render() - before",{redrawType:M[c.dirty],canvasCleared:f,tree:this.buildTree(c)}),c.visible&&(l.save(),c.render(p),l.restore())),o["\u270d\ufe0f"]=performance.now(),u!==Ar&&d.length>0&&f&&(this.sortLayers(),l.save(),l.setTransform(1/a.pixelRatio,0,0,1/a.pixelRatio,0,0),d.forEach(({canvas:{imageSource:g,enabled:y},getComputedOpacity:b,getVisibility:_})=>{!y||!_()||(l.globalAlpha=b(),l.drawImage(g,0,0))}),l.restore(),o["\u26d9"]=performance.now()),null===(n=l.verifyDepthZero)||void 0===n||n.call(l),this._dirty=!1,this.debugStats(o,l,p.stats,r),this.debugSceneNodeHighlight(l,p.debugNodes),c&&this.debug("Scene.render() - after",{redrawType:M[c.dirty],canvasCleared:f,tree:this.buildTree(c)})})}debugStats(e,i,n,o={}){if(Tt.check(ki.SCENE_STATS,ki.SCENE_STATS_VERBOSE)){const r=performance.now(),a=e.start;e.end=performance.now();const l=(A,D)=>{const L=A+D;return`${A} / ${L} (${Math.round(100*A/L)}%)`},c=(A,D,L)=>`${A}: ${Math.round(100*(L-D))/100}ms`,{layersRendered:d=0,layersSkipped:h=0,nodesRendered:u=0,nodesSkipped:p=0}=n??{};let f=0;const g=Object.entries(e).filter(([A])=>"end"!==A).map(([A,D],L)=>{const T=L>0?c(A,f,D):null;return f=D,T}).filter(A=>null!=A).join(" + "),y=Object.entries(o).map(([A,D])=>`${A}: ${D}`).join(" ; "),b=Tt.check(ki.SCENE_STATS_VERBOSE),x=[`${c("\u23f1\ufe0f",a,r)} (${g})`,`${y}`,`Layers: ${b?l(d,h):this.layers.length}`,b?`Nodes: ${l(u,p)}`:null].filter(A=>null!=A).map(A=>[A,ct.getTextSize(A,i.font)]),k=Math.max(...x.map(([,{width:A}])=>A)),E=x.reduce((A,[,{height:D}])=>A+D,0);i.save(),i.fillStyle="white",i.fillRect(0,0,k,E),i.fillStyle="black";let O=0;for(const[A,D]of x)O+=D.height,i.fillText(A,2,O);i.restore()}}debugSceneNodeHighlight(e,i){var n;const o=l=>c=>!!l.test(c.id)||c instanceof z&&null!=c.name&&l.test(c.name),r=l=>c=>l===c.id||c instanceof z&&null!=c.name&&l===c.name,a=Is(Co("agChartsSceneDebug")).flatMap(l=>"layout"===l?["seriesRoot","legend","root",/.*Axis-\d+-axis.*/]:l);for(const l of a){if("string"==typeof l&&null!=i[l])continue;const c="string"==typeof l?r(l):o(l),d=null===(n=this.root)||void 0===n?void 0:n.findNodes(c);if(d&&0!==d.length)for(const h of d)h instanceof z&&h.name?i[h.name]=h:i[h.id]=h;else B.log(`Scene.render() - no debugging node with id [${l}] in scene graph.`)}e.save();for(const[l,c]of Object.entries(i)){const d=c.computeTransformedBBox();d?(e.globalAlpha=.8,e.strokeStyle="red",e.lineWidth=1,e.strokeRect(d.x,d.y,d.width,d.height),e.fillStyle="red",e.strokeStyle="white",e.font="16px sans-serif",e.textBaseline="top",e.textAlign="left",e.lineWidth=2,e.strokeText(l,d.x,d.y,d.width),e.fillText(l,d.x,d.y,d.width)):B.log(`Scene.render() - no bbox for debugged node [${l}].`)}e.restore()}buildTree(e){var i,n;const o=null!==(i=e instanceof z?e.name:null)&&void 0!==i?i:e.id;return Object.assign(Object.assign({name:o,node:e,dirty:M[e.dirty]},null!==(n=e.parent)&&void 0!==n&&n.isVirtual?{virtualParentDirty:M[e.parent.dirty],virtualParent:e.parent}:{}),e.children.map(r=>this.buildTree(r)).reduce((r,a)=>{let{name:l}=a;const{node:{visible:c,opacity:d,zIndex:h,zIndexSubOrder:u},node:p,virtualParent:f}=a;(!c||d<=0)&&(l=`(${l})`),p instanceof z&&p.isLayer()&&(l=`*${l}*`);const g=[`${l??"<unknown>"}`,`z: ${h}`,u&&`zo: ${u.map(_=>"function"==typeof _?`${_()} (fn)`:_).join(" / ")}`,f&&"(virtual parent)"].filter(_=>!!_).join(" ");let y=g,b=1;for(;null!=r[y]&&b<100;)y=`${g} (${b++})`;return r[y]=a,r},{}))}buildDirtyTree(e){var i;if(e.dirty===M.NONE)return{dirtyTree:{},paths:[]};const n=e.children.map(a=>this.buildDirtyTree(a)).filter(a=>a.paths.length>0),o=null!==(i=e instanceof z?e.name:null)&&void 0!==i?i:e.id,r=0===n.length?[o]:n.map(a=>a.paths).reduce((a,l)=>a.concat(l),[]).map(a=>`${o}.${a}`);return{dirtyTree:Object.assign({name:o,node:e,dirty:M[e.dirty]},n.map(a=>a.dirtyTree).filter(a=>void 0!==a.dirty).reduce((a,l)=>{var c;return a[null!==(c=l.name)&&void 0!==c?c:"<unknown>"]=l,a},{})),paths:r}}}return s.className="Scene",s})();function Cp(s){return new Promise(t=>{setTimeout(()=>t(void 0),s)})}class Ip{constructor(){this.cache=new WeakMap}call(t,...e){let i,n=this.cache.get(t);const o=()=>{try{const r=t(...e);return n&&null!=i&&n.set(i,r),r}catch(r){return void B.warnOnce("User callback errored, ignoring",r)}};try{i=JSON.stringify(e)}catch{return o()}return null==n&&(n=new Map,this.cache.set(t,n)),n.has(i)?n.get(i):o()}invalidateCache(){this.cache=new WeakMap}}class Pp{constructor(){this.available=!0,this.acquireQueue=[]}acquire(t){return new Promise(e=>{this.acquireQueue.push([t,e]),this.available&&this.dispatchNext()})}acquireImmediately(t){return R(this,void 0,void 0,function*(){return!!this.available&&(yield this.acquire(t),!0)})}waitForClearAcquireQueue(){return R(this,void 0,void 0,function*(){return this.acquire(()=>R(this,void 0,void 0,function*(){}))})}dispatchNext(){var t,e;return R(this,void 0,void 0,function*(){this.available=!1;let[i,n]=null!==(t=this.acquireQueue.shift())&&void 0!==t?t:[];for(;i;){try{yield i(),n?.()}catch(o){B.error("mutex callback error",o),n?.()}[i,n]=null!==(e=this.acquireQueue.shift())&&void 0!==e?e:[]}this.available=!0})}}function mc(s,t){let n,o,e=0,i=!1;const r=()=>i,a=()=>{i=!1,o?.(),o=void 0,n=void 0,e>0&&s(l)},l=()=>{const c=e;e=0,i=!0;const d=t({count:c});d?d.then(a).catch(a):a()};return{schedule(c){0===e&&!r()&&s(l,c),e++},await(){return R(this,void 0,void 0,function*(){if(r())for(null==n&&(n=new Promise(c=>{o=c}));r();)yield n})}}}class mn{static init(t){typeof ResizeObserver<"u"?this.resizeObserver=new ResizeObserver(e=>{for(const i of e){const{width:n,height:o}=i.contentRect;this.checkSize(this.elements.get(i.target),i.target,n,o)}}):this.pollerHandler=window.setInterval(()=>{this.elements.forEach((i,n)=>{this.checkClientSize(n,i)})},100),this.ready=!0,this.documentReady="loading"!==t.readyState,!this.documentReady&&(this.readyEventFn=()=>{const e="loading"!==t.readyState,i=this.documentReady;if(this.documentReady=e,e&&e!==i){for(const[n,o]of this.queuedObserveRequests)this.observe(n,o);this.queuedObserveRequests.length=0}},t.addEventListener("DOMContentLoaded",this.readyEventFn))}static destroy(){var t;null!=this.pollerHandler&&(clearInterval(this.pollerHandler),this.pollerHandler=void 0),this.readyEventFn&&(document.removeEventListener("DOMContentLoaded",this.readyEventFn),this.readyEventFn=void 0),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),this.resizeObserver=void 0,this.ready=!1}static checkSize(t,e,i,n){t&&(!t.size||i!==t.size.width||n!==t.size.height)&&(t.size={width:i,height:n},t.cb(t.size,e))}static observe(t,e){this.ready||this.init(t.ownerDocument),this.documentReady?(this.unobserve(t,!1),this.resizeObserver&&this.resizeObserver.observe(t),this.elements.set(t,{cb:e})):this.queuedObserveRequests.push([t,e])}static unobserve(t,e=!0){this.resizeObserver&&this.resizeObserver.unobserve(t),this.elements.delete(t),this.queuedObserveRequests=this.queuedObserveRequests.filter(([i])=>i===t),e&&0===this.elements.size&&this.destroy()}static checkClientSize(t,e){this.checkSize(e,t,t.clientWidth?t.clientWidth:0,t.clientHeight?t.clientHeight:0)}}mn.elements=new Map,mn.ready=!1,mn.documentReady=!1,mn.queuedObserveRequests=[];class vc{constructor(){this.range="tooltip"}}m([S(Ws("tooltip","node")),v("design:type",String)],vc.prototype,"range",void 0);var K=function(s){return s[s.FULL=0]="FULL",s[s.PROCESS_DATA=1]="PROCESS_DATA",s[s.PERFORM_LAYOUT=2]="PERFORM_LAYOUT",s[s.SERIES_UPDATE=3]="SERIES_UPDATE",s[s.TOOLTIP_RECALCULATION=4]="TOOLTIP_RECALCULATION",s[s.SCENE_RENDER=5]="SCENE_RENDER",s[s.NONE=6]="NONE",s}(K||{});class Dr{constructor(t){this.type=t,this.continuousDomain=[1/0,-1/0],this.discreteDomain=new Set}extend(t){"discrete"===this.type?this.discreteDomain.add(t):"continuous"===this.type&&(this.continuousDomain[0]>t&&(this.continuousDomain[0]=t),this.continuousDomain[1]<t&&(this.continuousDomain[1]=t))}getDomain(){if("discrete"===this.type)return this.discreteDomain;if("continuous"===this.type)return this.continuousDomain;throw new Error("AG Charts - Unsupported data domain type: "+this.type)}}function Jt(s,t){var e;const i=function Yp(s){if(void 0===s)return[];let[t,e]=s;return t=+t,e=+e,0===t&&0===e?[0,1]:t===1/0&&e===-1/0?[]:(t===1/0&&(t=0),e===-1/0&&(e=0),ee(t)&&ee(e)?[t,e]:[])}(s);if(0===i.length)return i;let[n,o]=i;if(n===o){const[r,a]=null!==(e=t?.calculatePadding(n,o))&&void 0!==e?e:[1,1];n-=r,o+=a}return[n,o]}const vn=Symbol("invalid");class bc{constructor(t){const{props:e,mode:i="standalone"}=t;this.mode=i;let n=!0;for(const a of e){if("key"===a.type&&!n)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===a.type&&n&&(n=!1)}this.opts=Object.assign({dataVisible:!0},t),this.keys=e.filter(a=>"key"===a.type).map((a,l)=>Object.assign(Object.assign({},a),{index:l,missing:0})),this.values=e.filter(a=>"value"===a.type).map((a,l)=>Object.assign(Object.assign({},a),{index:l,missing:0})),this.aggregates=e.filter(a=>"aggregate"===a.type).map((a,l)=>Object.assign(Object.assign({},a),{index:l})),this.groupProcessors=e.filter(a=>"group-value-processor"===a.type).map((a,l)=>Object.assign(Object.assign({},a),{index:l})),this.propertyProcessors=e.filter(a=>"property-value-processor"===a.type).map((a,l)=>Object.assign(Object.assign({},a),{index:l})),this.reducers=e.filter(a=>"reducer"===a.type).map((a,l)=>Object.assign(Object.assign({},a),{index:l})),this.processors=e.filter(a=>"processor"===a.type).map((a,l)=>Object.assign(Object.assign({},a),{index:l}));for(const a of this.values)if(null==a.property)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(a)}`);const o=({matchGroupIds:a})=>{for(const l of a??[])if(!this.values.some(c=>c.groupId===l))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${l}).`)},r=({matchIds:a})=>{for(const l of a??[])if(!this.values.some(c=>{var d;return null===(d=c.ids)||void 0===d?void 0:d.some(([h,u])=>h===l[0]&&u===l[1])}))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${l}).`)};for(const a of[...this.groupProcessors,...this.aggregates])r(a),o(a)}resolveProcessedDataIndexById(t,e){var i;const{index:n,def:o}=null!==(i=this.resolveProcessedDataDefById(t,e))&&void 0!==i?i:{};return{index:n,def:o}}resolveProcessedDataIndicesById(t,e){return this.resolveProcessedDataDefsById(t,e).map(({index:i,def:n})=>({index:i,def:n}))}resolveProcessedDataDefById(t,e){return this.resolveProcessedDataDefsById(t,e)[0]}resolveProcessedDataDefsByIds(t,e){const i=[];for(const n of e)i.push([n,this.resolveProcessedDataDefsById(t,n)]);return i}resolveProcessedDataDefsValues(t,{keys:e,values:i}){const n={};for(const[o,[{index:r,def:a}]]of t)n[o]=("key"===a.type?e:i)[r];return n}resolveProcessedDataDefsById(t,e){const{keys:i,values:n,aggregates:o,groupProcessors:r,reducers:a}=this,l=h=>{const{ids:u,scopes:p}=h;return!(null==u||null!=t&&!p?.some(f=>f===t.id))&&u.some(([f,g])=>f===t.id&&("string"==typeof e?g===e:e.test(g)))},c=[i,n,o,r,a],d=[];for(const h of c)d.push(...h.filter(l).map(u=>({index:u.index,def:u})));if(d.length>0)return d;throw new Error(`AG Charts - didn't find property definition for [${e}, ${t.id}]`)}getDomain(t,e,i="value",n){var o,r,a,l;let c,d;try{c=this.resolveProcessedDataIndicesById(t,e)}catch(p){if("string"!=typeof e&&/didn't find property definition/.test(p.message))return[];throw p}switch(i){case"key":d="keys";break;case"value":d="values";break;case"aggregate":d="aggValues";break;case"group-value-processor":d="groups";break;default:return[]}const h=null!==(r=null===(o=n.domain[d])||void 0===o?void 0:o[c[0].index])&&void 0!==r?r:[];if(1===c.length)return h;const u=[...h];for(const p of c.slice(1))ss(null!==(l=null===(a=n.domain[d])||void 0===a?void 0:a[p.index])&&void 0!==l?l:[],u);return u}processData(t){const{opts:{groupByKeys:e,groupByFn:i},aggregates:n,groupProcessors:o,reducers:r,processors:a,propertyProcessors:l}=this,c=performance.now();for(const u of[...this.keys,...this.values])u.missing=0;if(e&&0===this.keys.length)return;let d=this.extractData(t);e?d=this.groupData(d):i&&(d=this.groupData(d,i(d))),o.length>0&&this.postProcessGroups(d),n.length>0&&this.aggregateData(d),l.length>0&&this.postProcessProperties(d),r.length>0&&this.reduceData(d),a.length>0&&this.postProcessData(d);for(const u of[...this.keys,...this.values])t.length>0&&u.missing>=t.length&&B.warnOnce(`the key '${u.property}' was not found in any data element.`);const h=performance.now();return d.time=h-c,Tt.check(!0,"data-model")&&function Wp(s){var t,e;const i=(n,o)=>{o.length>0&&(B.log(`DataModel.processData() - ${n}`),B.table(o))};if(B.log("DataModel.processData() - processedData",s),i("Key Domains",s.domain.keys),i("Group Domains",null!==(t=s.domain.groups)&&void 0!==t?t:[]),i("Value Domains",s.domain.values),i("Aggregate Domains",null!==(e=s.domain.aggValues)&&void 0!==e?e:[]),"grouped"===s.type){const n=s.data.reduce((o,r)=>{var a,l;const c=null!==(a=r.keys)&&void 0!==a?a:[],d=null!==(l=r.aggValues)&&void 0!==l?l:[],h=r.keys.map(()=>{}),u=d?.map(()=>{});return o.push(...r.values.map((p,f)=>[...0===f?c:h,...p??[],...0==f?d:u])),o},[]);i("Values",n)}else{const n=s.data.reduce((o,r)=>{var a;const l=null!==(a=r.aggValues)&&void 0!==a?a:[];return o.push([...r.keys,...r.values,...l]),o},[]);i("Values",n)}}(d),d}valueGroupIdxLookup({matchGroupIds:t,matchIds:e}){return this.values.map((i,n)=>({def:i,index:n})).filter(({def:i})=>!(t&&(null==i.groupId||!t.includes(i.groupId)))&&(!e||null!=i.ids&&e.some(([n,o])=>{var r;return null===(r=i.ids)||void 0===r?void 0:r.some(([a,l])=>a===n&&l===o)}))).map(({index:i})=>i)}valueIdxLookup(t,e){const i=null==t||0===t.length,n=l=>null==l||(i===(null==l||0===l.length)||l?.some(h=>t.includes(h))),o="string"==typeof e?e:e.id,a=this.values.findIndex(l=>{var c;return n(l.scopes)&&((null===(c=l.ids)||void 0===c?void 0:c.some(d=>(([l,c])=>n([l])&&c===o)(d)))||l.property===o||l.id===o)});if(a>=0)return a;throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(e)} in scope(s) ${JSON.stringify(t)}`)}extractData(t){var e;const{keys:i,values:n,opts:{dataVisible:o}}=this,{dataDomain:r,processValue:a,scopes:l,allScopesHaveSameDefs:c}=this.initDataDomainProcessor(),d=new Array(o?t.length:0);let h=0,u=0;for(const f of t){const g=l.size>0?new Set(l):void 0,y=o?new Array(i.length):void 0;let _,b=0;for(const O of i){if(_=a(O,f,_),_===vn)break;y&&(y[b++]=_)}if(_===vn)continue;const x=o&&n.length>0?new Array(n.length):void 0;let E,k=0;for(const O of n)if(E=a(O,f,E),E===vn){if(c)break;for(const A of null!==(e=O.scopes)&&void 0!==e?e:l)g?.delete(A);if(k++,0===g?.size)break}else x&&(x[k++]=E);if((E!==vn||!c)&&0!==g?.size&&o){const O={datum:f,keys:y,values:x};!c&&g&&g.size<l.size&&(u++,O.validScopes=[...g]),d[h++]=O}}d.length=h;const p=f=>{const g=r.get(f).getDomain();return Array.isArray(g)&&g[0]>g[1]?[]:[...g]};return{type:"ungrouped",input:{count:t.length},data:d,domain:{keys:i.map(f=>p(f)),values:n.map(f=>p(f))},defs:{allScopesHaveSameDefs:c,keys:i,values:n},partialValidDataCount:u,time:0}}groupData(t,e){var i,n,o,r;const a=new Map;for(const h of t.data){const{keys:u,values:p,datum:f,validScopes:g}=h,y=e?e(h):u,b=y.map(t=>null==t||"number"==typeof t||"string"==typeof t||"boolean"==typeof t?t:"object"==typeof t?JSON.stringify(t):t).join("-");if(a.has(b)){const _=a.get(b);if(_.values.push(p),_.datum.push(f),null!=g)for(let x=0;x<(null!==(n=null===(i=_.validScopes)||void 0===i?void 0:i.length)&&void 0!==n?n:0);x++){const k=null===(o=_.validScopes)||void 0===o?void 0:o[x];g.some(E=>E===k)||null===(r=_.validScopes)||void 0===r||r.splice(x,1)}}else a.set(b,{keys:y,values:[p],datum:[f],validScopes:g})}const l=new Array(a.size),c=new Array(a.size);let d=0;for(const[,{keys:h,values:u,datum:p,validScopes:f}]of a.entries())0!==f?.length&&(c[d]=h,l[d++]={keys:h,values:u,datum:p,validScopes:f});return Object.assign(Object.assign({},t),{type:"grouped",data:l,domain:Object.assign(Object.assign({},t.domain),{groups:c})})}aggregateData(t){var e,i,n,o,r,a,l,c;const{aggregates:d}=this;if(!d)return;const h=d.map(()=>[1/0,-1/0]),u=d.map(y=>this.valueGroupIdxLookup(y)),p=d.map(y=>y.aggregateFunction),f=d.map(y=>y.groupAggregateFunction),g=d.map(y=>y.finalFunction);for(const y of t.data){let{values:b}=y;const{validScopes:_}=y;null!==(e=y.aggValues)&&void 0!==e||(y.aggValues=new Array(u.length)),"ungrouped"===t.type&&(b=[b]);let x=0;for(const k of u){if(null!==(i=_?.some(D=>{var L;return null===(L=d[x].matchScopes)||void 0===L?void 0:L.some(T=>D===T)}))&&void 0!==i&&!i){x++;continue}let O=null!==(o=null===(n=f[x])||void 0===n?void 0:n.call(f))&&void 0!==o?o:ss([]);for(const D of b){const L=k.map(N=>D[N]),T=p[x](L,y.keys);T&&(O=null!==(a=null===(r=f[x])||void 0===r?void 0:r.call(f,T,O))&&void 0!==a?a:ss(T,O))}const A=(null!==(c=null===(l=g[x])||void 0===l?void 0:l.call(g,O))&&void 0!==c?c:O).map(D=>{return s=D,Number.isInteger(s)?s:Math.abs(s)>1e4?Math.trunc(s):Math.round(1e4*s)/1e4;var s});ss(A,h[x]),y.aggValues[x++]=A}}t.domain.aggValues=h}postProcessGroups(t){var e,i,n,o,r;const{groupProcessors:a}=this;if(!a)return;const l=new Set,c=new Map,d=new Map,h=new Map;for(const p of a){const f=this.valueGroupIdxLookup(p);d.set(p,f),h.set(p,p.adjust());for(const g of f){const y=this.values[g];l.add(g),c.set(g,new Dr("category"===y.valueType?"discrete":"continuous"))}}const u=p=>{var f;for(const g of l)null===(f=c.get(g))||void 0===f||f.extend(p[g])};for(const p of t.data){for(const f of a){if(null!==(i=null===(e=p.validScopes)||void 0===e?void 0:e.some(_=>{var x;return null===(x=f.matchScopes)||void 0===x?void 0:x.some(k=>_===k)}))&&void 0!==i&&!i)continue;const y=null!==(n=d.get(f))&&void 0!==n?n:[],b=null!==(r=null===(o=h.get(f))||void 0===o?void 0:o())&&void 0!==r?r:()=>{};if("grouped"!==t.type)p.values&&b(p.values,y);else for(const _ of p.values)_&&b(_,y)}if("grouped"===t.type)for(const f of p.values)u(f);else u(p.values)}for(const[p,f]of c)t.domain.values[p]=[...f.getDomain()]}postProcessProperties(t){const{propertyProcessors:e}=this;if(e)for(const{adjust:i,property:n,scopes:o}of e)i()(t,this.valueIdxLookup(o??[],n))}reduceData(t){var e,i,n;const{reducers:o}=this,r=o.map(c=>c.scopes),a=o.map(c=>c.reducer()),l=o.map(c=>c.initialValue);for(const c of t.data){let d=0;for(const h of a)null===(i=null===(e=c.validScopes)||void 0===e?void 0:e.some(p=>{var f;return null===(f=r[d])||void 0===f?void 0:f.some(g=>p===g)}))||void 0===i||i?(l[d]=h(l[d],c),d++):d++}for(let c=0;c<l.length;c++)null!==(n=t.reduced)&&void 0!==n||(t.reduced={}),t.reduced[o[c].property]=l[c]}postProcessData(t){var e;const{processors:i}=this;for(const n of i)null!==(e=t.reduced)&&void 0!==e||(t.reduced={}),t.reduced[n.property]=n.calculate(t)}initDataDomainProcessor(){var t;const{keys:e,values:i}=this,n=new Set;for(const p of i)for(const f of null!==(t=p.scopes)&&void 0!==t?t:[])n.add(f);const o=n.size,r=new Map,a=new Map;let l=!0;const c=(p,f,g=r)=>{var y;"category"===f?g.set(p,new Dr("discrete")):(g.set(p,new Dr("continuous")),l&&(l=(null!==(y=p.scopes)&&void 0!==y?y:[]).length===o))},d=()=>{e.forEach(p=>c(p,p.valueType)),i.forEach(p=>c(p,p.valueType))};d();const h=this.buildAccessors(...e,...i);return{dataDomain:r,processValue:(p,f,g)=>{var y,b,_,x;let O,E=!1;if(p.property in h){try{O=h[p.property](f)}catch{}E=void 0!==O}else E=p.property in f,O=E?f[p.property]:p.missingValue;if(null!=p.forceValue&&(O=E&&Xn(O)?-1*p.forceValue:p.forceValue,E=!0),!E&&!("missingValue"in p)&&p.missing++,r.has(p)||d(),E&&null!==(b=null===(y=p.validation)||void 0===y?void 0:y.call(p,O,f))&&void 0!==b&&!b){if(!("invalidValue"in p))return vn;O=p.invalidValue}return p.processor&&(a.has(p)||a.set(p,p.processor()),O=null===(_=a.get(p))||void 0===_?void 0:_(O,g!==vn?g:void 0)),null===(x=r.get(p))||void 0===x||x.extend(O),O},initDataDomain:d,scopes:n,allScopesHaveSameDefs:l}}buildAccessors(...t){const e={};if("integrated"===this.mode)return e;for(const i of t){if(!(i.property.indexOf(".")>=0||i.property.indexOf("[")>=0))continue;let o;o=i.property.startsWith("[")?`return datum${i.property};`:`return datum.${i.property};`,e[i.property]=new Function("datum",o)}return e}}class xc{constructor(t){this.mode=t,this.debug=Tt.create(!0,"data-model"),this.requested=[],this.status="setup"}request(t,e,i){return R(this,void 0,void 0,function*(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");return new Promise((n,o)=>{this.requested.push({id:t,opts:i,data:e,resultCb:n,reject:o})})})}execute(){return R(this,void 0,void 0,function*(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const t=this.mergeRequested();this.debug("DataController.execute() - merged",t);const e=Tt.check(!0,"data-model");e&&(window.processedData=[]);for(const{opts:i,data:n,resultCbs:o,rejects:r,ids:a}of t)try{const l=new bc(Object.assign(Object.assign({},i),{mode:this.mode})),c=l.processData(n);e&&window.processedData.push(c),c&&0===c.partialValidDataCount?o.forEach(d=>d({dataModel:l,processedData:c})):c?this.splitResult(l,c,a,o):r.forEach(d=>d(new Error("AG Charts - no processed data generated")))}catch(l){r.forEach(c=>c(l))}})}mergeRequested(){const t=[],e=a=>a.filter(l=>"key"===l.type).map(l=>l.property).join(";"),i=({opts:a,data:l})=>c=>c[0].data===l&&c[0].opts.groupByKeys===a.groupByKeys&&c[0].opts.dataVisible===a.dataVisible&&c[0].opts.groupByFn===a.groupByFn&&e(c[0].opts.props)===e(a.props),n=a=>l=>{var c;if(l.type!==a.type)return!1;const d=null!==(c=Ue(l,a))&&void 0!==c?c:{};return delete d.scopes,delete d.id,delete d.ids,0===Object.keys(d).length},o=a=>Object.assign(Object.assign({},a[0]),{props:a.reduce((l,c)=>{var d,h,u,p,f,g;for(const y of c.props){null!=y.id&&(null!==(d=y.ids)&&void 0!==d||(y.ids=[]),null===(h=y.scopes)||void 0===h||h.forEach(_=>{var x;return null===(x=y.ids)||void 0===x?void 0:x.push([_,y.id])}));const b=l.find(n(y));b?(null!==(u=b.scopes)&&void 0!==u||(b.scopes=[]),b.scopes.push(...null!==(p=y.scopes)&&void 0!==p?p:[]),("key"===b.type||"value"===b.type)&&(null===(f=b.ids)||void 0===f||f.push(...null!==(g=y.ids)&&void 0!==g?g:[]))):l.push(y)}return l},[])});for(const a of this.requested){const l=t.find(i(a));l?l.push(a):t.push([a])}return t.map(a=>({ids:a.map(({id:l})=>l),resultCbs:a.map(({resultCb:l})=>l),rejects:a.map(({reject:l})=>l),data:a[0].data,opts:o(a.map(({opts:l})=>l))}))}splitResult(t,e,i,n){for(let o=0;o<i.length;o++){const r=i[o];(0,n[o])({dataModel:t,processedData:Object.assign(Object.assign({},e),{data:e.data.filter(({validScopes:l})=>null==l||l.some(c=>c===r))})})}}}class zp{constructor(t){this.getSeries=t}}class us{constructor(){this.listeners=new Qs}addListener(t,e,i){return this.listeners.addListener(t,e,i)}removeListener(t){this.listeners.removeListener(t)}}const Sc=[!0,"animation"];class _c extends us{constructor(t,e){super(),this.interactionManager=t,this.chartUpdateMutex=e,this.defaultDuration=1e3,this.batch=new kc,this.debug=Tt.create(...Sc),this.isPlaying=!1,this.requestId=null,this.skipAnimations=!1}animate(t){var e,i,{disableInteractions:n=!0,immutable:o=!0}=t,r=le(t,["disableInteractions","immutable"]);const{batch:a}=this;try{if(null!=r.id&&a.controllers.has(r.id)){if(!o)return a.controllers.get(r.id).reset(r);a.controllers.get(r.id).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${r.id}`),this.batch.skip()}}catch(d){return void this.failsafeOnError(d)}const l=null!==(e=r.id)&&void 0!==e?e:Math.random().toString(),c=this.isSkipped();return c&&this.debug("AnimationManager - skipping animation"),new sl(Object.assign(Object.assign({},r),{id:l,skip:c,autoplay:!!this.isPlaying&&r.autoplay,duration:null!==(i=r.duration)&&void 0!==i?i:this.defaultDuration,onPlay:d=>{var h;a.controllers.set(l,d),this.requestAnimation(),n&&this.interactionManager.pause("animation"),null===(h=r.onPlay)||void 0===h||h.call(d,d)},onStop:d=>{var h;a.controllers.delete(l),n&&this.interactionManager.resume("animation"),null===(h=r.onStop)||void 0===h||h.call(d,d)}}))}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");for(const t of this.batch.controllers.values())try{t.play()}catch(e){this.failsafeOnError(e)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");for(const t of this.batch.controllers.values())try{t.pause()}catch(e){this.failsafeOnError(e)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()");for(const t of this.batch.controllers.values())try{t.stop()}catch(e){this.failsafeOnError(e,!1)}}stopByAnimationId(t){var e;try{null!=t&&this.batch.controllers.has(t)&&(null===(e=this.batch.controllers.get(t))||void 0===e||e.stop())}catch(i){return void this.failsafeOnError(i)}}stopByAnimationGroupId(t){for(const e of this.batch.controllers.values())e.groupId===t&&this.stopByAnimationId(e.id)}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(t=!0){this.skipAnimations=t}isSkipped(){return this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){Tt.check(...Sc)&&this.debug("AnimationManager - skipCurrentBatch()",{stack:(new Error).stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(t){this.requestId=requestAnimationFrame(t)}requestAnimation(){if(!this.batch.isActive()||null!==this.requestId)return;let t;const e=i=>R(this,void 0,void 0,function*(){const n=()=>R(this,void 0,void 0,function*(){const o=i-(t??i);t=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.controllers.size});for(const r of this.batch.controllers.values())try{r.update(o)}catch(a){this.failsafeOnError(a)}this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:o})});this.isSkippingFrames()?yield this.chartUpdateMutex.acquireImmediately(n):yield this.chartUpdateMutex.acquire(n),this.batch.isActive()&&this.scheduleAnimationFrame(e)});this.scheduleAnimationFrame(e)}cancelAnimation(){null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(t,e=!0){B.error("Error during animation, skipping animations",t),e&&this.cancelAnimation()}startBatch(t){this.debug(`AnimationManager - startBatch() with skipAnimations=${t}.`),this.reset(),this.batch.destroy(),this.batch=new kc,!0===t&&this.batch.skip()}endBatch(){this.debug(`AnimationManager - endBatch() with ${this.batch.controllers.size} animations; skipped: ${this.batch.isSkipped()}.`),this.batch.isSkipped()&&!this.batch.isActive()&&this.batch.skip(!1)}}class kc{constructor(){this.controllers=new Map,this.skipAnimations=!1}isActive(){return this.controllers.size>0}skip(t=!0){if(!1===this.skipAnimations&&!0===t){for(const e of this.controllers.values())e.stop();this.controllers.clear()}this.skipAnimations=t}isSkipped(){return this.skipAnimations}destroy(){}}class Oc extends us{legendItemClick(t,e,i,n){this.listeners.dispatch("legend-item-click",{type:"legend-item-click",series:t,itemId:e,enabled:i,legendItemName:n})}legendItemDoubleClick(t,e,i,n,o){this.listeners.dispatch("legend-item-double-click",{type:"legend-item-double-click",series:t,itemId:e,enabled:i,legendItemName:o,numVisibleItems:n})}axisHover(t,e){this.listeners.dispatch("axis-hover",{type:"axis-hover",axisId:t,direction:e})}}class Ec{constructor(t){this.states={},this.element=t}updateCursor(t,e){delete this.states[t],null!=e&&(this.states[t]={style:e}),this.applyStates()}applyStates(){let t="default";Object.entries(this.states).reverse().slice(0,1).forEach(([e,{style:i}])=>t=i),this.element.style.cursor=t}getCursor(){return this.element.style.cursor}}class Ac extends us{constructor(){super(...arguments),this.highlightStates=new Map,this.pickedStates=new Map}updateHighlight(t,e){this.highlightStates.delete(t),null!=e&&this.highlightStates.set(t,e),this.applyHighlightStates()}getActiveHighlight(){return this.activeHighlight}updatePicked(t,e){this.pickedStates.delete(t),null!=e&&this.pickedStates.set(t,e),this.applyPickedStates()}getActivePicked(){return this.activePicked}applyHighlightStates(){const{activeHighlight:t}=this;this.activeHighlight=Array.from(this.highlightStates.values()).pop(),this.isEqual(this.activeHighlight,t)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:t})}applyPickedStates(){this.activePicked=Array.from(this.pickedStates.values()).pop()}isEqual(t,e){return t===e||t?.series===e?.series&&t?.itemId===e?.itemId&&t?.datum===e?.datum}}const Dc=["pagehide","mousemove","mouseup"],Tc=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel"];class ci extends us{constructor(t,e,i){super(),this.eventHandler=n=>this.processEvent(n),this.mouseDown=!1,this.touchDown=!1,this.pausers={animation:0,"context-menu":0},this.rootElement=e.body,this.element=t,this.window=i;for(const n of Tc)n.startsWith("touch")?t.addEventListener(n,this.eventHandler,{passive:!0}):"wheel"===n?t.addEventListener(n,this.eventHandler,{passive:!1}):t.addEventListener(n,this.eventHandler);for(const n of Dc)this.window.addEventListener(n,this.eventHandler);ci.interactionDocuments.includes(e)||(fr(e,"\n.ag-chart-wrapper {\n    touch-action: none;\n}\n"),ci.interactionDocuments.push(e))}destroy(){for(const t of Dc)this.window.removeEventListener(t,this.eventHandler);for(const t of Tc)this.element.removeEventListener(t,this.eventHandler)}resume(t){this.pausers[t]--}pause(t){this.pausers[t]++}processEvent(t){const e=this.decideInteractionEventTypes(t);e.length>0&&this.dispatchEvent(t,e).catch(i=>B.errorOnce(i))}dispatchEvent(t,e){return R(this,void 0,void 0,function*(){const i=this.calculateCoordinates(t);if(null==i)return;const n=Object.entries(this.pausers).filter(([,o])=>o>0).map(([o])=>o);for(const o of e)this.listeners.dispatchWrapHandlers(o,(r,a,l)=>{var c;n.length>0&&(null===(c=a?.bypassPause)||void 0===c||!c.some(d=>n.includes(d)))||l.consumed||r(l)},this.buildEvent(Object.assign({type:o,event:t,pauses:n},i)))})}decideInteractionEventTypes(t){const e="drag-start";switch(t.type){case"click":return["click"];case"dblclick":return["dblclick"];case"contextmenu":return["contextmenu"];case"mousedown":return this.mouseDown=!0,this.dragStartElement=t.target,[e];case"touchstart":return this.touchDown=!0,this.dragStartElement=t.target,[e];case"touchmove":case"mousemove":return this.mouseDown||this.touchDown||this.isEventOverElement(t)?this.mouseDown||this.touchDown?["drag"]:["hover"]:[];case"mouseup":return this.mouseDown||this.isEventOverElement(t)?(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"touchend":return this.touchDown||this.isEventOverElement(t)?(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":const i=t instanceof MouseEvent&&1==(1&t.buttons);return this.mouseDown!==i?(this.mouseDown=i,[i?e:"drag-end"]):[];case"pagehide":return["page-left"];case"wheel":return["wheel"]}return[]}isEventOverElement(t){var e;return t.target===this.element||(null===(e=t.target)||void 0===e?void 0:e.parentElement)===this.element}calculateCoordinates(t){var e;if(t instanceof MouseEvent){const{clientX:i,clientY:n,pageX:o,pageY:r,offsetX:a,offsetY:l}=t;return this.fixOffsets(t,{clientX:i,clientY:n,pageX:o,pageY:r,offsetX:a,offsetY:l})}if(typeof TouchEvent<"u"&&t instanceof TouchEvent){const i=null!==(e=t.touches[0])&&void 0!==e?e:t.changedTouches[0],{clientX:n,clientY:o,pageX:r,pageY:a}=i;return Object.assign(Object.assign({},ci.NULL_COORDS),{clientX:n,clientY:o,pageX:r,pageY:a})}if(t instanceof PageTransitionEvent)return t.persisted?void 0:ci.NULL_COORDS}fixOffsets(t,e){const i=n=>{let o=0,r=0;for(;n;)o+=n.offsetLeft,r+=n.offsetTop,n=n.offsetParent;return{x:o,y:r}};if(null!=this.dragStartElement&&t.target!==this.dragStartElement){const n=i(this.dragStartElement),o=i(t.target);e.offsetX-=n.x-o.x,e.offsetY-=n.y-o.y}return e}buildEvent(t){const{type:e,event:i,clientX:n,clientY:o,pauses:r}=t;let{offsetX:a,offsetY:l,pageX:c,pageY:d}=t;if(!ee(a)||!ee(l)){const u=this.element.getBoundingClientRect();a=n-u.left,l=o-u.top}if(!ee(c)||!ee(d)){const u=this.rootElement.getBoundingClientRect();c=n-u.left,d=o-u.top}const h={type:e,offsetX:a,offsetY:l,pageX:c,pageY:d,sourceEvent:i,consumed:!1,pauses:r,consume(){h.consumed=!0}};return h}}ci.interactionDocuments=[],ci.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};class Tr{constructor(t,e){this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=t,this.destroyFns.push(e.addListener("hover",i=>this.checkExclusiveRects(i)))}getRange(){return this.tooltip.range}updateTooltip(t,e,i){var n;null==i&&(i=null===(n=this.states[t])||void 0===n?void 0:n.content),this.states[t]={content:i,meta:e},this.applyStates()}updateExclusiveRect(t,e){e?this.exclusiveAreas[t]=e:delete this.exclusiveAreas[t]}removeTooltip(t){delete this.states[t],this.applyStates()}getTooltipMeta(t){var e;return null===(e=this.states[t])||void 0===e?void 0:e.meta}destroy(){for(const t of this.destroyFns)t()}checkExclusiveRects(t){let e;for(const[i,n]of Object.entries(this.exclusiveAreas))if(n.containsPoint(t.offsetX,t.offsetY)){e=i;break}e!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=e,this.applyStates())}applyStates(){var t;const e=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states);let i,n;if(e.reverse(),e.slice(0,1).forEach(o=>{var r;const{content:a,meta:l}=null!==(r=this.states[o])&&void 0!==r?r:{};i=a,n=l}),void 0===n||void 0===i)return this.appliedState=void 0,void this.tooltip.toggle(!1);if((null===(t=this.appliedState)||void 0===t?void 0:t.content)===i){const o=this.tooltip.isVisible();this.tooltip.show(n,void 0,o)}else this.tooltip.show(n,i);this.appliedState={content:i,meta:n}}static makeTooltipMeta(t,e,i,n){var o,r,a,l;const{pageX:c,pageY:d,offsetX:h,offsetY:u}=t,f={pageX:c,pageY:d,offsetX:h,offsetY:u,event:t,showArrow:i.series.tooltip.showArrow,position:{xOffset:i.series.tooltip.position.xOffset,yOffset:i.series.tooltip.position.yOffset}},g=null!==(r=null===(o=i.yBar)||void 0===o?void 0:o.upperPoint)&&void 0!==r?r:i.midPoint;if("node"===i.series.tooltip.position.type&&g){const{x:y,y:b}=g,_=i.series.contentGroup.inverseTransformPoint(y,b),x=e.element.getBoundingClientRect();return Object.assign(Object.assign({},f),{pageX:Math.round(x.left+n.scrollX+_.x),pageY:Math.round(x.top+n.scrollY+_.y),offsetX:Math.round(_.x),offsetY:Math.round(_.y)})}return f.enableInteraction=null!==(l=null===(a=i.series.tooltip.interaction)||void 0===a?void 0:a.enabled)&&void 0!==l&&l,f}}class Nc extends us{constructor(){super(...arguments),this.axes={}}updateAxes(t){var e;const i=new Set(Object.keys(this.axes));t.forEach(n=>{var o,r,a;i.delete(n.id),null!==(o=(r=this.axes)[a=n.id])&&void 0!==o||(r[a]=new Up(n))}),i.forEach(n=>{delete this.axes[n]}),!(null===(e=this.initialZoom)||void 0===e)&&e.newZoom&&this.updateZoom(this.initialZoom.callerId,this.initialZoom.newZoom),this.initialZoom=void 0}updateZoom(t,e){0!==Object.keys(this.axes).length?(Object.values(this.axes).forEach(i=>{i.updateZoom(t,e?.[i.getDirection()])}),this.applyStates()):this.initialZoom={callerId:t,newZoom:e}}updateAxisZoom(t,e,i){var n;null===(n=this.axes[e])||void 0===n||n.updateZoom(t,i),this.applyStates()}getZoom(){let t,e;if(Object.values(this.axes).forEach(i=>{i.getDirection()===I.X?t=i.getZoom():i.getDirection()===I.Y&&(e=i.getZoom())}),t||e)return{x:t,y:e}}getAxisZoom(t){var e;return null===(e=this.axes[t])||void 0===e?void 0:e.getZoom()}getAxisZooms(){const t={};for(const[e,i]of Object.entries(this.axes))t[e]={direction:i.getDirection(),zoom:i.getZoom()};return t}applyStates(){if(!Object.values(this.axes).map(n=>n.applyStates()).some(Boolean))return;const e=this.getZoom(),i={};for(const[n,o]of Object.entries(this.axes))i[n]=o.getZoom();this.listeners.dispatch("zoom-change",Object.assign(Object.assign({type:"zoom-change"},e??{}),{axes:i}))}}class Up{constructor(t){this.states={},this.axis=t;const[e=0,i=1]=t.visibleRange;this.currentZoom={min:e,max:i},this.states.__initial__=this.currentZoom}getDirection(){return this.axis.direction}updateZoom(t,e){delete this.states[t],null!=e&&(this.states[t]=Object.assign({},e))}getZoom(){return this.currentZoom}applyStates(){var t,e;const i=this.currentZoom,n=Object.keys(this.states)[Object.keys(this.states).length-1];return this.currentZoom=Object.assign({},this.states[n]),i?.min!==(null===(t=this.currentZoom)||void 0===t?void 0:t.min)||i?.max!==(null===(e=this.currentZoom)||void 0===e?void 0:e.max)}}class Lc extends Qs{constructor(){super(...arguments),this.layoutComplete="layout-complete"}addListener(t,e){if(this.isLayoutStage(t)||this.isLayoutComplete(t))return super.addListener(t,e);throw new Error(`AG Charts - unsupported listener type: ${t}`)}dispatchPerformLayout(t,e){return this.isLayoutStage(t)?this.getListenersByType(t).reduce((i,n)=>{try{return n.handler(i)}catch(o){return B.errorOnce(o),i}},e):e}dispatchLayoutComplete(t){this.dispatch(this.layoutComplete,t)}isLayoutStage(t){return t!==this.layoutComplete}isLayoutComplete(t){return t===this.layoutComplete}}function Hp({orientation:s,bboxes:t,maxHeight:e,maxWidth:i,itemPaddingY:n=0,itemPaddingX:o=0,forceResult:r=!1}){const a="horizontal"===s,l={max:a?i:e,fn:a?u=>u.width:u=>u.height,padding:a?o:n},c={max:a?e:i,fn:a?u=>u.height:u=>u.width,padding:a?n:o};let d=0;const h=[];for(;d<t.length;){const p=Xp(t.slice(d),d,l,c,r);if(!p)return;d+=p.processedBBoxCount,h.push(p.pageIndices)}return function $p(s,t,e,i,n){let o=0,r=0;return{pages:s.map(l=>{"horizontal"===t&&(l=function qp(s){const t=[];for(const e of s[0])t.push([]);return s.forEach((e,i)=>{e.forEach((n,o)=>{t[o][i]=n})}),t}(l));let c=0;const d=l.map(p=>{const f=p.map(b=>(c=Math.max(b,c),e[b]));let g=0,y=0;return f.forEach(b=>{g+=b.height+i,y=Math.max(y,b.width+n)}),{indices:p,bboxes:f,columnHeight:Math.ceil(g),columnWidth:Math.ceil(y)}});let h=0,u=0;return d.forEach(p=>{h+=p.columnWidth,u=Math.max(u,p.columnHeight)}),o=Math.max(h,o),r=Math.max(u,r),{columns:d,startIndex:l[0][0],endIndex:c,pageWidth:h,pageHeight:u}}),maxPageWidth:o,maxPageHeight:r}}(h,s,t,n,o)}function Xp(s,t,e,i,n){let r=function Zp(s,t){const e=s.length;let i=0;for(let n=0;n<e;n++)if(i+=t.fn(s[n])+t.padding,i>t.max)return e/n<2?Math.ceil(e/2):n;return e}(s,e);if(r<1){if(!n)return;r=1}for(let a=r;a>=1;a--){const l=Kp(s,t,a,e,i,n);if(null==l&&a<=1)return;if(null!=l){if("number"!=typeof l)return{processedBBoxCount:l.length*l[0].length,pageIndices:l};if(l<=1)return;a=l<a&&l>1?l:a}}}function Kp(s,t,e,i,n,o){var r;const a=[];let l=0,c=0,d=[];const h=[];for(let u=0;u<s.length;u++){const p=(u+e)%e;0===p&&(l+=c,c=0,d.length>0&&a.push(d),d=[]);const f=i.fn(s[u])+i.padding;if(h[p]=Math.max(null!==(r=h[p])&&void 0!==r?r:0,f),c=Math.max(c,n.fn(s[u])+n.padding),l+c>n.max&&(!o||a.length>0)){d=[];break}if(h.reduce((_,x)=>_+x,0)>i.max&&!o)return h.length<e?h.length:void 0;d.push(u+t)}return d.length>0&&a.push(d),a.length>0?a:void 0}let Jp=(()=>{class s extends ve{updatePath(){super.applyPath(this.size/4.2,s.moves)}}return s.className="Cross",s.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}],s})(),Mc=(()=>{class s extends ve{updatePath(){super.applyPath(this.size/2,s.moves)}}return s.className="Diamond",s.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}],s})(),Qp=(()=>{class s extends ve{rad(e){return e/180*Math.PI}updatePath(){const{x:e,path:i,size:n,rad:o}=this,r=n/4,a=this.y+r/2;i.clear(),i.arc(e-r,a-r,r,o(130),o(330)),i.arc(e+r,a-r,r,o(220),o(50)),i.lineTo(e,a+r),i.closePath()}}return s.className="Heart",s})(),tf=(()=>{class s extends ve{updatePath(){super.applyPath(this.size/3,s.moves)}}return s.className="Plus",s.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}],s})(),ps=(()=>{class s extends ve{updatePath(){const{path:e,x:i,y:n}=this,o=this.size/2;e.clear(),e.moveTo(this.align(i-o),this.align(n-o)),e.lineTo(this.align(i+o),this.align(n-o)),e.lineTo(this.align(i+o),this.align(n+o)),e.lineTo(this.align(i-o),this.align(n+o)),e.closePath()}}return s.className="Square",s})(),bn=(()=>{class s extends ve{updatePath(){super.applyPath(1.1*this.size,s.moves)}}return s.className="Triangle",s.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}],s})();const Rc={circle:Js,cross:Jp,diamond:Mc,heart:Qp,plus:tf,square:ps,triangle:bn},ef=Object.keys(Rc);function wc(s){return ef.includes(s)}function Oi(s=ps){return wc(s)?Rc[s]:"function"==typeof s?s:ps}class ne extends z{constructor(){super({name:"markerLabelGroup"}),this.label=new W,this._marker=new ps,this._markerSize=15,this._spacing=8;const t=this.label;t.textBaseline="middle",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.y=ct.has.textMetrics?1:0,this.append([this.marker,t]),this.update()}set marker(t){this._marker!==t&&(this.removeChild(this._marker),this._marker=t,this.appendChild(t),this.update())}get marker(){return this._marker}set markerSize(t){this._markerSize!==t&&(this._markerSize=t,this.update())}get markerSize(){return this._markerSize}set spacing(t){this._spacing!==t&&(this._spacing=t,this.update())}get spacing(){return this._spacing}update(){const e=this.markerSize;this.marker.size=e,this.label.x=e/2+this.spacing}render(t){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,super.render(t)}}ne.className="MarkerLabel",m([Nt("label"),v("design:type",String)],ne.prototype,"text",void 0),m([Nt("label"),v("design:type",String)],ne.prototype,"fontStyle",void 0),m([Nt("label"),v("design:type",String)],ne.prototype,"fontWeight",void 0),m([Nt("label"),v("design:type",Number)],ne.prototype,"fontSize",void 0),m([Nt("label"),v("design:type",String)],ne.prototype,"fontFamily",void 0),m([Nt("label","fill"),v("design:type",String)],ne.prototype,"color",void 0),m([Nt("marker","fill"),v("design:type",String)],ne.prototype,"markerFill",void 0),m([Nt("marker","stroke"),v("design:type",String)],ne.prototype,"markerStroke",void 0),m([Nt("marker","strokeWidth"),v("design:type",Number)],ne.prototype,"markerStrokeWidth",void 0),m([Nt("marker","fillOpacity"),v("design:type",Number)],ne.prototype,"markerFillOpacity",void 0),m([Nt("marker","strokeOpacity"),v("design:type",Number)],ne.prototype,"markerStrokeOpacity",void 0);class xn{constructor(){this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}m([S(me),v("design:type",String)],xn.prototype,"color",void 0),m([S(gi),v("design:type",String)],xn.prototype,"fontStyle",void 0),m([S(yi),v("design:type",String)],xn.prototype,"fontWeight",void 0),m([S(C(0)),v("design:type",Number)],xn.prototype,"fontSize",void 0),m([S($t),v("design:type",String)],xn.prototype,"fontFamily",void 0);class di{constructor(){this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}}m([S(C(0)),v("design:type",Object)],di.prototype,"size",void 0),m([S(St),v("design:type",String)],di.prototype,"fill",void 0),m([S(Z(0,1)),v("design:type",Number)],di.prototype,"fillOpacity",void 0),m([S(St),v("design:type",String)],di.prototype,"stroke",void 0),m([S(C(0)),v("design:type",Number)],di.prototype,"strokeWidth",void 0),m([S(C(0,1)),v("design:type",Number)],di.prototype,"strokeOpacity",void 0);class lo{constructor(t){this.parent=t,this.shape=bn,this.size=15,this.padding=8}}m([Ht({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}}),v("design:type",Object)],lo.prototype,"shape",void 0),m([S(C(0)),v("design:type",Object)],lo.prototype,"size",void 0),m([S(C(0)),v("design:type",Number)],lo.prototype,"padding",void 0);let nf=(()=>{class s{constructor(e,i,n,o){this.chartUpdateCallback=e,this.pageUpdateCallback=i,this.interactionManager=n,this.cursorManager=o,this.id=ii(this),this.group=new z({name:"pagination"}),this.labelNode=new W,this.marker=new lo(this),this.activeStyle=new di,this.inactiveStyle=new di,this.highlightStyle=new di,this.label=new xn,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new bn,this._previousButton=new bn;const{labelNode:r}=this;r.textBaseline="middle",r.fontSize=12,r.fontFamily="Verdana, sans-serif",r.fill="black",r.y=ct.has.textMetrics?1:0,this.group.append([this.nextButton,this.previousButton,r]),this.interactionManager.addListener("click",a=>this.onPaginationClick(a)),this.interactionManager.addListener("hover",a=>this.onPaginationMouseMove(a)),this.update(),this.updateMarkers()}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(e){"horizontal"===(this._orientation=e,e)?(this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2):(this.previousButton.rotation=0,this.nextButton.rotation=Math.PI)}get orientation(){return this._orientation}set nextButton(e){this._nextButton!==e&&(this.group.removeChild(this._nextButton),this._nextButton=e,this.group.appendChild(e))}get nextButton(){return this._nextButton}set previousButton(e){this._previousButton!==e&&(this.group.removeChild(this._previousButton),this._previousButton=e,this.group.appendChild(e))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:e,padding:i}=this.marker;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+i}updateNextButtonPosition(){const e=this.labelNode.computeBBox();this.nextButton.translationX=e.x+e.width+this.marker.size/2+this.marker.padding}updateLabel(){const{currentPage:e,totalPages:i,labelNode:n,label:{color:o,fontStyle:r,fontWeight:a,fontSize:l,fontFamily:c}}=this;n.text=`${e+1} / ${i}`,n.fill=o,n.fontStyle=r,n.fontWeight=a,n.fontSize=l,n.fontFamily=c}updateMarkers(){const{nextButton:e,previousButton:i,nextButtonDisabled:n,previousButtonDisabled:o,activeStyle:r,inactiveStyle:a,highlightStyle:l,highlightActive:c}=this,d=(h,u)=>u?a:h===c?l:r;this.updateMarker(e,d("next",n)),this.updateMarker(i,d("previous",o))}updateMarker(e,i){var n;const{size:o}=this.marker;e.size=o,e.fill=i.fill,e.fillOpacity=null!==(n=i.fillOpacity)&&void 0!==n?n:1,e.stroke=i.stroke,e.strokeWidth=i.strokeWidth,e.strokeOpacity=i.strokeOpacity}enableOrDisableButtons(){const{currentPage:e,totalPages:i}=this,n=0===i,r=0===e;this.nextButtonDisabled=e===i-1||n,this.previousButtonDisabled=r||n}nextButtonContainsPoint(e,i){return!this.nextButtonDisabled&&this.nextButton.containsPoint(e,i)}previousButtonContainsPoint(e,i){return!this.previousButtonDisabled&&this.previousButton.containsPoint(e,i)}onPaginationClick(e){const{offsetX:i,offsetY:n}=e;this.nextButtonContainsPoint(i,n)?(this.incrementPage(),this.onPaginationChanged(),e.consume()):this.previousButtonContainsPoint(i,n)&&(this.decrementPage(),this.onPaginationChanged(),e.consume())}onPaginationMouseMove(e){const{offsetX:i,offsetY:n}=e;this.nextButtonContainsPoint(i,n)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(i,n)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(K.SCENE_RENDER)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const e=Oi(this.marker.shape||bn);this.previousButton=new e,this.nextButton=new e,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(K.SCENE_RENDER)}attachPagination(e){e.append(this.group)}computeBBox(){return this.group.computeBBox()}}return s.className="Pagination",s})();const sf=["horizontal","vertical"],of=j((s,t)=>gt(s,t,e=>sf.includes(e)),"expecting an orientation keyword such as 'horizontal' or 'vertical'");class Ei{constructor(){this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}}m([S(Z(0)),v("design:type",Number)],Ei.prototype,"maxLength",void 0),m([S(me),v("design:type",String)],Ei.prototype,"color",void 0),m([S(gi),v("design:type",String)],Ei.prototype,"fontStyle",void 0),m([S(yi),v("design:type",String)],Ei.prototype,"fontWeight",void 0),m([S(C(0)),v("design:type",Number)],Ei.prototype,"fontSize",void 0),m([S($t),v("design:type",String)],Ei.prototype,"fontFamily",void 0),m([S(Ke),v("design:type",Function)],Ei.prototype,"formatter",void 0);class co{constructor(){this.size=15,this._shape=void 0,this.padding=8,this.strokeWidth=void 0}set shape(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()}get shape(){return this._shape}}m([S(C(0)),v("design:type",Object)],co.prototype,"size",void 0),m([S(C(0)),v("design:type",Number)],co.prototype,"padding",void 0),m([S(Z(0)),v("design:type",Object)],co.prototype,"strokeWidth",void 0);class fs{constructor(){this.marker=new co,this.label=new Ei,this.maxWidth=void 0,this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0}}m([S(Z(0)),v("design:type",Number)],fs.prototype,"maxWidth",void 0),m([S(C(0)),v("design:type",Object)],fs.prototype,"paddingX",void 0),m([S(C(0)),v("design:type",Object)],fs.prototype,"paddingY",void 0),m([S(nt),v("design:type",Boolean)],fs.prototype,"toggleSeriesVisible",void 0);class Cc{constructor(){this.legendItemClick=void 0,this.legendItemDoubleClick=void 0}}m([S(Ke),v("design:type",Function)],Cc.prototype,"legendItemClick",void 0);class hi{set data(t){this._data=t,this.updateGroupVisibility()}get data(){return this._data}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}constructor(t){this.ctx=t,this.id=ii(this),this.group=new z({name:"legend",layer:!0,zIndex:ut.LEGEND_ZINDEX}),this.itemSelection=rt.select(this.group,ne),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.item=new fs,this.listeners=new Cc,this.truncatedItems=new Set,this._data=[],this._enabled=!0,this.position="bottom",this.maxWidth=void 0,this.maxHeight=void 0,this.reverseOrder=void 0,this.destroyFns=[],this.spacing=20,this.characterWidths=new Map,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new nf(i=>t.updateService.update(i),i=>this.updatePageNumber(i),t.interactionManager,t.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;const e={bypassPause:["animation"]};this.destroyFns.push(t.interactionManager.addListener("click",i=>this.checkLegendClick(i),e),t.interactionManager.addListener("dblclick",i=>this.checkLegendDoubleClick(i),e),t.interactionManager.addListener("hover",i=>this.handleLegendMouseMove(i)),t.layoutService.addListener("start-layout",i=>this.positionLegend(i.shrinkRect)),()=>this.detachLegend())}destroy(){this.destroyFns.forEach(t=>t())}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,M.MINOR)}getCharacterWidths(t){const{characterWidths:e}=this;if(e.has(t))return e.get(t);const i={"...":ct.getTextSize("...",t).width};return e.set(t,i),i}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.append(this.group)}detachLegend(){var t;null===(t=this.group.parent)||void 0===t||t.removeChild(this.group)}getItemLabel(t){const{ctx:{callbackCache:e}}=this,{formatter:i}=this.item.label;return i?e.call(i,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text}performLayout(t,e){const{paddingX:i,paddingY:n,label:o,maxWidth:r,marker:{size:a,padding:l,shape:c},label:{maxLength:d=1/0,fontStyle:h,fontWeight:u,fontSize:p,fontFamily:f}}=this.item,g=[...this.data];this.reverseOrder&&g.reverse(),this.itemSelection.update(g);const y=[],b=vi(o),x=r??.8*t,k=a+l+i;if(this.itemSelection.each((w,P)=>{var V;const $=Oi(c??P.marker.shape);w.marker&&w.marker instanceof $||(w.marker=new $),w.markerSize=a,w.spacing=l,w.fontStyle=h,w.fontWeight=u,w.fontSize=p,w.fontFamily=f;const q=null!==(V=P.itemId)&&void 0!==V?V:P.id,et=(this.getItemLabel(P)??"<unknown>").replace(/\r?\n/g," ");w.text=this.truncate(et,d,x,k,b,q),y.push(w.computeBBox())}),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return!1;const E=this.size,O=this.oldSize;E[0]=t,E[1]=e,(E[0]!==O[0]||E[1]!==O[1])&&(O[0]=E[0],O[1]=E[1]);const{pages:A,maxPageHeight:D,maxPageWidth:L}=this.updatePagination(y,t,e);this.pages=A,this.maxPageSize=[L-i,D-n];const T=this.pagination.currentPage;this.pages.length<1||!this.pages[T]?this.visible=!1:(this.visible=!0,this.updatePositions(T),this.update())}truncate(t,e,i,n,o,r){const l=t.split("");let c=!1;if(t.length>e&&(t=`${t.substring(0,e)}`,c=!0),Math.floor(n+ct.getTextSize(t,o).width)>i){let h="";const u=this.getCharacterWidths(o);let p=n+u["..."];for(const f of l){if(u[f]||(u[f]=ct.getTextSize(f,o).width),p+=u[f],p>i)break;h+=f}t=h,c=!0}return c?(t+="...",this.truncatedItems.add(r)):this.truncatedItems.delete(r),t}updatePagination(t,e,i){const n=this.getOrientation(),o=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=n,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:r,maxPageHeight:a,maxPageWidth:l,paginationBBox:c,paginationVertical:d}=this.calculatePagination(t,e,i),h=r.findIndex(x=>x.endIndex>=o);this.pagination.currentPage=Math.min(Math.max(h,0),r.length-1);const{paddingX:u,paddingY:p}=this.item,y=a-p;let b=0,_=-c.y-this.item.marker.size/2;return d?_+=y+8:(b+=l-u-c.x+8,_+=(y-c.height)/2),this.pagination.translationX=b,this.pagination.translationY=_,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:a,maxPageWidth:l,pages:r}}calculatePagination(t,e,i){var n,o,r;const{paddingX:a,paddingY:l}=this.item,c=this.getOrientation(),d=["left","right"].includes(this.position);let h=this.pagination.computeBBox(),u=new U(0,0,0,0),p=[],f=0,g=0,y=0;const b=x=>{const{width:k,height:E}=x;return k===h.width&&E===h.height},_=void 0!==this.maxWidth||void 0!==this.maxHeight;do{if(y++>10){B.warn("unable to find stable legend layout.");break}h=u;const E=Hp({orientation:c,bboxes:t,maxHeight:i-(d?h.height:0),maxWidth:e-(d?0:h.width),itemPaddingY:l,itemPaddingX:a,forceResult:_});p=null!==(n=E?.pages)&&void 0!==n?n:[],f=null!==(o=E?.maxPageWidth)&&void 0!==o?o:0,g=null!==(r=E?.maxPageHeight)&&void 0!==r?r:0;const O=p.length;if(this.pagination.visible=O>1,this.pagination.totalPages=O,this.pagination.update(),u=this.pagination.computeBBox(),!this.pagination.visible)break}while(!b(u));return{maxPageWidth:f,maxPageHeight:g,pages:p,paginationBBox:h,paginationVertical:d}}updatePositions(t=0){const{item:{paddingY:e},itemSelection:i,pages:n}=this;if(n.length<1||!n[t])return;const{columns:o,startIndex:r,endIndex:a}=n[t];let l=0,c=0;const d=o.length,h=o[0].indices.length,u="horizontal"===this.getOrientation(),p=o[0].bboxes[0].height+e,f=[];i.each((g,y,b)=>{var _,x;if(b<r||b>a)return void(g.visible=!1);const k=b-r;let E=0,O=0;u?(E=k%d,O=Math.floor(k/d)):(E=Math.floor(k/h),O=k%h),g.visible=!0;const A=o[E];A&&(c=p*O,l=null!==(_=f[O])&&void 0!==_?_:0,f[O]=(null!==(x=f[O])&&void 0!==x?x:0)+A.columnWidth,g.translationX=Math.floor(l),g.translationY=Math.floor(c))})}updatePageNumber(t){const{pages:e}=this,{startIndex:i,endIndex:n}=e[t];this.paginationTrackingIndex=0===i?0:t===e.length-1?n:Math.floor((i+n)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update(K.SCENE_RENDER)}update(){const{label:{color:t},marker:e}=this.item;this.itemSelection.each((i,n)=>{var o;const r=n.marker;i.markerFill=r.fill,i.markerStroke=r.stroke,i.markerStrokeWidth=null!==(o=e.strokeWidth)&&void 0!==o?o:Math.min(2,r.strokeWidth),i.markerFillOpacity=r.fillOpacity,i.markerStrokeOpacity=r.strokeOpacity,i.opacity=n.enabled?1:.5,i.color=t})}getDatumForPoint(t,e){const i=[],n={dist:1/0,datum:void 0};for(const r of this.group.children){if(!(r.visible&&r instanceof ne))continue;const a=r.computeBBox();if(a.grow(this.item.paddingX/2,"horizontal"),a.grow(this.item.paddingY/2,"vertical"),a.containsPoint(t,e))return r.datum;const l=t-a.x-this.item.paddingX/2,c=e-a.y-this.item.paddingY/2,d=Math.pow(l,2)+Math.pow(c,2);l>=0&&c>=0&&d<n.dist&&(n.dist=d,n.datum=r.datum),i.push(a)}if(U.merge(i).containsPoint(t,e))return n.datum}computeBBox(){return this.group.computeBBox()}computePagedBBox(){const t=this.group.computeBBox();if(this.pages.length<=1)return t;const[e,i]=this.maxPageSize;return t.height=Math.max(i,t.height),t.width=Math.max(e,t.width),t}checkLegendClick(t){const{listeners:{legendItemClick:e},ctx:{dataService:i,highlightManager:n},item:{toggleSeriesVisible:o}}=this,{offsetX:r,offsetY:a}=t,l=this.computeBBox(),c=this.group.visible&&l.containsPoint(r,a),d=this.getDatumForPoint(r,a);if(!c||!d)return;const{id:h,itemId:u,enabled:p}=d,g=i.getSeries().find(b=>b.id===h);if(!g)return;t.consume();let y=p;o&&(y=!p,this.ctx.chartEventManager.legendItemClick(g,u,y,d.legendItemName)),y?n.updateHighlight(this.id,{series:g,itemId:u,datum:void 0}):n.updateHighlight(this.id),this.ctx.updateService.update(K.PROCESS_DATA,{forceNodeDataRefresh:!0}),e?.({type:"click",enabled:y,itemId:u,seriesId:g.id})}checkLegendDoubleClick(t){var e;const{listeners:{legendItemDoubleClick:i},ctx:{dataService:n},item:{toggleSeriesVisible:o}}=this,{offsetX:r,offsetY:a}=t;if("integrated"===this.ctx.mode)return;const l=this.computeBBox(),c=this.group.visible&&l.containsPoint(r,a),d=this.getDatumForPoint(r,a);if(!c||!d)return;const{id:h,itemId:u,seriesId:p}=d,f=n.getSeries(),g=f.find(y=>y.id===h);if(g){if(t.consume(),o){const y={},b=f.flatMap(x=>x.getLegendData("category"));b.forEach(x=>{var k,E;null!==(k=y[E=x.seriesId])&&void 0!==k||(y[E]=0),x.enabled&&y[x.seriesId]++});const _=b.find(x=>x.itemId===u&&x.seriesId===p);this.ctx.chartEventManager.legendItemDoubleClick(g,u,null!==(e=_?.enabled)&&void 0!==e&&e,y,_?.legendItemName)}this.ctx.updateService.update(K.PROCESS_DATA,{forceNodeDataRefresh:!0}),i?.({type:"dblclick",enabled:!0,itemId:u,seriesId:g.id})}}handleLegendMouseMove(t){var e;const{enabled:i,item:{toggleSeriesVisible:n},listeners:o}=this;if(!i)return;const r=this.computeBBox(),{pageX:a,pageY:l,offsetX:c,offsetY:d}=t,h=this.group.visible&&r.containsPoint(c,d);if(!h)return this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),void this.ctx.tooltipManager.removeTooltip(this.id);t.consume();const u=this.getDatumForPoint(c,d);if(!h||void 0===u)return this.ctx.cursorManager.updateCursor(this.id),void this.ctx.highlightManager.updateHighlight(this.id);const f=u?this.ctx.dataService.getSeries().find(g=>g.id===u?.id):void 0;u&&this.truncatedItems.has(null!==(e=u.itemId)&&void 0!==e?e:u.id)?this.ctx.tooltipManager.updateTooltip(this.id,{pageX:a,pageY:l,offsetX:c,offsetY:d,event:t,showArrow:!1},os({content:this.getItemLabel(u)})):this.ctx.tooltipManager.removeTooltip(this.id),(n||null!=o.legendItemClick||null!=o.legendItemDoubleClick)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),u?.enabled&&f?this.ctx.highlightManager.updateHighlight(this.id,{series:f,itemId:u?.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}positionLegend(t){const e=t.clone();if(!this.enabled||!this.data.length)return{shrinkRect:e};const[i,n]=this.calculateLegendDimensions(t);this.group.translationX=0,this.group.translationY=0,this.performLayout(i,n);const o=this.computePagedBBox(),r=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return t.height-o.height;default:return t.width-o.width}};if(this.visible){let a,l;switch(this.position){case"top":case"bottom":a=(t.width-o.width)/2,l=r(),e.shrink(o.height,this.position);break;default:a=r(),l=(t.height-o.height)/2,e.shrink(o.width,this.position)}this.group.translationX=Math.floor(-o.x+t.x+a),this.group.translationY=Math.floor(-o.y+t.y+l)}if(this.visible&&this.enabled&&this.data.length){e.shrink(this.spacing,this.position);const l=o.clone();l.x+=this.group.translationX,l.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,l)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:e}}calculateLegendDimensions(t){const{width:e,height:i}=t,n=e/i;let l,c;switch(this.position){case"top":case"bottom":const d=n<1?Math.min(.5,1/n*.2):.2;l=this.maxWidth?Math.min(this.maxWidth,e):e,c=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*d);break;default:const h=n>1?Math.min(.5,.25*n):.25;l=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*h),c=this.maxHeight?Math.min(this.maxHeight,i):i}return[l,c]}}hi.className="Legend",m([S(nt),v("design:type",Object)],hi.prototype,"_enabled",void 0),m([S(Xo),v("design:type",String)],hi.prototype,"position",void 0),m([S(Z(0)),v("design:type",Number)],hi.prototype,"maxWidth",void 0),m([S(Z(0)),v("design:type",Number)],hi.prototype,"maxHeight",void 0),m([S(De),v("design:type",Boolean)],hi.prototype,"reverseOrder",void 0),m([S(of),v("design:type",String)],hi.prototype,"orientation",void 0),m([S(C(0)),v("design:type",Object)],hi.prototype,"spacing",void 0);class Nr{constructor(t,e,i){this.text=void 0,this.className=t,this.parentElement=e,this.document=i}show(t){var e,i;let n=this.element;if(n||(n=this.document.createElement("div"),n.className=this.className,this.element=n),n.style.position="absolute",n.style.left=`${t.x}px`,n.style.top=`${t.y}px`,n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,this.renderer)n.innerHTML=this.renderer();else{const o=this.document.createElement("div");o.style.alignItems="center",o.style.boxSizing="border-box",o.style.display="flex",o.style.justifyContent="center",o.style.margin="8px",o.style.height="100%",o.style.font="12px Verdana, sans-serif",o.innerText=null!==(e=this.text)&&void 0!==e?e:"No data to display",n.append(o)}null===(i=this.parentElement)||void 0===i||i.append(n)}hide(){var t;null===(t=this.element)||void 0===t||t.remove(),this.element=void 0}}m([S(Ke),v("design:type",Function)],Nr.prototype,"renderer",void 0),m([S(Y),v("design:type",String)],Nr.prototype,"text",void 0);class rf{constructor(t){this.noData=new Nr("ag-chart-no-data-overlay",t,t.ownerDocument)}}class af{constructor(t){this.groups={},this.series={},this.expectedSeriesCount=1,this.mode="normal",this.rootGroup=t}setSeriesCount(t){this.expectedSeriesCount=t}requestGroup(t){var e,i,n,o;const{id:r,type:a,rootGroup:l,highlightGroup:c,annotationGroup:d,seriesGrouping:h}=t,{groupIndex:u=r}=h??{};if(null!=this.series[r])throw new Error(`AG Charts - series already has an allocated layer: ${this.series[r]}`);0===Object.keys(this.series).length&&(this.mode=this.expectedSeriesCount>=30?"aggressive-grouping":"normal"),null!==(e=(n=this.groups)[a])&&void 0!==e||(n[a]={});const p=this.lookupIdx(u);let f=this.groups[a][p];return f||(f=null!==(i=(o=this.groups[a])[p])&&void 0!==i?i:o[p]={seriesIds:[],group:this.rootGroup.appendChild(new z({name:`${a}-content`,layer:!0,zIndex:ut.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("data")})),highlight:this.rootGroup.appendChild(new z({name:`${a}-highlight`,layer:!0,zIndex:ut.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("highlight")})),annotation:this.rootGroup.appendChild(new z({name:`${a}-annotation`,layer:!0,zIndex:ut.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("annotation")}))}),this.series[r]={layerState:f,seriesConfig:t},f.seriesIds.push(r),f.group.appendChild(l),f.highlight.appendChild(c),f.annotation.appendChild(d),f.group}changeGroup(t){var e,i;const{id:n,seriesGrouping:o,type:r,rootGroup:a,highlightGroup:l,annotationGroup:c,oldGrouping:d}=t,{groupIndex:h=n}=o??{};null!==(i=null===(e=this.groups[r])||void 0===e?void 0:e[h])&&void 0!==i&&i.seriesIds.includes(n)||(null!=this.series[n]&&this.releaseGroup({id:n,seriesGrouping:d,type:r,rootGroup:a,highlightGroup:l,annotationGroup:c}),this.requestGroup(t))}releaseGroup(t){var e,i,n,o,r;const{id:a,seriesGrouping:l,rootGroup:c,highlightGroup:d,annotationGroup:h,type:u}=t,{groupIndex:p=a}=l??{};if(null==this.series[a])throw new Error(`AG Charts - series doesn't have an allocated layer: ${a}`);const f=this.lookupIdx(p),g=null!==(i=null===(e=this.groups[u])||void 0===e?void 0:e[f])&&void 0!==i?i:null===(n=this.series[a])||void 0===n?void 0:n.layerState;if(g&&(g.seriesIds=g.seriesIds.filter(y=>y!==a),g.group.removeChild(c),g.highlight.removeChild(d),g.annotation.removeChild(h)),0===g?.seriesIds.length)this.rootGroup.removeChild(g.group),this.rootGroup.removeChild(g.highlight),this.rootGroup.removeChild(g.annotation),delete this.groups[u][f],delete this.groups[u][a];else if(g?.seriesIds.length>0){const y=null===(r=this.series[null===(o=g?.seriesIds)||void 0===o?void 0:o[0]])||void 0===r?void 0:r.seriesConfig;g.group.zIndexSubOrder=y?.getGroupZIndexSubOrder("data"),g.highlight.zIndexSubOrder=y?.getGroupZIndexSubOrder("highlight"),g.annotation.zIndexSubOrder=y?.getGroupZIndexSubOrder("annotation")}delete this.series[a]}lookupIdx(t){return"normal"===this.mode?t:"string"!=typeof t||(t=Number(t.split("-").slice(-1)[0]))?Math.floor(30*Math.max(Math.min(t/this.expectedSeriesCount,1),0)):0}destroy(){for(const t of Object.values(this.groups))for(const e of Object.values(t))this.rootGroup.removeChild(e.group),this.rootGroup.removeChild(e.highlight),this.rootGroup.removeChild(e.annotation);this.groups={},this.series={}}}class lf{constructor(){this.groups={}}registerSeries({id:t,seriesGrouping:e,visible:i,type:n}){var o,r;e&&(null!==(o=(r=this.groups)[n])&&void 0!==o||(r[n]={}),this.groups[n][t]={grouping:e,visible:i})}deregisterSeries({id:t,type:e}){this.groups[e]&&delete this.groups[e][t],this.groups[e]&&0===Object.keys(this.groups[e]).length&&delete this.groups[e]}getVisiblePeerGroupIndex({type:t,seriesGrouping:e}){var i;if(!e)return{visibleGroupCount:1,index:0};const n=[...Object.entries(null!==(i=this.groups[t])&&void 0!==i?i:{}).filter(([o,r])=>r.visible).reduce((o,[r,a])=>(a.visible&&o.add(a.grouping.groupIndex),o),new Set).values()];return n.sort((o,r)=>o-r),{visibleGroupCount:n.length,index:n.indexOf(e.groupIndex)}}}class cf{constructor(t,e){this.chartLike=t,this.layoutService=e,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("layout-complete",i=>this.layoutComplete(i)),this.layoutService.addListener("start-layout",i=>this.positionPadding(i.shrinkRect)),this.layoutService.addListener("start-layout",i=>this.positionCaptions(i.shrinkRect)))}destroy(){this.destroyFns.forEach(t=>t())}layoutComplete({clipSeries:t,series:{paddedRect:e}}){const{seriesArea:i,seriesRoot:n}=this.chartLike;i.clip||t?n.setClipRectInGroupCoordinateSpace(e):n.setClipRectInGroupCoordinateSpace()}positionPadding(t){const{padding:e}=this.chartLike;return t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),{shrinkRect:t}}positionCaptions(t){var e,i,n,o;const{title:r,subtitle:a,footnote:l}=this.chartLike,c=t.clone(),d=p=>{var f;const y=null!==(f=p.lineHeight)&&void 0!==f?f:p.fontSize*W.defaultLineHeightRatio,b=t.width,_=Math.max(y,t.height/10);p.computeTextWrap(b,_)},h=(p,f)=>{const g=c.y;p.node.x=c.x+c.width/2,p.node.y=g,p.node.textBaseline="top",d(p);const y=p.node.computeBBox(),b=Math.ceil(y.y-g+y.height+f);c.shrink(b,"top")};return a&&(a.node.visible=null!==(e=a.enabled)&&void 0!==e&&e),r&&(r.node.visible=r.enabled,r.node.visible)&&h(r,null!==(i=r.spacing)&&void 0!==i?i:a?.node.visible?yt.SMALL_PADDING:yt.LARGE_PADDING),a&&a.node.visible&&h(a,null!==(n=a.spacing)&&void 0!==n?n:0),l&&(l.node.visible=l.enabled,l.node.visible&&((p,f)=>{const g=c.y+c.height;p.node.x=c.x+c.width/2,p.node.y=g,p.node.textBaseline="bottom",d(p);const y=p.node.computeBBox(),b=Math.ceil(g-y.y+f);c.shrink(b,"bottom")})(l,null!==(o=l.spacing)&&void 0!==o?o:0)),{shrinkRect:c}}}class Pc extends Qs{constructor(t){super(),this.updateCallback=t}update(t=K.FULL,{forceNodeDataRefresh:e=!1,skipAnimations:i=!1}={}){this.updateCallback(t,{forceNodeDataRefresh:e,skipAnimations:i})}dispatchUpdateComplete(t){this.dispatch("update-complete",{type:"update-complete",minRect:t})}}class Fc{constructor(){this.clip=void 0,this.padding=new Si(0)}}m([S(De),v("design:type",Boolean)],Fc.prototype,"clip",void 0);class Se extends Al{getOptions(){var t;const{queuedUserOptions:e}=this;return _t([null!==(t=e[e.length-1])&&void 0!==t?t:this.userOptions])}autoSizeChanged(t){const{style:e}=this.element;if(t){if(e.display="block",e.width="100%",e.height="100%",!this._lastAutoSize)return;this.resize(void 0,void 0,"autoSize option")}else e.display="inline-block",e.width="auto",e.height="auto"}download(t,e){this.scene.download(t,e)}get destroyed(){return this._destroyed}constructor(t,e){var i;super(),this.id=ii(this),this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this.seriesRoot=new z({name:`${this.id}-Series-root`}),this.debug=Tt.create(),this.extraDebugStats={},this.container=void 0,this.data=[],this._firstAutoSize=!0,this.padding=new Si(20),this.seriesArea=new Fc,this.title=void 0,this.subtitle=void 0,this.footnote=void 0,this.mode="standalone",this._destroyed=!1,this._destroyFns=[],this.modules={},this.legendModules={},this.processors=[],this.legends=new Map,this._pendingFactoryUpdatesCount=0,this._performUpdateNoRenderCount=0,this._performUpdateType=K.NONE,this._performUpdateSkipAnimations=!1,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new Pp,this.updateRequestors={},this.performUpdateTrigger=function Bp(s){return mc((t,e=0)=>setTimeout(t,e),s)}(({count:d})=>R(this,void 0,void 0,function*(){this._destroyed||this.updateMutex.acquire(()=>R(this,void 0,void 0,function*(){try{yield this.performUpdate(d)}catch(h){this._lastPerformUpdateError=h,B.error("update error",h)}}))})),this._axes=[],this._series=[],this.lastInteractionEvent=void 0,this.pointerScheduler=function Fp(s){return mc((t,e)=>requestAnimationFrame(t),s)}(()=>{this.lastInteractionEvent&&this.handlePointer(this.lastInteractionEvent),this.lastInteractionEvent=void 0}),this.onSeriesNodeClick=d=>{const h=Object.assign(Object.assign({},d),{type:"seriesNodeClick"});Object.defineProperty(h,"series",{enumerable:!1,get:()=>d.series}),this.fireEvent(h)},this.onSeriesNodeDoubleClick=d=>{const h=Object.assign(Object.assign({},d),{type:"seriesNodeDoubleClick"});this.fireEvent(h)},this.specialOverrides=function df(s){let t,e;if(null!=s.window)t=s.window;else if(typeof window<"u")t=window;else{if(!(typeof global<"u"))throw new Error("AG Charts - unable to resolve global window");t=global.window}if(null!=s.document)e=s.document;else if(typeof document<"u")e=document;else{if(!(typeof global<"u"))throw new Error("AG Charts - unable to resolve global document");e=global.document}return{document:e,window:t,overrideDevicePixelRatio:s.overrideDevicePixelRatio,sceneMode:s.sceneMode}}(t);const{window:n,document:o}=this.specialOverrides,r=e?.scene,a=null!==(i=e?.element)&&void 0!==i?i:o.createElement("div"),l=e?.container,c=new z({name:"root"});c.visible=!1,c.append(this.seriesRoot),this.axisGridGroup=new z({name:"Axes-Grids",layer:!0,zIndex:ut.AXIS_GRID_ZINDEX}),c.appendChild(this.axisGridGroup),this.axisGroup=new z({name:"Axes",layer:!0,zIndex:ut.AXIS_ZINDEX}),c.appendChild(this.axisGroup),this.element=a,a.classList.add("ag-chart-wrapper"),a.style.position="relative",this.scene=r??new yc(this.specialOverrides),this.scene.root=c,this.scene.container=a,this.autoSize=!0,this.chartEventManager=new Oc,this.cursorManager=new Ec(a),this.highlightManager=new Ac,this.interactionManager=new ci(a,o,n),this.zoomManager=new Nc,this.dataService=new zp(()=>this.series),this.layoutService=new Lc,this.updateService=new Pc((d=K.FULL,{forceNodeDataRefresh:h,skipAnimations:u})=>this.update(d,{forceNodeDataRefresh:h,skipAnimations:u})),this.seriesStateManager=new lf,this.seriesLayerManager=new af(this.seriesRoot),this.callbackCache=new Ip,this.animationManager=new _c(this.interactionManager,this.updateMutex),this.animationManager.skip(),this.animationManager.play(),this.processors=[new cf(this,this.layoutService)],this.tooltip=new Me(this.scene.canvas.element,o,n,o.body),this.tooltipManager=new Tr(this.tooltip,this.interactionManager),this.overlays=new rf(this.element),this.highlight=new vc,this.container=l,mn.observe(this.element,d=>this.rawResize(d)),this._destroyFns.push(this.interactionManager.addListener("click",d=>this.onClick(d)),this.interactionManager.addListener("dblclick",d=>this.onDoubleClick(d)),this.interactionManager.addListener("hover",d=>this.onMouseMove(d)),this.interactionManager.addListener("leave",d=>this.onLeave(d)),this.interactionManager.addListener("page-left",()=>this.destroy()),this.interactionManager.addListener("wheel",()=>this.disablePointer()),this.interactionManager.addListener("drag-start",()=>this.disablePointer()),this.animationManager.addListener("animation-frame",d=>{this.update(K.SCENE_RENDER)}),this.highlightManager.addListener("highlight-change",d=>this.changeHighlightDatum(d)),this.zoomManager.addListener("zoom-change",d=>this.update(K.PROCESS_DATA,{forceNodeDataRefresh:!0,skipAnimations:!0}))),this.legend=this.attachLegend("category",hi)}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);const e=new t.instanceConstructor(this.getModuleContext());this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeModule(t){var e;null===(e=this.modules[t.optionsKey])||void 0===e||e.instance.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]}attachLegend(t,e){const i=new e(this.getModuleContext());return this.legends.set(t,i),i.attachLegend(this.scene.root),i}addLegendModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);const e=this.attachLegend(t.identifier,t.instanceConstructor);this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeLegendModule(t){this.legends.delete(t.identifier),this.removeModule(t)}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}getModuleContext(){const{scene:t,animationManager:e,chartEventManager:i,cursorManager:n,highlightManager:o,interactionManager:r,tooltipManager:a,zoomManager:l,dataService:c,layoutService:d,updateService:h,seriesStateManager:u,seriesLayerManager:p,mode:f,callbackCache:g,specialOverrides:{window:y,document:b}}=this;return{window:y,document:b,scene:t,animationManager:e,chartEventManager:i,cursorManager:n,highlightManager:o,interactionManager:r,tooltipManager:a,zoomManager:l,dataService:c,layoutService:d,updateService:h,mode:f,seriesStateManager:u,seriesLayerManager:p,callbackCache:g}}destroy(t){if(this._destroyed)return;const e=t?.keepTransferableResources;let i;this._performUpdateType=K.NONE,this._destroyFns.forEach(n=>n()),this.processors.forEach(n=>n.destroy()),this.tooltipManager.destroy(),this.tooltip.destroy(),Object.values(this.legends).forEach(n=>n.destroy()),this.legends.clear(),this.overlays.noData.hide(),mn.unobserve(this.element);for(const n of Object.keys(this.modules))this.removeModule({optionsKey:n});return this.interactionManager.destroy(),this.animationManager.stop(),e?(this.scene.strip(),i={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.removeAllSeries(),this.seriesLayerManager.destroy(),this.axes.forEach(n=>n.destroy()),this.axes=[],this.callbackCache.invalidateCache(),this._destroyed=!0,i}disablePointer(t=!1){t||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent&&(this.lastInteractionEvent=void 0)}requestFactoryUpdate(t){this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(()=>R(this,void 0,void 0,function*(){yield t(),this._pendingFactoryUpdatesCount--}))}get performUpdateType(){return this._performUpdateType}get lastPerformUpdateError(){return this._lastPerformUpdateError}update(t=K.FULL,e){var i,n;const{forceNodeDataRefresh:o=!1,skipAnimations:r,seriesToUpdate:a=this.series,newAnimationBatch:l}=e??{};o&&this.series.forEach(c=>c.markNodeDataDirty());for(const c of a)this.seriesToUpdate.add(c);if(r&&(this.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),l&&(this.animationManager.isActive()?this._performUpdateSkipAnimations=!0:null!==(i=this._performUpdateSkipAnimations)&&void 0!==i||(this._performUpdateSkipAnimations=!1)),Tt.check(!0)){let c=null!==(n=(new Error).stack)&&void 0!==n?n:"<unknown>";c=c.replace(/\([^)]*/g,""),this.updateRequestors[c]=t}t<this._performUpdateType&&(this._performUpdateType=t,this.performUpdateTrigger.schedule(e?.backOffMs))}performUpdate(t){var e;return R(this,void 0,void 0,function*(){const{_performUpdateType:i,extraDebugStats:n}=this,o=[...this.seriesToUpdate];this._performUpdateType=K.NONE,this.seriesToUpdate.clear(),0===this.updateShortcutCount&&i<K.SCENE_RENDER&&this.animationManager.startBatch(this._performUpdateSkipAnimations),this.debug("Chart.performUpdate() - start",K[i]);const r={start:performance.now()};switch(i){case K.FULL:case K.PROCESS_DATA:yield this.processData(),this.disablePointer(!0),r["\u{1f3ed}"]=performance.now();case K.PERFORM_LAYOUT:if(this.checkUpdateShortcut(K.PERFORM_LAYOUT)||!this.checkFirstAutoSize(o))break;yield this.processLayout(),r["\u2316"]=performance.now();case K.SERIES_UPDATE:if(this.checkUpdateShortcut(K.SERIES_UPDATE))break;const{seriesRect:l}=this,c=[...o].map(u=>u.update({seriesRect:l}));yield Promise.all(c),r["\u{1f914}"]=performance.now();case K.TOOLTIP_RECALCULATION:if(this.checkUpdateShortcut(K.TOOLTIP_RECALCULATION))break;const d=this.tooltipManager.getTooltipMeta(this.id),h="hover"===(null===(e=d?.event)||void 0===e?void 0:e.type);i<=K.SERIES_UPDATE&&h&&this.handlePointer(d.event),r["\u2196"]=performance.now();case K.SCENE_RENDER:if(this.checkUpdateShortcut(K.SCENE_RENDER))break;n.updateShortcutCount=this.updateShortcutCount,yield this.scene.render({debugSplitTimes:r,extraDebugStats:n}),this.extraDebugStats={};case K.NONE:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=void 0,this.animationManager.endBatch()}this.updateService.dispatchUpdateComplete(this.getMinRect());const a=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round(100*(a-r.start))/100,count:t,performUpdateType:K[i]})})}checkUpdateShortcut(t){return this.updateShortcutCount>3?(B.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=t&&(this.updateShortcutCount++,!0)}checkFirstAutoSize(t){if(this.autoSize&&!this._lastAutoSize){const e=this._performUpdateNoRenderCount++,i=10*(2^e);if(e<8)return this.update(K.PERFORM_LAYOUT,{seriesToUpdate:t,backOffMs:i}),this.debug("Chart.checkFirstAutoSize() - backing off until first size update",i),!1;this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0}set axes(t){const e=new Set;this._axes.forEach(i=>{i.detachAxis(this.axisGroup,this.axisGridGroup),e.add(i)}),this._axes=t.filter(i=>!i.linkedTo).concat(t.filter(i=>i.linkedTo)),this._axes.forEach(i=>{i.attachAxis(this.axisGroup,this.axisGridGroup),e.delete(i)}),this.zoomManager.updateAxes(this._axes),e.forEach(i=>i.destroy())}get axes(){return this._axes}set series(t){this.removeAllSeries(),this.seriesLayerManager.setSeriesCount(t.length),t.forEach(e=>this.addSeries(e))}get series(){return this._series}addSeries(t){const{series:e}=this;return e.indexOf(t)<0&&(e.push(t),null==t.rootGroup.parent&&this.seriesLayerManager.requestGroup(t),this.initSeries(t),!0)}initSeries(t){const e=this;t.chart={get mode(){return e.mode},get seriesRect(){return e.seriesRect},placeLabels:()=>e.placeLabels()},t.setChartData(this.data),this.addSeriesListeners(t),t.addChartEventListeners()}removeAllSeries(){this.series.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),t.destroy(),t.chart=void 0}),this._series=[]}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}updateAllSeriesListeners(){this.series.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(t)})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(e=>e.axes[t.direction]===t)})}assignAxesToSeries(){const t={};this.axes.forEach(e=>{var i;const n=e.direction;(null!==(i=t[n])&&void 0!==i?i:t[n]=[]).push(e)}),this.series.forEach(e=>{e.directions.forEach(i=>{const n=t[i];if(!n)return void B.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);const o=e.getKeys(i),r=this.findMatchingAxis(n,o);r?e.axes[i]=r:B.warnOnce(`no matching axis for direction [${i}] and keys [${o}]; check series and axes configuration.`)})})}findMatchingAxis(t,e){for(const i of t){const n=i.keys;if(!n.length)return i;if(e)for(const o of e)if(n.indexOf(o)>=0)return i}}rawResize(t){var e;let{width:i,height:n}=t;if(i=Math.floor(i),n=Math.floor(n),!this.autoSize||0===i&&0===n)return;const[o=0,r=0]=null!==(e=this._lastAutoSize)&&void 0!==e?e:[];o===i&&r===n||(this._lastAutoSize=[i,n],this.resize(void 0,void 0,"SizeMonitor"))}resize(t,e,i){var n,o,r,a;if(t??(t=null!==(n=this.width)&&void 0!==n?n:this.autoSize?null===(o=this._lastAutoSize)||void 0===o?void 0:o[0]:this.scene.canvas.width),e??(e=null!==(r=this.height)&&void 0!==r?r:this.autoSize?null===(a=this._lastAutoSize)||void 0===a?void 0:a[1]:this.scene.canvas.height),this.debug(`Chart.resize() from ${i}`,{width:t,height:e,stack:(new Error).stack}),t&&e&&Number.isFinite(t)&&Number.isFinite(e)&&this.scene.resize(t,e)){this.disablePointer(),this.animationManager.reset();let l=!0;this.autoSize&&this._firstAutoSize&&(l=!1,this._firstAutoSize=!1),this.update(K.PERFORM_LAYOUT,{forceNodeDataRefresh:!0,skipAnimations:l})}}processData(){return R(this,void 0,void 0,function*(){this.series.some(i=>i.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const t=new xc(this.mode),e=this.series.map(i=>i.processData(t));yield t.execute(),yield Promise.all(e),yield this.updateLegend()})}placeLabels(){const t=[],e=[];for(const o of this.series){if(!o.visible)continue;const r=o.getLabelData();r&&null!=(s=r[0])&&"object"==typeof s.point&&"object"==typeof s.label&&(e.push(r),t.push(o))}var s;const{seriesRect:i}=this,n=i&&e.length>0?function bp(s,t,e=5){const i=[];s=s.map(n=>n.slice().sort((o,r)=>r.point.size-o.point.size));for(let n=0;n<s.length;n++){const o=i[n]=[],r=s[n];if(r?.length&&r[0].label)for(let a=0,l=r.length;a<l;a++){const c=r[a],d=c.label,u=c.point.x-.5*d.width,p=c.point.y-.5*c.point.size-d.height-e,{width:f,height:g}=d;t&&!mp(t,u,p,f,g)||s.some(x=>x.some(k=>yp(k.point,u,p,f,g)))||i.some(x=>x.some(k=>nc(k,u,p,f,g)))||o.push({index:a,text:d.text,x:u,y:p,width:f,height:g,datum:c})}}return i}(e,{x:0,y:0,width:i.width,height:i.height}):[];return new Map(n.map((o,r)=>[t[r],o]))}updateLegend(){return R(this,void 0,void 0,function*(){this.legends.forEach((t,e)=>{const n=this.series.filter(o=>o.showInLegend).flatMap(o=>o.getLegendData(e));n.every(r=>"category"===r.legendType)&&this.validateCategoryLegendData(n),t.data=n})})}validateCategoryLegendData(t){const e={};t.forEach(i=>{var n,o,r,a,l;const c=null===(n=this.series.find(d=>d.id===i.seriesId))||void 0===n?void 0:n.type;c&&(null!==(o=e[c])&&void 0!==o||(e[c]={}),null!==(r=(a=e[c])[l=i.label.text])&&void 0!==r||(a[l]=new Set),null!=i.marker.fill&&e[c][i.label.text].add(i.marker.fill))});for(const i of Object.values(e))for(const[n,o]of Object.entries(i))o.size>1&&B.warnOnce(`legend item '${n}' has multiple fill colors, this may cause unexpected behaviour.`)}processLayout(){var t;return R(this,void 0,void 0,function*(){const e=this.animationRect;yield this.performLayout(),e&&!(null!==(t=this.animationRect)&&void 0!==t&&t.equals(e))&&this.animationManager.skipCurrentBatch(),this.handleNoDataOverlay(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)})}performLayout(){return R(this,void 0,void 0,function*(){this.scene.root&&(this.scene.root.visible=!0);const{width:t,height:e}=this.scene;let i={shrinkRect:new U(0,0,t,e)};return i=this.layoutService.dispatchPerformLayout("start-layout",i),i=this.layoutService.dispatchPerformLayout("before-series",i),i.shrinkRect})}pickSeriesNode(t,e,i){var n,o;const r=performance.now(),a=e?[vt.EXACT_SHAPE_MATCH]:void 0,l=[...this.series].reverse();let c;for(const d of l){if(!d.visible||!d.rootGroup.visible)continue;const{match:h,distance:u}=null!==(n=d.pickNode(t,a))&&void 0!==n?n:{};if(h&&null!=u&&((!c||c.distance>u)&&u<=(i??1/0)&&(c={series:d,distance:u,datum:h}),0===u))break}return this.extraDebugStats.pickSeriesNode=Math.round((null!==(o=this.extraDebugStats.pickSeriesNode)&&void 0!==o?o:0)+(performance.now()-r)),c}onMouseMove(t){this.lastInteractionEvent=t,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=t.offsetX,this.extraDebugStats.mouseY=t.offsetY,this.update(K.SCENE_RENDER)}onLeave(t){this.tooltip.pointerLeftOntoTooltip(t)||this.disablePointer()}handlePointer(t){const{lastPick:e,hoverRect:i}=this,{offsetX:n,offsetY:o}=t,r=(a=!1)=>{e&&this.disablePointer(a)};i?.containsPoint(n,o)?(this.handlePointerTooltip(t,r),this.handlePointerNode(t)):r()}handlePointerTooltip(t,e){const{lastPick:i,tooltip:n}=this,{range:o}=n,{offsetX:r,offsetY:a}=t;let l;"number"==typeof o&&Number.isFinite(o)&&(l=o);const c=this.pickSeriesNode({x:r,y:a},"exact"===o,l);if(!c)return this.tooltipManager.removeTooltip(this.id),void("tooltip"===this.highlight.range&&e(!0));const d="node"===this.highlight.range||!i||i.datum!==c.datum;let h;d?(h=c.series.getTooltipHtml(c.datum),"tooltip"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,c.datum)):i&&(i.event=t.sourceEvent);const y=this.tooltip.enabled&&c.series.tooltip.enabled&&("nearest"===o||null!=l||"exact"===o&&0===c.distance)&&(!d||void 0!==h),b=Tr.makeTooltipMeta(t,this.scene.canvas,c.datum,this.specialOverrides.window);y&&this.tooltipManager.updateTooltip(this.id,b,h)}handlePointerNode(t){this.checkSeriesNodeRange(t,(i,n)=>{(i.hasEventListener("nodeClick")||i.hasEventListener("nodeDoubleClick"))&&this.cursorManager.updateCursor("chart","pointer"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,n)})||(this.cursorManager.updateCursor("chart"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id))}onClick(t){this.checkSeriesNodeClick(t)?this.update(K.SERIES_UPDATE):this.fireEvent({type:"click",event:t.sourceEvent})}onDoubleClick(t){this.checkSeriesNodeDoubleClick(t)?this.update(K.SERIES_UPDATE):this.fireEvent({type:"doubleClick",event:t.sourceEvent})}checkSeriesNodeClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeClickEvent(t.sourceEvent,i))}checkSeriesNodeDoubleClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeDoubleClickEvent(t.sourceEvent,i))}checkSeriesNodeRange(t,e){const i=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1),n=i?.datum,o=n?.series.nodeClickRange;let r;"number"==typeof o&&Number.isFinite(o)&&(r=o);let a=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!0);return a?this.highlightManager.updatePicked(this.id,a.datum):this.highlightManager.updatePicked(this.id),n&&"nearest"===o?(e(n.series,n),!0):("exact"!==o&&(a=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1,r)),!!a&&!(null==r&&("exact"!==o||0!==a.distance)||(e(a.series,a.datum),0)))}changeHighlightDatum(t){var e,i;const n=new Set,{series:o,datum:r}=null!==(e=t.currentHighlight)&&void 0!==e?e:{},{series:a,datum:l}=null!==(i=t.previousHighlight)&&void 0!==i?i:{};a&&n.add(a),o&&n.add(o),a?.cursor&&l&&this.cursorManager.updateCursor(a.id),o?.cursor&&r&&this.cursorManager.updateCursor(o.id,o.cursor),this.lastPick=t.currentHighlight?{datum:t.currentHighlight}:void 0,null==o||null==a?this.update(K.SERIES_UPDATE):this.update(K.SERIES_UPDATE,{seriesToUpdate:n})}waitForUpdate(t=5e3){return R(this,void 0,void 0,function*(){const e=performance.now();for(this._pendingFactoryUpdatesCount>0&&(yield this.updateMutex.waitForClearAcquireQueue());this._performUpdateType!==K.NONE;){if(performance.now()-e>t)throw new Error("waitForUpdate() timeout reached.");yield Cp(5)}yield this.updateMutex.waitForClearAcquireQueue()})}handleNoDataOverlay(){!this.series.some(e=>e.hasData())&&this.seriesRect?this.overlays.noData.show(this.seriesRect):this.overlays.noData.hide()}getMinRect(){const t=this.series.map(e=>e.getMinRect()).filter(e=>void 0!==e);if(t.length)return new U(0,0,t.reduce((e,i)=>Math.max(e,i.width),0),t.reduce((e,i)=>Math.max(e,i.height),0))}}m([Ht({newValue(s){this.destroyed||s.appendChild(this.element)},oldValue(s){s.removeChild(this.element)}}),v("design:type",Object)],Se.prototype,"container",void 0),m([Ht({newValue(s){var t;null===(t=this.series)||void 0===t||t.forEach(e=>{e.setChartData(s)})}}),v("design:type",Object)],Se.prototype,"data",void 0),m([Ht({newValue(s){this.resize(s,void 0,"width option")}}),v("design:type",Number)],Se.prototype,"width",void 0),m([Ht({newValue(s){this.resize(void 0,s,"height option")}}),v("design:type",Number)],Se.prototype,"height",void 0),m([Ht({changeValue(s){this.autoSizeChanged(s)}}),S(nt),v("design:type",Object)],Se.prototype,"autoSize",void 0),m([Ht({newValue(s){var t;null===(t=this.scene.root)||void 0===t||t.appendChild(s.node)},oldValue(s){var t;null===(t=this.scene.root)||void 0===t||t.removeChild(s.node)}}),v("design:type",Function)],Se.prototype,"title",void 0),m([Ht({newValue(s){var t;null===(t=this.scene.root)||void 0===t||t.appendChild(s.node)},oldValue(s){var t;null===(t=this.scene.root)||void 0===t||t.removeChild(s.node)}}),v("design:type",Function)],Se.prototype,"subtitle",void 0),m([Ht({newValue(s){var t;null===(t=this.scene.root)||void 0===t||t.appendChild(s.node)},oldValue(s){var t;null===(t=this.scene.root)||void 0===t||t.removeChild(s.node)}}),v("design:type",Function)],Se.prototype,"footnote",void 0),m([S(Ws("standalone","integrated")),v("design:type",String)],Se.prototype,"mode",void 0);var gs=function(s){return s[s.Open=0]="Open",s[s.Chord=1]="Chord",s[s.Round=2]="Round",s}(gs||{});class Je extends he{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=gs.Open,this.restoreOwnStyles()}get fullPie(){return function Fs(s,t,e=1e-10){return Math.abs(s-t)<e}(Ut(this.startAngle),Ut(this.endAngle))}updatePath(){const t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===gs.Chord?t.closePath():this.type===gs.Round&&!this.fullPie&&(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new U(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(t,e){const i=this.transformPoint(t,e),n=this.computeBBox();return this.type!==gs.Open&&n.containsPoint(i.x,i.y)&&this.path.isPointInPath(i.x,i.y)}}Je.className="Arc",Je.defaultStyles=Object.assign({},J.defaultStyles,{lineWidth:1,fillStyle:null}),m([st(),v("design:type",Number)],Je.prototype,"centerX",void 0),m([st(),v("design:type",Number)],Je.prototype,"centerY",void 0),m([st(),v("design:type",Number)],Je.prototype,"radius",void 0),m([st(),v("design:type",Number)],Je.prototype,"startAngle",void 0),m([st(),v("design:type",Number)],Je.prototype,"endAngle",void 0),m([st(),v("design:type",Boolean)],Je.prototype,"counterClockwise",void 0),m([st(),v("design:type",Number)],Je.prototype,"type",void 0);const Bc=s=>{const t=H.fromString(s),[e,i,n]=H.RGBtoHSL(t.r,t.g,t.b);return{h:e,s:i,l:n,a:t.a}};class ys{constructor(){this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(Bc)}update(){const{domain:t,range:e}=this;t.length<2&&(B.warnOnce("`colorDomain` should have at least 2 values."),0===t.length?t.push(0,1):1===t.length&&t.push(t[0]+1));for(let i=1;i<t.length;i++)if(t[i-1]>=t[i]){B.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort((r,a)=>r-a);break}if(e.length<t.length)for(let i=e.length;i<t.length;i++)e.push(e.length>0?e[0]:"black");this.parsedRange=this.range.map(Bc)}convert(t){const{domain:e,range:i,parsedRange:n}=this,o=e[0],r=e[e.length-1];if(t<=o)return i[0];if(t>=r)return i[i.length-1];let c,d;if(2===e.length){const p=(t-o)/(r-o),f=1/(i.length-1);c=i.length<=2?0:Math.min(Math.floor(p*(i.length-1)),i.length-2),d=(p-c*f)/f}else{for(c=0;c<e.length-2&&!(t<e[c+1]);c++);const p=e[c];d=(t-p)/(e[c+1]-p)}return((s,t,e)=>{let i,n;if(e=Math.min(Math.max(e,0),1),Number.isNaN(s.h)&&Number.isNaN(t.h))i=0,n=0;else if(Number.isNaN(s.h))i=t.h,n=t.s;else if(Number.isNaN(t.h))i=s.h,n=s.s;else{let l=t.h;const c=t.h-s.h;c>180?l-=360:c<-180&&(l+=360),i=s.h*(1-e)+l*e,n=s.s*(1-e)+t.s*e}return H.fromHSL(i,n,s.l*(1-e)+t.l*e,s.a*(1-e)+t.a*e)})(n[c],n[c+1],d).toRgbaString()}}class ho extends J{constructor(){super(...arguments),this.direction="to-right",this.stops=void 0,this._mask=void 0}get mask(){return this._mask}set mask(t){null!=this._mask&&this.removeChild(this._mask),null!=t&&this.appendChild(t),this._mask=t}isPointInPath(t,e){var i,n;return null!==(n=null===(i=this.mask)||void 0===i?void 0:i.isPointInPath(t,e))&&void 0!==n&&n}computeBBox(){var t;return null===(t=this.mask)||void 0===t?void 0:t.computeBBox()}render(t){const{mask:e,stops:i}=this,{ctx:n,devicePixelRatio:o}=t,r=1/o,a=e?.computeTransformedBBox();if(null==e||null==i||null==a)return;e.dirtyPath&&(e.updatePath(),e.dirtyPath=!1),n.save(),n.beginPath(),e.path.draw(n),n.clip(),n.resetTransform();const l=Math.floor(a.x),c=Math.ceil(a.x+a.width),d=Math.floor(a.y),h=Math.ceil(a.y+a.height),u=new ys,[p,f]="to-right"===this.direction?[l,c]:[d,h];if(u.domain=i.map((g,y)=>p+(f-p)*y/(i.length-1)),u.range=i,u.update(),"to-right"===this.direction){const g=h-d;for(let y=l;y<=c;y+=r)n.fillStyle=u.convert(y),n.fillRect(y,d,r,g)}else{const g=c-l;for(let y=d;y<=h;y+=r)n.fillStyle=u.convert(y),n.fillRect(l,y,g,r)}n.restore()}}m([F({redraw:M.MAJOR}),v("design:type",String)],ho.prototype,"direction",void 0),m([F({redraw:M.MAJOR}),v("design:type",Array)],ho.prototype,"stops",void 0),m([F({redraw:M.MAJOR}),v("design:type",Function)],ho.prototype,"_mask",void 0);class _e extends he{constructor(){super(...arguments),this.borderPath=new Bi,this.x=0,this.y=0,this.width=10,this.height=10,this.radius=0,this.crisp=!1,this.lastUpdatePathStrokeWidth=J.defaultStyles.strokeWidth,this.effectiveStrokeWidth=J.defaultStyles.strokeWidth,this.microPixelEffectOpacity=1}isDirtyPath(){var t;return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty()||null!==(t=this.clipPath)&&void 0!==t&&t.isDirty())}updatePath(){var t,e,i;const{path:n,borderPath:o,crisp:r}=this;let{x:a,y:l,width:c,height:d,strokeWidth:h}=this;const p=1/(null!==(e=null===(t=this.layerManager)||void 0===t?void 0:t.canvas.pixelRatio)&&void 0!==e?e:1);let f=1;if(n.clear({trackChanges:!0}),o.clear({trackChanges:!0}),r&&(c<=p&&(f*=c/p),d<=p&&(f*=d/p),c=this.align(a,c),d=this.align(l,d),a=this.align(a),l=this.align(l)),h)if(c<p){const g=a+p/2;o.moveTo(g,l),o.lineTo(g,l+d),h=p,this.borderClipPath=void 0}else if(d<p){const g=l+p/2;o.moveTo(a,g),o.lineTo(a+c,g),h=p,this.borderClipPath=void 0}else if(h<c&&h<d){const g=h/2;a+=g,l+=g,c-=h,d-=h,this.borderClipPath=void 0,n.rect(a,l,c,d),o.rect(a,l,c,d)}else this.borderClipPath=null!==(i=this.borderClipPath)&&void 0!==i?i:new Bi,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(a,l,c,d),o.rect(a,l,c,d);else this.borderClipPath=void 0,n.rect(a,l,c,d);this.effectiveStrokeWidth=h,this.lastUpdatePathStrokeWidth=h,this.microPixelEffectOpacity=f}computeBBox(){const{x:t,y:e,width:i,height:n}=this;return new U(t,e,i,n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}applyFillAlpha(t){const{fillOpacity:e,microPixelEffectOpacity:i,opacity:n}=this,{globalAlpha:o}=t;t.globalAlpha=o*n*e*i}renderStroke(t){const{stroke:e,effectiveStrokeWidth:i,borderPath:n,borderClipPath:o,opacity:r,microPixelEffectOpacity:a}=this;if(e&&i){const{strokeOpacity:c,lineDash:d,lineDashOffset:h,lineCap:u,lineJoin:p}=this;o&&(o.draw(t),t.clip()),n.draw(t);const{globalAlpha:f}=t;t.strokeStyle=e,t.globalAlpha=f*r*c*a,t.lineWidth=i,d&&t.setLineDash(d),h&&(t.lineDashOffset=h),u&&(t.lineCap=u),p&&(t.lineJoin=p),t.stroke(),t.globalAlpha=f}}}_e.className="Rect",m([st(),v("design:type",Number)],_e.prototype,"x",void 0),m([st(),v("design:type",Number)],_e.prototype,"y",void 0),m([st(),v("design:type",Number)],_e.prototype,"width",void 0),m([st(),v("design:type",Number)],_e.prototype,"height",void 0),m([st(),v("design:type",Number)],_e.prototype,"radius",void 0),m([st(),v("design:type",Boolean)],_e.prototype,"crisp",void 0);class Sn extends Ot{constructor(t){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=t}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===M.NONE&&!i)return void(n&&n.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const o=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(o,0,0,o.width,o.height,this.x,this.y,this.width,this.height),super.render(t)}}m([F({redraw:M.MAJOR}),v("design:type",Number)],Sn.prototype,"x",void 0),m([F({redraw:M.MAJOR}),v("design:type",Number)],Sn.prototype,"y",void 0),m([F({redraw:M.MAJOR}),v("design:type",Number)],Sn.prototype,"width",void 0),m([F({redraw:M.MAJOR}),v("design:type",Number)],Sn.prototype,"height",void 0),m([F({redraw:M.MAJOR}),v("design:type",Number)],Sn.prototype,"opacity",void 0),Object.assign(Object.assign({},vu),op);const pf={[I.X]:["xKey"],[I.Y]:["yKey"]},ff={[I.X]:["xName"],[I.Y]:["yName"]};class Lr extends eo{constructor(t,e,i,n){super(t,e,i,n),this.xKey=n.xKey,this.yKey=n.yKey}}class ui extends zl{get contextNodeData(){return this._contextNodeData.slice()}constructor(t){var{pathsPerSeries:e=1,hasMarkers:i=!1,hasHighlightedLabels:n=!1,pathsZIndexSubOrderOffset:o=[],directionKeys:r=pf,directionNames:a=ff,datumSelectionGarbageCollection:l=!0,markerSelectionGarbageCollection:c=!0,animationResetFns:d}=t,h=le(t,["pathsPerSeries","hasMarkers","hasHighlightedLabels","pathsZIndexSubOrderOffset","directionKeys","directionNames","datumSelectionGarbageCollection","markerSelectionGarbageCollection","animationResetFns"]);super(Object.assign({directionKeys:r,directionNames:a,useSeriesGroupLayer:!0,canHaveAxes:!0},h)),this.legendItemName=void 0,this._contextNodeData=[],this.NodeClickEvent=Lr,this.highlightSelection=rt.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=rt.select(this.highlightLabel,W),this.annotationSelections=new Set,this.subGroups=[],this.subGroupId=0,this.debug=Tt.create(),this.opts={pathsPerSeries:e,hasMarkers:i,hasHighlightedLabels:n,pathsZIndexSubOrderOffset:o,directionKeys:r,directionNames:a,animationResetFns:d,datumSelectionGarbageCollection:l,markerSelectionGarbageCollection:c},this.animationState=new as("empty",{empty:{update:{target:"ready",action:u=>this.animateEmptyUpdateReady(u)}},ready:{updateData:"waiting",clear:"clearing",highlight:u=>this.animateReadyHighlight(u),highlightMarkers:u=>this.animateReadyHighlightMarkers(u),resize:u=>this.animateReadyResize(u)},waiting:{update:{target:"ready",action:u=>this.animateWaitingUpdateReady(u)}},clearing:{update:{target:"empty",action:u=>this.animateClearingUpdateEmpty(u)}}},()=>this.checkProcessedDataAnimatable())}addChartEventListeners(){this.ctx.chartEventManager.addListener("legend-item-click",t=>this.onLegendItemClick(t)),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t))}destroy(){super.destroy(),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)}update({seriesRect:t}){var e,i;return R(this,void 0,void 0,function*(){const{visible:n,_contextNodeData:o}=this,{series:r}=null!==(i=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight())&&void 0!==i?i:{},a=r?r===this:void 0,l=this.checkResize(t),c=yield this.updateHighlightSelection(a);yield this.updateSelections(n),yield this.updateNodes(c,a,n);const d=this.getAnimationData(t,o);l&&this.animationState.transition("resize",d),this.animationState.transition("update",d)})}updateSelections(t){return R(this,void 0,void 0,function*(){if((t||!this.ctx.animationManager.isSkipped())&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this._contextNodeData=yield this.createNodeData();const e=this.isProcessedDataAnimatable();this._contextNodeData.forEach(o=>{var r;null!==(r=o.animationValid)&&void 0!==r||(o.animationValid=e)}),yield this.updateSeriesGroups();const{dataModel:i,processedData:n}=this;void 0!==i&&void 0!==n&&this.dispatch("data-update",{dataModel:i,processedData:n})}yield Promise.all(this.subGroups.map((e,i)=>this.updateSeriesGroupSelections(e,i)))}})}updateSeriesGroupSelections(t,e,i){return R(this,void 0,void 0,function*(){const{datumSelection:n,labelSelection:o,markerSelection:r,paths:a}=t,l=this._contextNodeData[e],{nodeData:c,labelData:d,itemId:h}=l;yield this.updatePaths({seriesHighlighted:i,itemId:h,contextData:l,paths:a,seriesIdx:e}),t.datumSelection=yield this.updateDatumSelection({nodeData:c,datumSelection:n,seriesIdx:e}),t.labelSelection=yield this.updateLabelSelection({labelData:d,labelSelection:o,seriesIdx:e}),r&&(t.markerSelection=yield this.updateMarkerSelection({nodeData:c,markerSelection:r,seriesIdx:e}))})}markerFactory(){return new(Oi())}updateSeriesGroups(){return R(this,void 0,void 0,function*(){const{_contextNodeData:t,contentGroup:e,subGroups:i,opts:{pathsPerSeries:n,hasMarkers:o,datumSelectionGarbageCollection:r,markerSelectionGarbageCollection:a}}=this;if(t.length===i.length)return;t.length<i.length&&i.splice(t.length).forEach(({dataNodeGroup:c,markerGroup:d,labelGroup:h,paths:u})=>{e.removeChild(c),d&&e.removeChild(d),h&&e.removeChild(h);for(const p of u)e.removeChild(p)});const l=t.length;for(;l>i.length;){const d=this.subGroupId++,h=new z({name:`${this.id}-series-sub${d}-dataNodes`,layer:!1,zIndex:ut.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data",d)}),u=o?new z({name:`${this.id}-series-sub${this.subGroupId++}-markers`,layer:!1,zIndex:ut.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("marker",d)}):void 0,p=new z({name:`${this.id}-series-sub${this.subGroupId++}-labels`,layer:!1,zIndex:ut.SERIES_LABEL_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("labels",d)});e.appendChild(h),e.appendChild(p),u&&e.appendChild(u);const f=[];for(let g=0;g<n;g++)f[g]=new he,f[g].zIndex=ut.SERIES_LAYER_ZINDEX,f[g].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",g),e.appendChild(f[g]);i.push({paths:f,dataNodeGroup:h,markerGroup:u,labelGroup:p,labelSelection:rt.select(p,W),datumSelection:rt.select(h,()=>this.nodeFactory(),r),markerSelection:u?rt.select(u,()=>this.markerFactory(),a):void 0})}})}getGroupZIndexSubOrder(t,e=0){var i;const n=super.getGroupZIndexSubOrder(t,e);if("paths"===t){const o=null!==(i=this.opts.pathsZIndexSubOrderOffset[e])&&void 0!==i?i:0,r=n[0];n[0]="function"==typeof r?()=>+r()+o:+r+o}return n}updateNodes(t,e,i){var n;return R(this,void 0,void 0,function*(){const{highlightSelection:o,highlightLabelSelection:r,opts:{hasMarkers:a,hasHighlightedLabels:l}}=this,c=!this.ctx.animationManager.isSkipped(),d=this.visible&&(null===(n=this._contextNodeData)||void 0===n?void 0:n.length)>0&&i;this.rootGroup.visible=c||d,this.contentGroup.visible=c||d,this.highlightGroup.visible=(c||d)&&!!e;const h=this.getOpacity();a?(yield this.updateMarkerNodes({markerSelection:o,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlightMarkers",o)):(yield this.updateDatumNodes({datumSelection:o,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlight",o)),l&&(yield this.updateLabelNodes({labelSelection:r,seriesIdx:-1})),yield Promise.all(this.subGroups.map((u,p)=>R(this,void 0,void 0,function*(){const{dataNodeGroup:f,markerGroup:g,datumSelection:y,labelSelection:b,markerSelection:_,paths:x,labelGroup:k}=u,{itemId:E}=this.contextNodeData[p],O=d;f.opacity=h,f.visible=c||O,k.visible=O,g&&(g.opacity=h,g.zIndex=f.zIndex>=ut.SERIES_LAYER_ZINDEX?f.zIndex:f.zIndex+1,g.visible=O),k&&(k.opacity=h),yield this.updatePathNodes({seriesHighlighted:e,itemId:E,paths:x,seriesIdx:p,opacity:h,visible:O,animationEnabled:c}),f.visible&&(yield this.updateDatumNodes({datumSelection:y,highlightedItems:t,isHighlight:!1,seriesIdx:p}),yield this.updateLabelNodes({labelSelection:b,seriesIdx:p}),a&&_&&(yield this.updateMarkerNodes({markerSelection:_,isHighlight:!1,seriesIdx:p})))})))})}getHighlightLabelData(t,e){const i=t.find(n=>n.datum===e.datum&&n.itemId===e.itemId);return i?[i]:void 0}getHighlightData(t,e){return e?[e]:void 0}updateHighlightSelection(t){var e;return R(this,void 0,void 0,function*(){const{highlightSelection:i,highlightLabelSelection:n,_contextNodeData:o}=this,r=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),a=t&&r?.datum?r:void 0;let l,c;if(null!=a){const d=this.isLabelEnabled();for(const{labelData:h,nodeData:u}of o)if(c=this.getHighlightData(u,a),l=d?this.getHighlightLabelData(h,a):void 0,(!d||null!=l)&&null!=c)break}return this.highlightSelection=yield this.updateHighlightSelectionItem({items:c,highlightSelection:i}),this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({items:l,highlightLabelSelection:n}),c})}pickNodeExactShape(t){var e;const i=super.pickNodeExactShape(t);if(i)return i;const{x:n,y:o}=t,{opts:{hasMarkers:r}}=this;for(const{dataNodeGroup:a,markerGroup:l}of this.subGroups){let c=a.pickNode(n,o);if(!c&&r&&(c=l?.pickNode(n,o)),c)break}for(const a of this.moduleMap){const{datum:l}=null!==(e=a.pickNodeExact(t))&&void 0!==e?e:{};if(void 0!==l)return{datum:l,distance:0}}}pickNodeClosestDatum(t){var e,i;const{x:n,y:o}=t,{axes:r,rootGroup:a,_contextNodeData:l}=this,c=r[I.X],d=r[I.Y],h=a.transformPoint(n,o);let p,u=1/0;for(const f of l)for(const g of f.nodeData){const{point:{x:y=NaN,y:b=NaN}={}}=g;if(isNaN(y)||isNaN(b)||!c?.inRange(y)||!d?.inRange(b))continue;const x=Math.max(Math.pow(h.x-y,2)+Math.pow(h.y-b,2),0);x<u&&(u=x,p=g)}for(const f of this.moduleMap){const g=f.pickNodeNearest(t);if(void 0!==g&&g.distanceSquared<u){u=g.distanceSquared,p=g.datum;break}}if(p)return{datum:p,distance:Math.max(Math.sqrt(u)-(null!==(i=null===(e=p.point)||void 0===e?void 0:e.size)&&void 0!==i?i:0),0)}}pickNodeMainAxisFirst(t,e){var i,n;const{x:o,y:r}=t,{axes:a,rootGroup:l,_contextNodeData:c}=this,d=a[I.X],h=a[I.Y],u=[d,h].filter(_=>_ instanceof li).map(_=>_.direction);if(e&&0===u.length)return;const[p=I.X]=u,f=l.transformPoint(o,r),g=p===I.X?[f.x,f.y]:[f.y,f.x],y=[1/0,1/0];let b;for(const _ of c)for(const x of _.nodeData){const{point:{x:k=NaN,y:E=NaN}={}}=x;if(isNaN(k)||isNaN(E)||!d?.inRange(k)||!h?.inRange(E))continue;const A=p===I.X?[k,E]:[E,k];let D=!0;for(let L=0;L<A.length;L++){const T=Math.abs(A[L]-g[L]);if(T>y[L]){D=!1;break}T<y[L]&&(y[L]=T,y.fill(1/0,L+1,y.length))}D&&(b=x)}if(b){let _=Math.max(Math.pow(y[0],2)+Math.pow(y[1],2)-(null!==(n=null===(i=b.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0),0);for(const x of this.moduleMap){const k=x.pickNodeMainAxisFirst(t);if(void 0!==k&&k.distanceSquared<_){b=k.datum,_=k.distanceSquared;break}}return{datum:b,distance:Math.sqrt(_)}}}onLegendItemClick(t){const{enabled:e,itemId:i,series:n,legendItemName:o}=t;(n.id===this.id||null!=this.legendItemName&&this.legendItemName===o)&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:n,numVisibleItems:o,legendItemName:r}=t,a=Object.values(o).reduce((c,d)=>c+d,0);this.toggleSeriesItem(i,!!(n.id===this.id||null!=this.legendItemName&&this.legendItemName===r||e&&1===a))}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}shouldFlipXY(){return!1}getMinRect(){const[t]=this._contextNodeData;if(!t||0==t.nodeData.length)return;const e=t.nodeData.map(({midPoint:n})=>{var o;return null!==(o=n?.x)&&void 0!==o?o:0}).sort((n,o)=>n-o).reduce((n,o,r,a)=>r>0?Math.max(n,o-a[r-1]):n,0),i=t.nodeData.map(({midPoint:n})=>{var o;return null!==(o=n?.y)&&void 0!==o?o:0}).sort((n,o)=>n-o).reduce((n,o,r,a)=>r>0?Math.max(n,o-a[r-1]):n,0);return new U(0,0,e,i)}updateHighlightSelectionItem(t){return R(this,void 0,void 0,function*(){const{opts:{hasMarkers:e}}=this,{items:i,highlightSelection:n}=t,o=i??[];return e?this.updateMarkerSelection({nodeData:o,markerSelection:n,seriesIdx:-1}):this.updateDatumSelection({nodeData:o,datumSelection:n,seriesIdx:-1})})}updateHighlightSelectionLabel(t){return R(this,void 0,void 0,function*(){const{items:e,highlightLabelSelection:i}=t;return this.updateLabelSelection({labelData:e??[],labelSelection:i,seriesIdx:-1})})}updateDatumSelection(t){return R(this,void 0,void 0,function*(){return t.datumSelection})}updateDatumNodes(t){return R(this,void 0,void 0,function*(){})}updateMarkerSelection(t){return R(this,void 0,void 0,function*(){return t.markerSelection})}updateMarkerNodes(t){return R(this,void 0,void 0,function*(){})}updatePaths(t){return R(this,void 0,void 0,function*(){t.paths.forEach(e=>e.visible=!1)})}updatePathNodes(t){return R(this,void 0,void 0,function*(){const{paths:e,opacity:i,visible:n}=t;for(const o of e)o.opacity=i,o.visible=n})}resetAllAnimation(t){var e,i;const{path:n,datum:o,label:r,marker:a}=null!==(i=null===(e=this.opts)||void 0===e?void 0:e.animationResetFns)&&void 0!==i?i:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),n&&t.paths.forEach(l=>{Mt(l,n)}),o&&Mt(t.datumSelections,o),r&&Mt(t.labelSelections,r),a&&Mt(t.markerSelections,a),t.contextData.some(l=>!1===l.animationValid)&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e,i;const{datum:n}=null!==(i=null===(e=this.opts)||void 0===e?void 0:e.animationResetFns)&&void 0!==i?i:{};n&&Mt([t],n)}animateReadyHighlightMarkers(t){var e,i;const{marker:n}=null!==(i=null===(e=this.opts)||void 0===e?void 0:e.animationResetFns)&&void 0!==i?i:{};n&&Mt([t],n)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t,e){return{datumSelections:this.subGroups.map(({datumSelection:n})=>n),markerSelections:this.subGroups.filter(({markerSelection:n})=>void 0!==n).map(({markerSelection:n})=>n),labelSelections:this.subGroups.map(({labelSelection:n})=>n),annotationSelections:[...this.annotationSelections],contextData:this._contextNodeData,previousContextData:e,paths:this.subGroups.map(({paths:n})=>n),seriesRect:t}}calculateScaling(){const t={},e=i=>{const n=this.axes[i];if(n)if(n.scale instanceof gn){const{range:o,domain:r}=n.scale;t[i]={type:"log",convert:a=>n.scale.convert(a),domain:[r[0],r[1]],range:[o[0],o[1]]}}else if(n.scale instanceof ot){const{range:o}=n.scale,r=n.scale.getDomain();t[i]={type:"continuous",domain:[r[0],r[1]],range:[o[0],o[1]]}}else if(n.scale){const{domain:o}=n.scale;t[i]={type:"category",domain:o,range:o.map(r=>n.scale.convert(r))}}};return e(I.X),e(I.Y),t}}m([S(Y),v("design:type",String)],ui.prototype,"legendItemName",void 0);const gf=["top","right","bottom","left"];let Gc=(()=>{class s extends Se{constructor(e,i){super(e,i),this.paired=!0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastVisibility={crossLines:!0,series:!0}}performLayout(){const e=Object.create(null,{performLayout:{get:()=>super.performLayout}});return R(this,void 0,void 0,function*(){const i=yield e.performLayout.call(this),{animationRect:n,seriesRect:o,visibility:r,clipSeries:a}=this.updateAxes(i);this.seriesRoot.visible=r.series,this.seriesRect=o,this.animationRect=n,this.seriesRoot.translationX=Math.floor(o.x),this.seriesRoot.translationY=Math.floor(o.y);const{seriesArea:{padding:l}}=this,c=o.clone().grow({top:l.top,right:l.right,bottom:l.bottom,left:l.left});return this.hoverRect=c,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:a,series:{rect:o,paddedRect:c,visible:r.series,shouldFlipXY:this.shouldFlipXY()},axes:this.axes.map(d=>Object.assign({id:d.id},d.getLayoutState()))}),i})}updateAxes(e){var i;const n=Object.assign({},this._lastAxisWidths),o=Object.assign({},this._lastVisibility),r=new Set(this._axes.map(y=>y.position));for(const y of Object.keys(n))r.has(y)||delete n[y];const a=(y,b)=>!Object.keys(y).some(_=>null==n[_])&&o.crossLines===b.crossLines&&o.series===b.series&&Object.entries(n).every(([_,x])=>{const k=y[_];return null==x&&null==k||x===k}),l=y=>Object.entries(y).reduce((b,[_,x])=>(x&&Math.abs(x)===1/0&&(x=0),b[_]=null!=x?Math.ceil(x):x,b),{});let c={},d={},h=!1,u=null===(i=this.seriesRect)||void 0===i?void 0:i.clone(),p=0,f={};do{Object.assign(n,c),Object.assign(o,d);const y=this.updateAxesPass(n,e.clone(),u);if(c=l(y.axisWidths),d=y.visibility,h=y.clipSeries,u=y.seriesRect,f=y.primaryTickCounts,p++>10){B.warn("unable to find stable axis layout.");break}}while(!a(c,d));return this.axes.forEach(y=>{const{direction:b}=y;y.update(f[b])}),this.axes.forEach(y=>{if(y.setCrossLinesVisible(o.crossLines),u)switch(y.clipGrid(u.x,u.y,u.width+5,u.height+5),y.position){case"left":case"right":y.clipTickLines(e.x,u.y,e.width+5,u.height+5);break;case"top":case"bottom":y.clipTickLines(u.x,e.y,u.width+5,e.height+5)}}),this._lastAxisWidths=n,this._lastVisibility=o,{seriesRect:u,animationRect:e,visibility:o,clipSeries:h}}updateAxesPass(e,i,n){const{axes:o}=this,r={},a={},l={series:!0,crossLines:!0};let c=!1;const d={},h=this.applySeriesPadding(i),u=n?this.buildCrossLinePadding(e):{},p=this.buildAxisBound(h,e,u,l),f=this.buildSeriesRect(p,e);return o.forEach(g=>{var y,b;const{position:_="left"}=g,{clipSeries:x,axisThickness:k,axisOffset:E}=this.calculateAxisDimensions({axis:g,seriesRect:f,paddedBounds:h,axisWidths:e,newAxisWidths:a,primaryTickCounts:d,clipSeries:c,addInterAxisPadding:(null!==(y=r[_])&&void 0!==y?y:0)>0});r[_]=(null!==(b=r[_])&&void 0!==b?b:0)+1,c=c||x,this.positionAxis({axis:g,axisBound:p,axisOffset:E,axisThickness:k,axisWidths:e,primaryTickCounts:d,seriesRect:f})}),{clipSeries:c,seriesRect:f,axisWidths:a,visibility:l,primaryTickCounts:d}}buildCrossLinePadding(e){var i;const n={};this.axes.forEach(o=>{o.crossLines&&o.crossLines.forEach(r=>{r.calculatePadding(n)})});for(const[o,r=0]of Object.entries(n))n[o]=Math.max(r-(null!==(i=e[o])&&void 0!==i?i:0),0);return n}applySeriesPadding(e){const i=e.clone(),n=this.axes.slice().reverse();return gf.forEach(o=>{const r=this.seriesArea.padding[o],a=n.find(l=>l.position===o);a?a.seriesAreaPadding=r:i.shrink(r,o)}),i}buildAxisBound(e,i,n,o){var r,a,l,c;const d=e.clone(),{top:h=0,right:u=0,bottom:p=0,left:f=0}=n,g=f+u,y=h+p,b=(null!==(r=i.left)&&void 0!==r?r:0)+(null!==(a=i.right)&&void 0!==a?a:0)+g,_=(null!==(l=i.top)&&void 0!==l?l:0)+(null!==(c=i.bottom)&&void 0!==c?c:0)+y;return d.width<=b||d.height<=_?(o.crossLines=!1,o.series=!1,d):(d.x+=f,d.y+=h,d.width-=g,d.height-=y,d)}buildSeriesRect(e,i){const n=e.clone(),{top:o,bottom:r,left:a,right:l}=i;return n.x+=a??0,n.y+=o??0,n.width-=(a??0)+(l??0),n.height-=(o??0)+(r??0),n.width=Math.max(0,n.width),n.height=Math.max(0,n.height),n}clampToOutsideSeriesRect(e,i,n,o){const{x:r,y:a,width:l,height:c}=e;return(1===o?Math.min:Math.max)(i,[r,a,r+l,a+c][("x"===n?0:1)+(1===o?0:2)])}calculateAxisDimensions(e){var i,n,o,r,a;const{axis:l,seriesRect:c,paddedBounds:d,axisWidths:h,newAxisWidths:u,primaryTickCounts:p,addInterAxisPadding:f}=e;let{clipSeries:g}=e;const{position:y="left",direction:b}=l,x=null!==(i=u[y])&&void 0!==i?i:0;switch(y){case"top":case"bottom":l.range=[0,c.width],l.gridLength=c.height;break;case"right":case"left":l.range=(P=l)instanceof li||P instanceof ji?[0,c.height]:[c.height,0],l.gridLength=c.width}var P;const k=this.zoomManager.getAxisZoom(l.id),{min:E=0,max:O=1}=k??{};l.visibleRange=[E,O],g||(g=l.dataDomain.clipped||l.visibleRange[0]>0||l.visibleRange[1]<1);let D=l.nice?p[b]:void 0;l.maxThickness=null!=l.thickness&&l.thickness>0?l.thickness:b===I.Y?.3*d.width:.3*d.height;const T=l.calculateLayout(D);D=T.primaryTickCount,p[b]=null!==(n=p[b])&&void 0!==n?n:D;let N=0;if(null!=l.thickness&&l.thickness>0)N=l.thickness;else{const{bbox:P}=T;N=b===I.X?P.height:P.width}return f&&(N+=15),N=Math.ceil(N),u[y]=(null!==(o=u[y])&&void 0!==o?o:0)+N,l.gridPadding=(null!==(r=h[y])&&void 0!==r?r:0)-(null!==(a=u[y])&&void 0!==a?a:0),{clipSeries:g,axisThickness:N,axisOffset:x,primaryTickCount:D}}positionAxis(e){var i,n,o,r;const{axis:a,axisBound:l,axisWidths:c,seriesRect:d,axisOffset:h,axisThickness:u}=e,{position:p}=a;switch(p){case"top":a.translation.x=l.x+(null!==(i=c.left)&&void 0!==i?i:0),a.translation.y=this.clampToOutsideSeriesRect(d,l.y+1+h+u,"y",1);break;case"bottom":a.translation.x=l.x+(null!==(n=c.left)&&void 0!==n?n:0),a.translation.y=this.clampToOutsideSeriesRect(d,l.y+l.height+1-u-h,"y",-1);break;case"left":a.translation.y=l.y+(null!==(o=c.top)&&void 0!==o?o:0),a.translation.x=this.clampToOutsideSeriesRect(d,l.x+h+u,"x",1);break;case"right":a.translation.y=l.y+(null!==(r=c.top)&&void 0!==r?r:0),a.translation.x=this.clampToOutsideSeriesRect(d,l.x+l.width-u-h,"x",-1)}a.updatePosition({rotation:ce(a.rotation),sideFlag:a.label.getSideFlag()})}shouldFlipXY(){return!this.series.some(e=>!(e instanceof ui&&e.shouldFlipXY()))}}return s.className="CartesianChart",s.type="cartesian",s})();class Yi{static isInstance(t){var e;return t instanceof Yi||"AgChartInstanceProxy"===(null===(e=t.constructor)||void 0===e?void 0:e.name)&&null!=t.chart||null!=t.chart&&this.validateImplementation(t)}static validateImplementation(t){var e,i;const o=Object.keys(null!==(i=null===(e=t.constructor)||void 0===e?void 0:e.prototype)&&void 0!==i?i:{});return["getOptions","destroy"].every(r=>o.includes(r))}constructor(t){this.chart=t}getOptions(){return this.chart.getOptions()}destroy(){this.chart.destroy()}}class jc extends we{constructor(){super(...arguments),this.maxSpacing=NaN}}m([S(Xe(ei(1),on("minSpacing"))),ai(NaN),v("design:type",Number)],jc.prototype,"maxSpacing",void 0);class Wi extends yn{constructor(t,e=new Fi){super(t,e),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:n,clipped:o}=Wn(t,e,i);return{domain:n,clipped:o}}formatDatum(t){return"number"==typeof t?t.toFixed(2):(B.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(t))}createTick(){return new jc}updateSecondaryAxisTicks(t){if(null==this.dataDomain)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");if(0===this.dataDomain.domain.length)return[];const[e,i]=function yf(s,t){let e=Math.floor(s[0]),i=s[1];e=function mf(s,t,e){const i=Math.abs(t-s)/(e-1),n=Math.floor(Math.log10(i)),o=Math.pow(10,n);return Math.floor(s/o)*o}(e,i,t);const n=function bf(s,t,e){return function xf(s){const t=Math.floor(Math.log10(s)),e=Math.pow(10,t),i=s/e*10;return i>0&&i<=1?e/10:i>1&&i<=2?2*e/10:i>1&&i<=5?5*e/10:i>5&&i<=10?10*e/10:i>10&&i<=20?20*e/10:i>20&&i<=40?40*e/10:i>40&&i<=50?50*e/10:i>50&&i<=100?100*e/10:i}((t-s)/(e-1))}(e,i,t);i=e+(t-1)*n;const r=[e,i],a=function vf(s,t,e){const i=Math.floor(Math.log10(t)),n=t>0&&t<1?Math.abs(i):0,o=Math.pow(10,n),r=new er(n);for(let a=0;a<e;a++)r[a]=Math.round((s+t*a)*o)/o;return r}(e,n,t);return[r,a]}(this.dataDomain.domain,t??0);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),i}}function Yc(){return j(t=>"number"==typeof t&&0!==t,"expecting a non-zero Number")}Wi.className="NumberAxis",Wi.type="number",m([S(Xe(ei(),Kn("max"))),ai(NaN),v("design:type",Number)],Wi.prototype,"min",void 0),m([S(Xe(ei(),on("min"))),ai(NaN),v("design:type",Number)],Wi.prototype,"max",void 0);class Ai extends Wi{normaliseDataDomain(t){const{min:e,max:i}=this,{extent:n,clipped:o}=Wn(t,e,i),a=n[0]<0&&n[1]>0,l=0===n[0]&&0===n[1];return(n[0]>n[1]||a||l)&&(t=[],a?B.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):l&&B.warn("the data domain has 0 extent, no data is rendered.")),0===n[0]&&(n[0]=1),0===n[1]&&(n[1]=-1),{domain:n,clipped:o}}set base(t){this.scale.base=t}get base(){return this.scale.base}constructor(t){super(t,new gn),this.min=NaN,this.max=NaN}}Ai.className="LogAxis",Ai.type="log",m([S(Xe(ei(),Kn("max"),Yc())),ai(NaN),v("design:type",Number)],Ai.prototype,"min",void 0),m([S(Xe(ei(),on("min"),Yc())),ai(NaN),v("design:type",Number)],Ai.prototype,"max",void 0);class Wc extends we{constructor(){super(...arguments),this.maxSpacing=NaN}}m([S(Xe(ei(1),on("minSpacing"))),ai(NaN),v("design:type",Number)],Wc.prototype,"maxSpacing",void 0);class zi extends yn{constructor(t){super(t,new Sr),this.datumFormat="%m/%d/%y, %H:%M:%S",this.min=void 0,this.max=void 0;const{scale:e}=this;this.refreshScale(),this.datumFormatter=e.tickFormat({specifier:this.datumFormat})}normaliseDataDomain(t){var e;let{min:i,max:n}=this,o=!1;return"number"==typeof i&&(i=new Date(i)),"number"==typeof n&&(n=new Date(n)),t.length>2&&(t=(null!==(e=Ee(t))&&void 0!==e?e:[0,1e3]).map(r=>new Date(r))),i instanceof Date&&(o||(o=i>t[0]),t=[i,t[1]]),n instanceof Date&&(o||(o=n<t[1]),t=[t[0],n]),t[0]>t[1]&&(t=[]),{domain:t,clipped:o}}createTick(){return new Wc}onLabelFormatChange(t,e){e?super.onLabelFormatChange(t,e):this.labelFormatter=this.scale.tickFormat({ticks:t})}formatDatum(t){var e;return null!==(e=this.moduleCtx.callbackCache.call(this.datumFormatter,t))&&void 0!==e?e:String(t)}calculatePadding(t,e){return[0,1]}}zi.className="TimeAxis",zi.type="time",m([S(Xe(zo,Kn("max"))),v("design:type",Object)],zi.prototype,"min",void 0),m([S(Xe(zo,on("min"))),v("design:type",Object)],zi.prototype,"max",void 0);const uo={[Wi.type]:Wi,[li.type]:li,[zi.type]:zi,[ji.type]:ji,[Ai.type]:Ai};function Sf(s,t){uo[s]=t}function _f(s,t){const e=uo[s];if(e)return new e(t);throw new Error(`AG Charts - unknown axis type: ${s}`)}const Mr={has:s=>Object.prototype.hasOwnProperty.call(uo,s),get axesTypes(){return Object.keys(uo)}},zc={};function Vc(s,t){zc[s]=t}function kf(s){var t;return null!==(t=zc[s])&&void 0!==t?t:{}}const _n=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy"],optionsInnerKey:"image"},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy"],identifier:"gradient"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bullet"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"}];function Uc(s){return _n.some(t=>"series"===t.type&&t.identifier===s)}function Rr(s){var t;return null===(t=_n.find(e=>"series"===e.type&&e.identifier===s))||void 0===t?void 0:t.chartTypes}function Of(s){var t,e;return(null!==(e=null===(t=_n.find(i=>"series"===i.type&&i.identifier===s))||void 0===t?void 0:t.useCount)&&void 0!==e?e:0)>0}function Tf(s){var t;if("enterprise"!==s.packageType)throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const e=_n.find(i=>i.type===s.type&&i.optionsKey===s.optionsKey&&i.identifier===s.identifier&&s.chartTypes.every(n=>i.chartTypes.includes(n)));return e&&(null!==(t=e.useCount)&&void 0!==t||(e.useCount=0),e.useCount++),null!=e}const Hc={category:"legend"};function Lf(s,t,e,i){Hc[s]=t,Xc[t]=i}const Xc={};class po extends Ro{constructor(t){var e;super(),this.node=new z({name:"background",zIndex:ut.SERIES_BACKGROUND_ZINDEX}),this.rectNode=new _e,this.visible=!0,this.fill="white",this.image=void 0,this.node.appendChild(this.rectNode),null===(e=t.scene.root)||void 0===e||e.appendChild(this.node),this.destroyFns.push(()=>{var i;return null===(i=t.scene.root)||void 0===i?void 0:i.removeChild(this.node)},t.layoutService.addListener("layout-complete",i=>this.onLayoutComplete(i)))}onLayoutComplete(t){const{width:e,height:i}=t.chart;this.rectNode.width=e,this.rectNode.height=i}}m([S(nt),Nt("node","visible"),v("design:type",Boolean)],po.prototype,"visible",void 0),m([S(St),Nt("rectNode","fill"),v("design:type",String)],po.prototype,"fill",void 0);const Kc={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:po};class $c{set fill(t){this.rh.fill=t}get fill(){return this.rh.fill}set stroke(t){this.rh.stroke=t}get stroke(){return this.rh.stroke}set strokeWidth(t){this.rh.strokeWidth=t}get strokeWidth(){return this.rh.strokeWidth}set width(t){this.rh.width=t}get width(){return this.rh.width}set height(t){this.rh.height=t}get height(){return this.rh.height}set gripLineGap(t){this.rh.gripLineGap=t}get gripLineGap(){return this.rh.gripLineGap}set gripLineLength(t){this.rh.gripLineLength=t}get gripLineLength(){return this.rh.gripLineLength}constructor(t){this.rh=t}}class wf{set fill(t){this.rm.fill=t}get fill(){return this.rm.fill}set stroke(t){this.rm.stroke=t}get stroke(){return this.rm.stroke}set strokeWidth(t){this.rm.strokeWidth=t}get strokeWidth(){return this.rm.strokeWidth}set fillOpacity(t){this.rm.fillOpacity=t}get fillOpacity(){return this.rm.fillOpacity}constructor(t){this.rm=t}}class Ce extends he{constructor(){super(...arguments),this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(t){this._centerX!==t&&(this._centerX=t,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(t){this._centerY!==t&&(this._centerY=t,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(t){this._gripLineGap!==t&&(this._gripLineGap=t,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(t){this._gripLineLength!==t&&(this._gripLineLength=t,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}computeBBox(){const{centerX:t,centerY:e,width:i,height:n}=this;return new U(t-i/2,e-n/2,i,n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}updatePath(){const{path:t,centerX:e,centerY:i,width:n,height:o}=this;t.clear();const r=e-n/2,a=i-o/2,l=this.align(r),c=this.align(a),d=l+this.align(r,n),h=c+this.align(a,o);t.moveTo(l,c),t.lineTo(d,c),t.lineTo(d,h),t.lineTo(l,h),t.lineTo(l,c);const u=this.gripLineGap/2,p=this.gripLineLength/2;t.moveTo(this.align(e-u),this.align(i-p)),t.lineTo(this.align(e-u),this.align(i+p)),t.moveTo(this.align(e+u),this.align(i-p)),t.lineTo(this.align(e+u),this.align(i+p))}}function fo(s,t){s!==t&&(this.dirtyPath=!0)}Ce.className="RangeHandle",m([S(me),v("design:type",Object)],Ce.prototype,"_fill",void 0),m([S(me),v("design:type",Object)],Ce.prototype,"_stroke",void 0),m([S(C(0)),v("design:type",Object)],Ce.prototype,"_strokeWidth",void 0),m([S(Ho),v("design:type",Object)],Ce.prototype,"_lineCap",void 0),m([S(C(0)),v("design:type",Number)],Ce.prototype,"_width",void 0),m([S(C(0)),v("design:type",Number)],Ce.prototype,"_gripLineGap",void 0),m([S(C(0)),v("design:type",Number)],Ce.prototype,"_gripLineLength",void 0),m([S(C(0)),v("design:type",Number)],Ce.prototype,"_height",void 0);class Di extends he{constructor(){super(...arguments),this.x=0,this.y=0,this.width=200,this.height=30,this.minRange=.05,this._min=0,this._max=1}set min(t){var e;t=Ae(0,t,this.max-this.minRange),this._min!==t&&!isNaN(t)&&(this._min=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get min(){return this._min}set max(t){var e;t=Ae(this.min+this.minRange,t,1),this._max!==t&&!isNaN(t)&&(this._max=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get max(){return this._max}computeBBox(){const{x:t,y:e,width:i,height:n}=this;return new U(t,e,i,n)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:n,min:o,max:r}=this,a=t+i*o;return new U(a,e,t+i*r-a,n)}updatePath(){const{path:t,x:e,y:i,width:n,height:o,min:r,max:a}=this;t.clear();const l=this.align(e),c=this.align(i),d=l+this.align(e,n),h=c+this.align(i,o);t.moveTo(l,c),t.lineTo(d,c),t.lineTo(d,h),t.lineTo(l,h),t.lineTo(l,c);const u=this.align(e+n*r),p=this.align(e+n*a);t.moveTo(u,c),t.lineTo(u,h),t.lineTo(p,h),t.lineTo(p,c),t.lineTo(u,c)}}Di.className="RangeMask",m([Ht({changeValue:fo}),S(C(0)),v("design:type",Object)],Di.prototype,"x",void 0),m([Ht({changeValue:fo}),S(C(0)),v("design:type",Object)],Di.prototype,"y",void 0),m([Ht({changeValue:fo}),S(C(0)),v("design:type",Object)],Di.prototype,"width",void 0),m([Ht({changeValue:fo}),S(C(0)),v("design:type",Object)],Di.prototype,"height",void 0),m([S(C()),v("design:type",Number)],Di.prototype,"_min",void 0),m([S(C()),v("design:type",Number)],Di.prototype,"_max",void 0);let Cf=(()=>{class s extends z{set x(e){this.mask.x=e,this.updateHandles()}get x(){return this.mask.x}set y(e){this.mask.y=e,this.updateHandles()}get y(){return this.mask.y}set width(e){this.mask.width=e,this.updateHandles()}get width(){return this.mask.width}set height(e){this.mask.height=e,this.updateHandles()}get height(){return this.mask.height}set min(e){this.mask.min=e}get min(){return this.mask.min}set max(e){this.mask.max=e}get max(){return this.mask.max}constructor(){super({name:"rangeSelectorGroup"}),this.minHandle=new Ce,this.maxHandle=new Ce,this.mask=(()=>{const{x:e,y:i,width:n,height:o,min:r,max:a}=s.defaults,l=new Di;l.x=e,l.y=i,l.width=n,l.height=o,l.min=r,l.max=a;const{minHandle:c,maxHandle:d}=this;return c.centerX=e,d.centerX=e+n,c.centerY=d.centerY=i+o/2,this.append([l,c,d]),l.onRangeChange=()=>{var h;this.updateHandles(),null===(h=this.onRangeChange)||void 0===h||h.call(this)},l})(),this._x=s.defaults.x,this._y=s.defaults.y,this._width=s.defaults.width,this._height=s.defaults.height,this._min=s.defaults.min,this._max=s.defaults.max,this.isContainerNode=!0}updateHandles(){const{minHandle:e,maxHandle:i,x:n,y:o,width:r,height:a,mask:l}=this;e.centerX=n+r*l.min,i.centerX=n+r*l.max,e.centerY=i.centerY=o+a/2}computeBBox(){return this.mask.computeBBox()}computeVisibleRangeBBox(){return this.mask.computeVisibleRangeBBox()}render(e){const{ctx:i,forceRender:n,stats:o}=e;if(this.dirty===M.NONE&&!n)return void(o&&o.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(i);const{mask:r,minHandle:a,maxHandle:l}=this;[r,a,l].forEach(c=>{c.visible&&(n||c.dirty>M.NONE)&&(i.save(),c.render(Object.assign(Object.assign({},e),{ctx:i,forceRender:n})),i.restore())}),this.markClean({force:!0}),o&&o.nodesRendered++}}return s.className="Range",s.defaults={x:0,y:0,width:200,height:30,min:0,max:1},s})();class wr extends Ro{set width(t){this.rs.width=t}get width(){return this.rs.width}set height(t){this.rs.height=t}get height(){return this.rs.height}set min(t){this.rs.min=t}get min(){return this.rs.min}set max(t){this.rs.max=t}get max(){return this.rs.max}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){const t=this.enabled&&this.visible;this.rs.visible=t,t?this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max},y:{min:0,max:1}}):this.ctx.zoomManager.updateZoom("navigator")}constructor(t){var e;super(),this.ctx=t,this.rs=new Cf,this.mask=new wf(this.rs.mask),this.minHandle=new $c(this.rs.minHandle),this.maxHandle=new $c(this.rs.maxHandle),this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this.enabled=!1,this.margin=10,this._visible=!0,this.rs.onRangeChange=()=>t.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max},y:{min:0,max:1}}),null===(e=t.scene.root)||void 0===e||e.appendChild(this.rs);const i={bypassPause:["animation"]};this.destroyFns.push(t.interactionManager.addListener("drag-start",n=>this.onDragStart(n),i),t.interactionManager.addListener("drag",n=>this.onDrag(n),i),t.interactionManager.addListener("hover",n=>this.onDrag(n),i),t.interactionManager.addListener("drag-end",()=>this.onDragStop(),i),t.layoutService.addListener("before-series",n=>this.layout(n)),t.layoutService.addListener("layout-complete",n=>this.layoutComplete(n)),()=>{var n;return null===(n=t.scene.root)||void 0===n?void 0:n.removeChild(this.rs)},()=>this.ctx.zoomManager.updateZoom("navigator")),this.updateGroupVisibility()}layout({shrinkRect:t}){return this.enabled&&(t.shrink(this.rs.height+this.margin,"bottom"),this.rs.y=t.y+t.height+this.margin),{shrinkRect:t}}layoutComplete({series:{rect:t,visible:e}}){this.enabled&&e&&(this.rs.x=t.x,this.rs.width=t.width),this.visible=e}onDragStart(t){if(!this.enabled)return;const{offsetX:e,offsetY:i}=t,{rs:n}=this,{minHandle:o,maxHandle:r,x:a,width:l,min:c}=n,d=n.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(o.containsPoint(e,i)?this.minHandleDragging=!0:r.containsPoint(e,i)?this.maxHandleDragging=!0:d.containsPoint(e,i)&&(this.panHandleOffset=(e-a)/l-c))}onDrag(t){if(!this.enabled)return;const{rs:e,panHandleOffset:i}=this,{x:n,y:o,width:r,height:a,minHandle:l,maxHandle:c}=e,{offsetX:d,offsetY:h}=t,u=n+r*e.min,f=new U(u,o,n+r*e.max-u,a),g=()=>Math.min(Math.max((d-n)/r,0),1);if(l.containsPoint(d,h)||c.containsPoint(d,h)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):f.containsPoint(d,h)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)e.min=g();else if(this.maxHandleDragging)e.max=g();else if(!isNaN(i)){const y=e.max-e.min,b=Math.min(g()-i,1-y);b<=e.min?(e.min=b,e.max=e.min+y):(e.max=b+y,e.min=e.max-y)}}onDragStop(){this.stopHandleDragging()}stopHandleDragging(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN}}m([Ht({changeValue(s){s&&(this.min=0,this.max=1),this.updateGroupVisibility()}}),S(nt),v("design:type",Object)],wr.prototype,"enabled",void 0),m([S(C(0)),v("design:type",Object)],wr.prototype,"margin",void 0);const If={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:wr,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}},Cr=({takeColors:s})=>{const{fills:[t],strokes:[e]}=s(1);return{fill:t,stroke:e}},ms=s=>{const{fill:t,stroke:e}=Cr(s);return{marker:{fill:t,stroke:e}}},Ti_SMALL=12,Ti_MEDIUM=13,Ti_LARGE=17,kn="normal",Ie_BOTTOM="bottom",Ie_LEFT="left",Pe_CATEGORY="category",Pe_NUMBER="number",Vi={},Pr={},ke={has:s=>Object.prototype.hasOwnProperty.call(Vi,s),isCartesian:s=>"cartesian"===Vi[s],isPolar:s=>"polar"===Vi[s],isHierarchy:s=>"hierarchy"===Vi[s],get seriesTypes(){return Object.keys(Vi)},get cartesianTypes(){return this.seriesTypes.filter(s=>this.isCartesian(s))},get polarTypes(){return this.seriesTypes.filter(s=>this.isPolar(s))},get hierarchyTypes(){return this.seriesTypes.filter(s=>this.isHierarchy(s))}};function jf(s,t){var e;Pr[s]=_t([null!==(e=Pr[s])&&void 0!==e?e:{},t])}function qc(s){var t;return null!==(t=Pr[s])&&void 0!==t?t:{}}function Ui(s){var t,e,i,n;return null!==(n=null!==(t=s.type)&&void 0!==t?t:null===(i=null===(e=s.series)||void 0===e?void 0:e[0])||void 0===i?void 0:i.type)&&void 0!==n?n:"line"}function On(s){const t=Ui(s);return null==t||("cartesian"===t?(B.warnOnce(`type '${t}' is deprecated, use a series type instead`),!0):ke.isCartesian(t)||function Ef(s){var t;return"cartesian"===(null===(t=Rr(s))||void 0===t?void 0:t.find(i=>"cartesian"===i))}(t))}function go(s){const t=Ui(s);return null!=t&&("hierarchy"===t?(B.warnOnce(`type '${t}' is deprecated, use a series type instead`),!0):ke.isHierarchy(t)||function Df(s){var t;return"hierarchy"===(null===(t=Rr(s))||void 0===t?void 0:t.find(i=>"hierarchy"===i))}(t))}function yo(s){const t=Ui(s);return null!=t&&("polar"===t?(B.warnOnce(`type '${t}' is deprecated, use a series type instead`),!0):ke.isPolar(t)||function Af(s){var t;return"polar"===(null===(t=Rr(s))||void 0===t?void 0:t.find(i=>"polar"===i))}(t))}const Zc={axes:[{type:Pe_NUMBER,position:Ie_LEFT},{type:Pe_CATEGORY,position:Ie_BOTTOM}]},Jc=Symbol("extends-chart-defaults"),Qc=Symbol("extends-legend-defaults"),td=Symbol("extends-legend-item-defaults"),ed=Symbol("extends-legend-item-marker-defaults"),id=Symbol("extends-axes-defaults"),nd=Symbol("extends-axes-label-defaults"),sd=Symbol("extends-axes-line-defaults"),od=Symbol("extends-axes-tick-defaults"),rd=Symbol("extends-axes-grid-line-defaults"),pi=Symbol("extends-series-defaults"),En=Symbol("extends-cartesian-marker-defaults"),ad=Symbol("override-series-label-defaults"),wt=Symbol("default-font"),Yt=Symbol("default-label-colour"),ld=Symbol("default-inverted-label-colour"),An=Symbol("default-inside-series-label-colour"),Dn=Symbol("default-muted-label-colour"),mo=Symbol("default-axis-grid-colour"),vo=Symbol("default-axis-line-colour"),vs=Symbol("default-cross-lines-colour"),bo=Symbol("default-background-colour"),Tn=Symbol("default-shadow-colour"),Fe=Symbol("default-waterfall-series-positive-colors"),Be=Symbol("default-waterfall-series-negative-colors"),Ge=Symbol("default-waterfall-series-total-colors"),je=Symbol("default-waterfall-series-connector-line-stroke"),xo=Symbol("default-polar-series-stroke"),Ye=Symbol("default-diverging-series-colour-range"),Fr=Symbol("default-hierarchy-fills"),Br=Symbol("default-hierarchy-strokes");function cd(s,t,e,i,n){const{defaultDuration:o}=e,{addPhaseFn:r,updatePhaseFn:a,removePhaseFn:l}=n,c=(d,h,u)=>{e.animate({id:`${s}_${t}_${h.id}_${d}`,groupId:s,from:0,to:1,ease:Zn,onUpdate(p,f){f&&"removed"!==d||(h.path.clear({trackChanges:!0}),u(p,h),h.checkPathDirty())},onStop(){"added"===d&&(h.path.clear({trackChanges:!0}),u(1,h),h.checkPathDirty())},duration:Zt[d].animationDuration*o,delay:Zt[d].animationDelay*o})};for(const d of i)e.isSkipped()||(c("removed",d,l),c("updated",d,a)),c("added",d,r)}const Hf=j(s=>wc(s)||Object.getPrototypeOf(s)===ve,"expecting a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class");class se extends Zo{constructor(){super(...arguments),this.enabled=!0,this.shape=Js,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){const{size:t,fill:e,fillOpacity:i,stroke:n,strokeWidth:o,strokeOpacity:r}=this;return{size:t,fill:e,fillOpacity:i,stroke:n,strokeWidth:o,strokeOpacity:r}}getDiameter(){return this.size+this.strokeWidth}}function Gr({id:s},t,e){ni(s,"markers",t,e,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1}),e.forEach(i=>i.cleanup())}function jr({id:s},t,e,i){Et(s,"markers",t,e,{fromFn:(a,l)=>{var c,d;const u=(s=>-(Math.cos(s*Math.PI)-1)/2)((null!==(d=null===(c=l.midPoint)||void 0===c?void 0:c.x)&&void 0!==d?d:i)/i)-.1;return{scalingX:0,scalingY:0,animationDelay:Math.max(Math.min(u,1),0),animationDuration:.2}},toFn:()=>({scalingX:1,scalingY:1})})}function bs(s){return{opacity:1,scalingX:1,scalingY:1}}function xs(s,t){var e,i,n,o;return{translationX:null!==(i=null===(e=t.point)||void 0===e?void 0:e.x)&&void 0!==i?i:NaN,translationY:null!==(o=null===(n=t.point)||void 0===n?void 0:n.y)&&void 0!==o?o:NaN}}function Yr(s,t){const e=(r,a)=>{const l=s[a][r];return Array.isArray(l)?l[0]:l},i=r=>{const{xValue:a}=r;return s.moved[a]?{point:e(a,"moved"),status:"updated"}:s.removed[a]?{point:e(a,"removed"),status:"removed"}:s.added[a]?{point:e(a,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(r,a)=>{var l,c,d,h,u,p;const{status:f,point:g}=i(a);if("unknown"===f)return{opacity:0};const y=Object.assign({translationX:null!==(c=null===(l=g?.from)||void 0===l?void 0:l.x)&&void 0!==c?c:r.translationX,translationY:null!==(h=null===(d=g?.from)||void 0===d?void 0:d.y)&&void 0!==h?h:r.translationY,opacity:r.opacity},Zt[f]);return"added"===t?Object.assign(Object.assign(Object.assign({},y),{opacity:0,translationX:null===(u=g?.to)||void 0===u?void 0:u.x,translationY:null===(p=g?.to)||void 0===p?void 0:p.y}),Zt.added):("added"===f&&(y.opacity=0),y)},toFn:(r,a)=>{var l,c;const{status:d,point:h}=i(a);if("unknown"===d)return{opacity:0};const u=Object.assign({translationX:a.point.x,translationY:a.point.y,opacity:1},Zt[d]);return"removed"===d||"removed"===t?Object.assign(Object.assign(Object.assign({},u),{translationX:null===(l=h?.to)||void 0===l?void 0:l.x,translationY:null===(c=h?.to)||void 0===c?void 0:c.y,opacity:0}),Zt.removed):u}}}function Wr(s){return s.reduce(({min:t,max:e},i)=>((null==t||t.point.x>i.point.x)&&(t=i),(null==e||e.point.x<i.point.x)&&(e=i),{min:t,max:e}),{})}function dd(s,t,e){return{x:e,y:(t.y-s.y)/(t.x-s.x)*(e-s.x)+s.y}}function hd(s,t,e,i){let n=-1,o=0;const r=[];for(;o<s.length;)s[o].change!==t?s[o].change!==e?(r.length>0&&(i(r,n,o),r.length=0),n=o,o++):o++:(r.push(s[o]),o++);r.length>0&&i(r,n,o)}function zr(s,t){hd(s,"out","in",(e,i,n)=>{var o,r;-1===i&&s[n]?e.forEach(a=>a.to=s[n].from):n===s.length&&s[i]?e.forEach(a=>a.to=s[i].from):"intersect"===t&&null!==(o=s[i])&&void 0!==o&&o.from&&null!==(r=s[n])&&void 0!==r&&r.from?e.forEach(a=>a.to=dd(s[i].from,s[n].from,a.from.x)):e.forEach(a=>a.to=a.from)}),hd(s,"in","out",(e,i,n)=>{var o,r;-1===i&&s[n]?e.forEach(a=>a.from=s[n].to):n===s.length&&s[i]?e.forEach(a=>a.from=s[i].to):"intersect"===t&&null!==(o=s[i])&&void 0!==o&&o.to&&null!==(r=s[n])&&void 0!==r&&r.to?e.forEach(a=>a.from=dd(s[i].to,s[n].to,a.to.x)):e.forEach(a=>a.from=a.to)})}function ud(s,t,e){const i=isNaN(s.x)?t.x:s.x,n=isNaN(s.y)?t.y:s.y,o=t.x-s.x,r=t.y-s.y;return{x:i+(isNaN(o)?0:o*e),y:n+(isNaN(r)?0:r*e)}}function Vr(s,t,e){const{path:i}=e;let n;for(const o of s){const r=t[o.change];if(null==r)continue;const{from:a,to:l}=o;if(null==a||null==l)continue;const{x:c,y:d}=ud(a,l,r);if(!1===o.moveTo)i.lineTo(c,d);else if(!0!==o.moveTo&&n){if(n){const h="in"===o.moveTo?r:1-r,{x:u,y:p}=ud(n,{x:c,y:d},h);i.lineTo(u,p),i.moveTo(c,d)}}else i.moveTo(c,d);n={x:c,y:d}}}function Ur({id:s},t,e){ni(s,"path_properties",t,e,{clipScalingX:0},{clipScalingX:1},{start:{clipMode:"normal"},finish:{clipMode:void 0}})}function Hr(s){return t=>({opacity:s.getOpacity(),clipScalingX:1,clipMode:void 0})}function So(s,t){if(!t)return NaN;if(s instanceof Date&&(s=s.getTime()),"continuous"===t.type&&"number"==typeof s)return(s-t.domain[0])/(t.domain[1]-t.domain[0])*(t.range[1]-t.range[0])+t.range[0];if("log"===t.type&&"number"==typeof s)return t.convert(s);const e=t.domain.findIndex(i=>i===s);return e>=0?t.range[e]:NaN}function $f(s,t){const e=Number(s),i=Number(t);return isNaN(e)||isNaN(i)?s===t:Math.abs(i-e)<.25}function fd(s=!1,t=!1){return s===t?!!s:s?"in":"out"}function Ss(s,t,e={}){var i,n,o,r;const{backfillSplitMode:a="intersect"}=e,l=x=>{var k,E;return{x:So(null!==(k=x.xValue)&&void 0!==k?k:NaN,s.scales.x),y:So(null!==(E=x.yValue)&&void 0!==E?E:NaN,s.scales.y)}},c=x=>{var k,E;return{x:So(null!==(k=x.xValue)&&void 0!==k?k:NaN,t.scales.x),y:So(null!==(E=x.yValue)&&void 0!==E?E:NaN,t.scales.y)}},d=[],h={added:{},moved:{},removed:{}},u=(x,k,E,O="move")=>{x&&(isNaN(x.point.x)||isNaN(x.point.y))&&(x=k);const A={from:x?.point,to:k?.point,moveTo:fd(x?.point.moveTo,k?.point.moveTo),change:O};"move"===O?(h.moved[E]=A,b++,_++):"in"===O?(h.added[E]=A,_++):"out"===O&&(h.removed[E]=A,b++),d.push(A)},{min:p,max:f}=Wr(t.nodeData),{min:g,max:y}=Wr(s.nodeData);let b=0,_=0;for(;b<t.nodeData.length||_<s.nodeData.length;){const x=t.nodeData[b],k=s.nodeData[_],E=x?l(x):void 0,O=k?c(k):void 0,A=void 0;if(E&&$f(E.x,k?.point.x))u(x,k,k.xValue,"move");else if(E&&E.x<(null!==(i=g?.point.x)&&void 0!==i?i:-1/0))u(x,A,x.xValue,"out");else if(E&&E.x>(null!==(n=y?.point.x)&&void 0!==n?n:1/0))u(x,A,x.xValue,"out");else if(O&&O.x<(null!==(o=p?.point.x)&&void 0!==o?o:-1/0))u(A,k,k.xValue,"in");else if(O&&O.x>(null!==(r=f?.point.x)&&void 0!==r?r:1/0))u(A,k,k.xValue,"in");else if(E&&E.x<k?.point.x)u(x,A,x.xValue,"out");else if(O&&O.x<x?.point.x)u(A,k,k.xValue,"in");else if(x)u(x,A,x.xValue,"out");else{if(!k)throw new Error("Unable to process points");u(A,k,k.xValue,"in")}}return zr(d,a),{result:d,resultMap:h}}function _s(s,t,e,i={}){var n,o,r;const{backfillSplitMode:a="intersect",multiDatum:l=!1}=i,c=[],d={added:{},moved:{},removed:{}},h={added:{},moved:{},removed:{}};let u,p;const f=(x,k)=>{var E,O;const A="move"===k.change?"moved":"in"===k.change?"added":"removed";l?(null!==(E=(O=h[A])[x])&&void 0!==E||(O[x]=[]),h[A][x].push(k)):d[A][x]=k,u=k,p=x};let g=0,y=0,b=!1;for(;g<t.nodeData.length||y<s.nodeData.length;){const x=t.nodeData[g],k=s.nodeData[y];let E;if(x?.xValue===k?.xValue)E={change:"move",moveTo:fd(null!==(n=x.point.moveTo)&&void 0!==n&&n,k.point.moveTo),from:x.point,to:k.point},f(x.xValue,E),g++,y++;else if(e.removed.indexOf(x?.xValue)>=0)E={change:"out",moveTo:null!==(o=x.point.moveTo)&&void 0!==o&&o,from:x.point},f(x.xValue,E),g++;else if(e.added.indexOf(k?.xValue)>=0)E={change:"in",moveTo:null!==(r=k.point.moveTo)&&void 0!==r&&r,to:k.point},f(k.xValue,E),y++;else if(l&&u&&p===x?.xValue)E=Object.assign({},u),f(x.xValue,E),g++;else{if(!l||!u||p!==k?.xValue){b=!0;break}E=Object.assign({},u),f(k.xValue,E),y++}c.push(E)}let _=-1/0;return b||(b=c.some(x=>{const{change:k,to:{x:E=-1/0}={}}=x;if("out"===k)return;const O=E<_;return _=E,O})),b?{result:void 0,resultMap:void 0}:(zr(c,a),l?{result:c,resultMap:h}:{result:c,resultMap:d})}function Xr(s,t,e,i,n){const o=function gd(s,t){let e="updated";const i=n=>n.visible;return!i(t)&&i(s)?e="added":i(t)&&!i(s)&&(e="removed"),e}(s,t),c=function qf(s,t){const e="none"===t?"updated":s,i={fromFn:n=>{let o;return o="removed"===s?{finish:{visible:!1}}:"added"===s?{start:{visible:!0}}:{},Object.assign(Object.assign({},Zt[e]),o)},toFn:n=>Object.assign({},Zt[e])};return"fade"===t?{fromFn:n=>Object.assign({opacity:"added"===s?0:n.opacity},i.fromFn(n)),toFn:n=>Object.assign({opacity:"removed"===s?0:1},i.toFn(n))}:i}(o,i);return{status:o,path:{addPhaseFn:(d,h)=>{n(e,{move:1,in:d},h)},updatePhaseFn:(d,h)=>{n(e,{move:d},h)},removePhaseFn:(d,h)=>{n(e,{move:0,out:d},h)}},pathProperties:c}}m([S(nt),F({redraw:M.MAJOR}),v("design:type",Object)],se.prototype,"enabled",void 0),m([S(Hf),F({redraw:M.MAJOR}),v("design:type",Object)],se.prototype,"shape",void 0),m([S(C(0)),F({redraw:M.MAJOR}),v("design:type",Number)],se.prototype,"size",void 0),m([S(St),F({redraw:M.MAJOR}),v("design:type",String)],se.prototype,"fill",void 0),m([S(Z(0,1)),F({redraw:M.MAJOR}),v("design:type",Number)],se.prototype,"fillOpacity",void 0),m([S(St),F({redraw:M.MAJOR}),v("design:type",String)],se.prototype,"stroke",void 0),m([S(Z(0)),F({redraw:M.MAJOR}),v("design:type",Number)],se.prototype,"strokeWidth",void 0),m([S(Z(0,1)),F({redraw:M.MAJOR}),v("design:type",Number)],se.prototype,"strokeOpacity",void 0),m([S(Ke),F({redraw:M.MAJOR}),v("design:type",Function)],se.prototype,"formatter",void 0);var ks=function(s){return s[s.Fill=0]="Fill",s[s.Stroke=1]="Stroke",s[s.Marker=2]="Marker",s[s.Label=3]="Label",s}(ks||{});function _o(s){const{points:t}=s.fillData;return{top:t.slice(0,t.length/2),bottom:t.slice(t.length/2).reverse()}}function Ni(s,t,e){return{scales:t.scales,nodeData:e[s],visible:t.visible}}class Qt extends ui{constructor(t){super({moduleCtx:t,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[vt.NEAREST_BY_MAIN_AXIS_FIRST,vt.EXACT_SHAPE_MATCH],animationResetFns:{path:Hr({getOpacity:()=>this.getOpacity()}),label:xi,marker:(e,i)=>Object.assign(Object.assign({},{opacity:1,scalingX:1,scalingY:1}),xs(0,i))}}),this.tooltip=new be,this.marker=new se,this.label=new Gt,this.fill="#c16068",this.stroke="#874349",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.xName=void 0,this.strokeWidth=2,this.shadow=void 0}processData(t){return R(this,void 0,void 0,function*(){const{xKey:e,yKey:i,normalizedTo:n,data:o,visible:r,seriesGrouping:{groupIndex:a=this.id}={}}=this;if(null==e||null==i||null==o)return;const l=!this.ctx.animationManager.isSkipped(),{isContinuousX:c,isContinuousY:d}=this.isContinuous(),h=[`area-stack-${a}-yValues`,`area-stack-${a}-yValues-trailing`,`area-stack-${a}-yValues-prev`,`area-stack-${a}-yValues-trailing-prev`,`area-stack-${a}-yValues-marker`],u=[],p=n&&isFinite(n)?n:void 0;p&&(u.push(qs(this,[h[0],h[1],h[4]],p,"range")),u.push(qs(this,[h[2],h[3]],p,"range"))),!c&&l&&this.processedData&&u.push(hn(this.processedData)),l&&u.push(ns(this));const f={invalidValue:null};r||(f.forceValue=0),yield this.requestDataModel(t,o,{props:[ie(this,e,c,{id:"xValue"}),bt(this,i,d,Object.assign({id:"yValueRaw"},f)),...bi(this,i,d,"window","current",Object.assign(Object.assign({id:"yValueEnd"},f),{groupId:h[0]})),...bi(this,i,d,"window-trailing","current",Object.assign(Object.assign({id:"yValueStart"},f),{groupId:h[1]})),...bi(this,i,d,"window","last",Object.assign(Object.assign({id:"yValuePreviousEnd"},f),{groupId:h[2]})),...bi(this,i,d,"window-trailing","last",Object.assign(Object.assign({id:"yValuePreviousStart"},f),{groupId:h[3]})),...bi(this,i,d,"normal","current",Object.assign(Object.assign({id:"yValueCumulative"},f),{groupId:h[4]})),...u],groupByKeys:!0}),this.animationState.transition("updateData")})}getSeriesDomain(t){const{processedData:e,dataModel:i,axes:n}=this;if(!e||!i)return[];const o=n[I.X],r=n[I.Y],a=i.resolveProcessedDataDefById(this,"xValue"),l=i.getDomain(this,"xValue","key",e),c=i.getDomain(this,"yValueEnd","value",e);return t===I.X?"key"===a?.def.type&&"category"===a.def.valueType?l:Jt(Ee(l),o):Jt(r instanceof Ai||r instanceof zi?c:[c[0]>0?0:c[0],c[1]<0?0:c[1]],r)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e;return R(this,void 0,void 0,function*(){const{axes:i,data:n,processedData:{data:o}={},dataModel:r}=this,a=i[I.X],l=i[I.Y];if(!(a&&l&&n&&r))return[];const{yKey:c="",xKey:d="",marker:h,label:u,fill:p,stroke:f}=this,{scale:g}=a,{scale:y}=l,b=ot.is(y),_=(null!==(e=g.bandwidth)&&void 0!==e?e:0)/2,x=r.resolveProcessedDataDefsByIds(this,["yValueStart","yValueEnd","yValueRaw","yValuePreviousStart","yValuePreviousEnd","yValueCumulative"]),k=tt=>{const{point:et}=tt,Q=le(tt,["point"]);return Object.assign(Object.assign({},Q),{point:Object.assign(Object.assign({},et),{moveTo:!0})})},E=(tt,et,Q)=>{const lt=g.convert(tt)+_,dt=y.convert(et);return[{point:{x:lt,y:y.convert(Q)},yValue:Q,xValue:tt},{point:{x:lt,y:dt},yValue:et,xValue:tt}]},O=(tt,et,Q)=>{let lt;const dt=this.normalizedTo&&isFinite(this.normalizedTo),Dt=dt&&b&&or(Q);return(!dt&&!isNaN(Q)||Dt)&&(lt=et),{x:g.convert(tt)+_,y:y.convert(lt),size:h.size}},A=c,D=[],L=[],T={itemId:A,fillData:{itemId:A,points:[]},strokeData:{itemId:A,points:[]},labelData:D,nodeData:L,scales:t.calculateScaling.call(this),visible:this.visible},N=T.fillData.points,w=[],P=T.strokeData.points;let $,V=-1,q=-1/0;return o?.forEach(tt=>{const{keys:et,keys:[Q],datum:lt,values:dt}=tt;dt.forEach((Dt,Kt)=>{var pt,Oe,G;V++;const ft=lt[Kt],xt=r.resolveProcessedDataDefsValues(x,{keys:et,values:Dt}),{yValueRaw:ht,yValueCumulative:fe}=xt;let{yValueStart:zt,yValueEnd:Ft,yValuePreviousStart:Vt,yValuePreviousEnd:Ms}=xt;const Bn=null!=ht,Rs=O(Q,+fe,ht);if(Bn&&h&&L.push({index:V,series:this,itemId:A,datum:ft,midPoint:{x:Rs.x,y:Rs.y},cumulativeValue:Ft,yValue:ht,xValue:Q,yKey:c,xKey:d,point:Rs,fill:null!==(pt=h.fill)&&void 0!==pt?pt:p,stroke:null!==(Oe=h.stroke)&&void 0!==Oe?Oe:f,strokeWidth:null!==(G=h.strokeWidth)&&void 0!==G?G:this.getStrokeWidth(this.strokeWidth)}),Bn&&u){const Ud=this.getLabelText(u,{value:ht,datum:ft,xKey:d,yKey:c,xName:this.xName,yName:this.yName},ha=>ee(ha)?ha.toFixed(2):String(ha));D.push({index:V,series:this,itemId:c,datum:ft,x:Rs.x,y:Rs.y,label:Ud?{text:Ud,fontStyle:u.fontStyle,fontWeight:u.fontWeight,fontSize:u.fontSize,fontFamily:u.fontFamily,textAlign:"center",textBaseline:"bottom",fill:u.color}:void 0})}(null==q||null==ht)&&(zt=zt??0,Ft=zt??0,Vt=Vt??0,Ms=Vt??0);const[zd,Sy]=E($,Vt,Ms),[Vd,_y]=E(Q,zt,Ft);null!=$&&null!=Q&&(N.push(zd),w.push(Sy),N.push(Vd),w.push(_y)),Bn&&null!=q&&V>0&&(P.push(k(zd)),P.push(Vd)),$=Q,q=ht})}),P.length>0&&(P[0]=k(P[0])),w.reverse(),N.push(...w),[T]})}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(Oi(t))}updatePathNodes(t){return R(this,void 0,void 0,function*(){const{opacity:e,visible:i,animationEnabled:n}=t,[o,r]=t.paths,{seriesRectHeight:a,seriesRectWidth:l}=this.nodeDataDependencies,c=this.getStrokeWidth(this.strokeWidth);r.setProperties({tag:ks.Stroke,fill:void 0,lineJoin:r.lineCap="round",pointerEvents:qt.None,stroke:this.stroke,strokeWidth:c,strokeOpacity:this.strokeOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,opacity:e,visible:i}),o.setProperties({tag:ks.Fill,stroke:void 0,lineJoin:"round",pointerEvents:qt.None,fill:this.fill,fillOpacity:this.fillOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,strokeOpacity:this.strokeOpacity,fillShadow:this.shadow,opacity:e,visible:i||n,strokeWidth:c});const d=h=>{var u,p;null==h.clipPath&&(h.clipPath=new Bi,h.clipScalingX=1,h.clipScalingY=1),null===(u=h.clipPath)||void 0===u||u.clear({trackChanges:!0}),null===(p=h.clipPath)||void 0===p||p.rect(-25,-25,(l??0)+50,(a??0)+50)};d(r),d(o)})}updatePaths(t){return R(this,void 0,void 0,function*(){this.updateAreaPaths([t.paths],[t.contextData])})}updateAreaPaths(t,e){this.updateFillPath(t,e),this.updateStrokePath(t,e)}updateFillPath(t,e){e.forEach(({fillData:i},n)=>{const[o]=t[n],{path:r}=o;r.clear({trackChanges:!0});for(const{point:a}of i.points)a.moveTo?r.moveTo(a.x,a.y):r.lineTo(a.x,a.y);r.closePath(),o.checkPathDirty()})}updateStrokePath(t,e){e.forEach(({strokeData:i},n)=>{const[,o]=t[n],{path:r}=o;r.clear({trackChanges:!0});for(const{point:a}of i.points)a.moveTo?r.moveTo(a.x,a.y):r.lineTo(a.x,a.y);o.checkPathDirty()})}updateMarkerSelection(t){return R(this,void 0,void 0,function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:n}}=this,o=n&&e?e:[];return this.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(o)})}updateMarkerNodes(t){return R(this,void 0,void 0,function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:n="",yKey:o="",marker:r,fill:a,stroke:l,strokeWidth:c,fillOpacity:d,strokeOpacity:h}=this,u=te(i&&this.highlightStyle.item,r.getStyle(),{fill:a,stroke:l,strokeWidth:c,fillOpacity:d,strokeOpacity:h});e.each((p,f)=>{this.updateMarkerStyle(p,r,{datum:f,highlighted:i,xKey:n,yKey:o},u)}),i||this.marker.markClean()})}updateLabelSelection(t){return R(this,void 0,void 0,function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,n=>{n.tag=ks.Label})})}updateLabelNodes(t){return R(this,void 0,void 0,function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:n,fontWeight:o,fontSize:r,fontFamily:a,color:l}=this.label;e.each((c,d)=>{const{x:h,y:u,label:p}=d;p&&i&&this.visible?(c.fontStyle=n,c.fontWeight=o,c.fontSize=r,c.fontFamily=a,c.textAlign=p.textAlign,c.textBaseline=p.textBaseline,c.text=p.text,c.x=h,c.y=u-10,c.fill=l,c.visible=!0):c.visible=!1})})}getTooltipHtml(t){const{xKey:e,id:i,axes:n,xName:o,yName:r,tooltip:a,marker:l,dataModel:c}=this,{yKey:d,xValue:h,yValue:u,datum:p}=t,f=n[I.X],g=n[I.Y];if(!(e&&d&&f&&g&&ee(u)&&c))return"";const y=f.formatDatum(h),b=g.formatDatum(u),_=mt(r),x=mt(y+": "+b),k=te({fill:this.fill},l.getStyle(),{stroke:this.stroke,strokeWidth:this.strokeWidth}),{fill:E}=this.getMarkerStyle(l,{datum:t,xKey:e,yKey:d,highlighted:!1},k);return a.toTooltipHtml({title:_,content:x,backgroundColor:E},{datum:p,xKey:e,xName:o,yKey:d,yName:r,color:E,title:_,seriesId:i})}getLegendData(t){var e,i,n,o,r;const{data:a,id:l,xKey:c,yKey:d,yName:h,marker:u,fill:p,stroke:f,fillOpacity:g,strokeOpacity:y,visible:b}=this;return a?.length&&c&&d&&"category"===t?[{legendType:t,id:l,itemId:d,seriesId:l,enabled:b,label:{text:h??d},marker:{shape:u.shape,fill:null!==(e=u.fill)&&void 0!==e?e:p,stroke:null!==(i=u.stroke)&&void 0!==i?i:f,fillOpacity:null!==(n=u.fillOpacity)&&void 0!==n?n:g,strokeOpacity:null!==(o=u.strokeOpacity)&&void 0!==o?o:y,strokeWidth:null!==(r=u.strokeWidth)&&void 0!==r?r:0}}]:[]}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,contextData:n,paths:o}=t,{animationManager:r}=this.ctx,{seriesRectWidth:a=0}=this.nodeDataDependencies;this.updateAreaPaths(o,n),Ur(this,r,o.flat()),Mt(e,xs),jr(this,r,e,a),kt(this,"labels",r,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:n}=this.ctx,{markerSelections:o,labelSelections:r,contextData:a,paths:l,previousContextData:c}=t;if(super.resetAllAnimation(t),0===a.length||!c||0===c.length)return n.skipCurrentBatch(),void this.updateAreaPaths(l,a);const[[d,h]]=l,[u]=a,[p]=c,f=function md(s,t,e){var i;const n="category"===(null===(i=s.scales.x)||void 0===i?void 0:i.type);let o="updated";t.visible&&!s.visible?o="removed":!t.visible&&s.visible&&(o="added");const{resultMap:l}=n&&e?_s(s,t,e,{backfillSplitMode:"static",multiDatum:!0}):Ss(s,t,{backfillSplitMode:"static"}),{top:c,bottom:d}=n&&e?function Zf(s,t,e){const i=_o(t),n=_o(s),o={multiDatum:!0};return{top:_s(Ni("top",s,n),Ni("top",t,i),e,o),bottom:_s(Ni("bottom",s,n),Ni("bottom",t,i),e,o)}}(s,t,e):function Jf(s,t){const e=_o(t),i=_o(s);return{top:Ss(Ni("top",s,i),Ni("top",t,e)),bottom:Ss(Ni("bottom",s,i),Ni("bottom",t,e))}}(s,t);if(void 0===l||void 0===c.result||void 0===d.result)return;return{fill:Xr(s,t,[...c.result,...d.result.reverse()],"none",Vr),marker:Yr(l,o)}}(u,p,null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff);if(void 0===f)return n.skipCurrentBatch(),void this.updateAreaPaths(l,a);Et(this.id,"marker_update",n,o,f.marker),Et(this.id,"fill_path_properties",n,[d],f.fill.pathProperties),cd(this.id,"fill_path_update",n,[d],f.fill.path),this.updateStrokePath(l,a),function pd({id:s},t,e,i){ni(s,t,e,i,{opacity:0},{opacity:1},Jn)}(this,"stroke",n,[h]),kt(this,"labels",n,r)}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new z}}Qt.className="AreaSeries",Qt.type="area",m([S(me),v("design:type",String)],Qt.prototype,"fill",void 0),m([S(me),v("design:type",String)],Qt.prototype,"stroke",void 0),m([S(C(0,1)),v("design:type",Object)],Qt.prototype,"fillOpacity",void 0),m([S(C(0,1)),v("design:type",Object)],Qt.prototype,"strokeOpacity",void 0),m([S(mi),v("design:type",Array)],Qt.prototype,"lineDash",void 0),m([S(C(0)),v("design:type",Number)],Qt.prototype,"lineDashOffset",void 0),m([S(Y),v("design:type",String)],Qt.prototype,"xKey",void 0),m([S(Y),v("design:type",String)],Qt.prototype,"xName",void 0),m([S(Y),v("design:type",String)],Qt.prototype,"yKey",void 0),m([S(Y),v("design:type",String)],Qt.prototype,"yName",void 0),m([S(Z(0)),v("design:type",Number)],Qt.prototype,"normalizedTo",void 0),m([S(C(0)),v("design:type",Object)],Qt.prototype,"strokeWidth",void 0);const Qf={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",instanceConstructor:Qt,stackable:!0,seriesDefaults:Zc,themeTemplate:{__extends__:pi,nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:Tn,xOffset:3,yOffset:3,blur:5},marker:{__extends__:En,enabled:!1,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:wt,color:Yt,formatter:void 0}},paletteFactory:s=>{const{marker:t}=ms(s);return{fill:t.fill,stroke:t.stroke,marker:t}}};class Kr extends ui{constructor(){super(...arguments),this.direction="vertical"}getBandScalePadding(){return{inner:.2,outer:.1}}shouldFlipXY(){return"horizontal"===this.direction}getBarDirection(){return this.shouldFlipXY()?I.X:I.Y}getCategoryDirection(){return this.shouldFlipXY()?I.Y:I.X}getValueAxis(){const t=this.getBarDirection();return this.axes[t]}getCategoryAxis(){const t=this.getCategoryDirection();return this.axes[t]}}function Os(s,t){const{startingX:e,startingY:i}=function eg(s,t){const e=t[s?I.Y:I.X];let i=1/0,n=0;return e?(s?n=e.scale.convert(ot.is(e.scale)?0:Math.max(...e.range)):i=e.scale.convert(ot.is(e.scale)?0:Math.min(...e.range)),{startingX:i,startingY:n}):{startingX:i,startingY:n}}(s,t),n=r=>{var a;return Xn(null!==(a=r.yValue)&&void 0!==a?a:0)};return{isVertical:s,calculate:(r,a)=>{let l=s?r.x:e,c=s?i:r.y,d=s?r.width:0,h=s?0:r.height;return a&&(isNaN(l)||isNaN(c))&&(({x:l,y:c}=a),d=s?a.width:0,h=s?0:a.height,s&&!n(a)?c+=a.height:!s&&n(a)&&(l+=a.width)),{x:l,y:c,width:d,height:h}}}}function Es(s){const t=n=>null==n||isNaN(n.x)||isNaN(n.y);return{toFn:(n,o,r)=>"removed"===r||t(o)?s.calculate(o,n.previousDatum):{x:o.x,y:o.y,width:o.width,height:o.height},fromFn:(n,o,r)=>{"updated"===r&&t(o)?r="removed":"updated"===r&&t(n.previousDatum)&&(r="added");let a={x:n.x,y:n.y,width:n.width,height:n.height};return("unknown"===r||"added"===r)&&(a=s.calculate(o,n.previousDatum)),Object.assign(Object.assign({},a),Zt[r])}}}function $r(s,{x:t,y:e,width:i,height:n}){return{x:t,y:e,width:i,height:n}}m([S(qo),v("design:type",String)],Kr.prototype,"direction",void 0);var qr=function(s){return s[s.Bar=0]="Bar",s[s.Label=1]="Label",s}(qr||{});class kd extends Gt{constructor(){super(...arguments),this.placement="inside"}}m([S(Ws("inside","outside")),v("design:type",String)],kd.prototype,"placement",void 0);class Wt extends Kr{constructor(t){super({moduleCtx:t,pickModes:[vt.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationResetFns:{datum:$r,label:xi}}),this.label=new kd,this.tooltip=new be,this.fill="#c16068",this.stroke="#874349",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.stackGroup=void 0,this.strokeWidth=1,this.shadow=void 0,this.groupScale=new sn,this.smallestDataInterval=void 0}resolveKeyDirection(t){return this.getBarDirection()===I.X?t===I.X?I.Y:I.X:t}processData(t){var e,i,n,o;return R(this,void 0,void 0,function*(){const{xKey:r,yKey:a,normalizedTo:l,seriesGrouping:{groupIndex:c=this.id}={},data:d=[]}=this;if(null==r||null==a||null==d)return;const h=!this.ctx.animationManager.isSkipped(),u=Math.abs(l??NaN),p=ot.is(null===(e=this.getCategoryAxis())||void 0===e?void 0:e.scale),f=ot.is(null===(i=this.getValueAxis())||void 0===i?void 0:i.scale),g=`bar-stack-${c}-yValues`,y=`${g}-trailing`,b=u&&isFinite(u)?u:void 0,_=[];b&&_.push(qs(this,[g,y],b,"range")),h&&this.processedData&&_.push(hn(this.processedData)),h&&_.push(ns(this));const x=this.visible?{}:{forceValue:0},{processedData:k}=yield this.requestDataModel(t,d,{props:[ie(this,r,p,{id:"xValue"}),bt(this,a,f,Object.assign({id:"yValue-raw",invalidValue:null},x)),...bi(this,a,f,"normal","current",Object.assign({id:"yValue-end",invalidValue:null,missingValue:0,groupId:g,separateNegative:!0},x)),...bi(this,a,f,"trailing","current",Object.assign({id:"yValue-start",invalidValue:null,missingValue:0,groupId:y,separateNegative:!0},x)),...p?[rr]:[],..._],groupByKeys:!0});this.smallestDataInterval={x:null!==(o=null===(n=k.reduced)||void 0===n?void 0:n.smallestKeyInterval)&&void 0!==o?o:1/0,y:1/0},this.animationState.transition("updateData")})}getSeriesDomain(t){var e;const{processedData:i,dataModel:n}=this;if(!i||!n)return[];const{reduced:{[rr.property]:o}={}}=i,r=this.getCategoryAxis(),a=this.getValueAxis(),l=n.resolveProcessedDataDefById(this,"xValue"),c=n.getDomain(this,"xValue","key",i),d=n.getDomain(this,"yValue-end","value",i);if(t===this.getCategoryDirection()){if("key"===l?.def.type&&"category"===l?.def.valueType)return c;const h=null!=o&&isFinite(o)?o:0,u=null!==(e=Ee(c))&&void 0!==e?e:[NaN,NaN];return Jt(t===I.Y?[u[0]+-h,u[1]]:[u[0],u[1]+h],r)}return this.getValueAxis()instanceof Ai?Jt(d,a):Jt([d[0]>0?0:d[0],d[1]<0?0:d[1]],a)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});return R(this,void 0,void 0,function*(){const{dataModel:e}=this,i=this.getCategoryAxis(),n=this.getValueAxis();if(!(e&&i&&n))return[];const o=i.scale,r=n.scale,{groupScale:a,yKey:l="",xKey:c="",fill:d,stroke:h,strokeWidth:u,label:p,processedData:f,ctx:{seriesStateManager:g},smallestDataInterval:y}=this,b=ot.is(o)?o.calcBandwidth(y?.x):o.bandwidth,_=[],{index:x,visibleGroupCount:k}=g.getVisiblePeerGroupIndex(this);for(let w=0;w<k;w++)_.push(String(w));a.domain=_,a.range=[0,b??0],i instanceof li?a.paddingInner=i.groupPaddingInner:a.padding=i instanceof ji?.1:0,a.round=0!==a.padding;const E=a.bandwidth>=1?a.bandwidth:a.rawBandwidth,O=e.resolveProcessedDataIndexById(this,"xValue").index,A=e.resolveProcessedDataIndexById(this,"yValue-raw").index,D=e.resolveProcessedDataIndexById(this,"yValue-start").index,L=e.resolveProcessedDataIndexById(this,"yValue-end").index,T=!this.ctx.animationManager.isSkipped(),N={itemId:l,nodeData:[],labelData:[],scales:t.calculateScaling.call(this),visible:this.visible||T};return f?.data.forEach(({keys:w,datum:P,values:V})=>{const $=w[O],q=o.convert($),tt=+V[0][L],et=+V[0][D],Q=V[0][A],lt=q+a.convert(String(x));if(isNaN(tt))return;const dt=r.convert(tt),Dt=r.convert(et),Kt=this.getBarDirection()===I.X,pt={x:Kt?Math.min(dt,Dt):lt,y:Kt?lt:Math.min(dt,Dt),width:Kt?Math.abs(Dt-dt):E,height:Kt?E:Math.abs(Dt-dt)},{fontStyle:Oe,fontWeight:G,fontSize:ft,fontFamily:xt,color:ht,placement:fe}=p,zt=this.getLabelText(this.label,{datum:P[0],value:Q,xKey:c,yKey:l,xName:this.xName,yName:this.yName,legendItemName:this.legendItemName},Bn=>ee(Bn)?Bn.toFixed(2):""),Ft=zt?Object.assign({text:zt,fill:ht,fontStyle:Oe,fontWeight:G,fontSize:ft,fontFamily:xt},function _d({isPositive:s,isVertical:t,placement:e,padding:i=0,rect:n}){let o=n.x+n.width/2,r=n.y+n.height/2,a="center",l="middle";switch(e){case"start":t?(r=s?n.y+n.height+i:n.y-i,l=s?"top":"bottom"):(o=s?n.x-i:n.x+n.width+i,a=s?"start":"end");break;case"outside":case"end":t?(r=s?n.y-i:n.y+n.height+i,l=s?"bottom":"top"):(o=s?n.x+n.width+i:n.x-i,a=s?"start":"end")}return{x:o,y:r,textAlign:a,textBaseline:l}}({isPositive:Q>=0,isVertical:!Kt,placement:fe,rect:pt})):void 0,Vt=this.shouldFlipXY()?pt.height:pt.width,Ms={series:this,itemId:l,datum:P[0],cumulativeValue:tt,xValue:$,yValue:Q,yKey:l,xKey:c,capDefaults:{lengthRatioMultiplier:Vt,lengthMax:Vt},x:pt.x,y:pt.y,width:pt.width,height:pt.height,midPoint:{x:pt.x+pt.width/2,y:pt.y+pt.height/2},fill:d,stroke:h,strokeWidth:u,label:Ft};N.nodeData.push(Ms),N.labelData.push(Ms)}),[N]})}nodeFactory(){return new _e}updateDatumSelection(t){return R(this,void 0,void 0,function*(){return t.datumSelection.update(t.nodeData,e=>{e.tag=qr.Bar},e=>e.xValue)})}updateDatumNodes(t){return R(this,void 0,void 0,function*(){const{datumSelection:e,isHighlight:i}=t,{yKey:n="",fill:o,stroke:r,fillOpacity:a,strokeOpacity:l,lineDash:c,lineDashOffset:d,shadow:h,formatter:u,id:p,highlightStyle:{item:f},ctx:g,stackGroup:y}=this,b=this.axes[I.X],_=function xd(s=[]){const[t,e]=s;return!(0!==t||1!==e)}(b?.visibleRange),x=this.getCategoryDirection()===I.X;e.each((k,E)=>{const O={fill:o,stroke:r,fillOpacity:a,strokeOpacity:l,lineDash:c,lineDashOffset:d,fillShadow:h,strokeWidth:this.getStrokeWidth(this.strokeWidth)},A=x?E.width>0:E.height>0,D=function bd(s){var t,e,i,n,o,{datum:r,isHighlighted:a,style:l,highlightStyle:c,formatter:d,seriesId:h,ctx:{callbackCache:u}}=s,p=le(s,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","ctx"]);const{fill:f,fillOpacity:g,stroke:y,strokeWidth:b}=te(a&&c,l),{strokeOpacity:_,fillShadow:x,lineDash:k,lineDashOffset:E}=l;let O;return d&&(O=u.call(d,Object.assign({datum:r.datum,xKey:r.xKey,fill:f,stroke:y,strokeWidth:b,highlighted:a,seriesId:h},p))),{fill:null!==(t=O?.fill)&&void 0!==t?t:f,stroke:null!==(e=O?.stroke)&&void 0!==e?e:y,strokeWidth:null!==(i=O?.strokeWidth)&&void 0!==i?i:b,fillOpacity:null!==(n=O?.fillOpacity)&&void 0!==n?n:g,strokeOpacity:null!==(o=O?.strokeOpacity)&&void 0!==o?o:_,lineDash:k,lineDashOffset:E,fillShadow:x}}({datum:E,isHighlighted:i,style:O,highlightStyle:f,formatter:u,seriesId:p,stackGroup:y,ctx:g,yKey:n});D.crisp=_,D.visible=A,function vd({rect:s,config:t}){const{crisp:e=!0,fill:i,stroke:n,strokeWidth:o,fillOpacity:r,strokeOpacity:a,lineDash:l,lineDashOffset:c,fillShadow:d,visible:h=!0}=t;s.crisp=e,s.fill=i,s.stroke=n,s.strokeWidth=o,s.fillOpacity=r,s.strokeOpacity=a,s.lineDash=l,s.lineDashOffset=c,s.fillShadow=d,s.visible=h}({rect:k,config:D})})})}updateLabelSelection(t){return R(this,void 0,void 0,function*(){return t.labelSelection.update(this.label.enabled?t.labelData:[],i=>{i.tag=qr.Label,i.pointerEvents=qt.None})})}updateLabelNodes(t){return R(this,void 0,void 0,function*(){t.labelSelection.each((e,i)=>{!function Sd(s,t,e){if(t.enabled&&e){const{x:i,y:n,text:o,textAlign:r,textBaseline:a}=e,{color:l,fontStyle:c,fontWeight:d,fontSize:h,fontFamily:u}=t;s.setProperties({visible:!0,x:i,y:n,text:o,fill:l,fontStyle:c,fontWeight:d,fontSize:h,fontFamily:u,textAlign:r,textBaseline:a})}else s.visible=!1}(e,this.label,i.label)})})}getTooltipHtml(t){var e;const{xKey:i,yKey:n,processedData:o,ctx:{callbackCache:r}}=this,a=this.getCategoryAxis(),l=this.getValueAxis(),{xValue:c,yValue:d,datum:h}=t;if(!(o&&i&&n&&a&&l))return"";const{xName:u,yName:p,fill:f,stroke:g,tooltip:y,formatter:b,id:_,stackGroup:x}=this,k=this.getStrokeWidth(this.strokeWidth),E=a.formatDatum(c),O=l.formatDatum(d),A=mt(p),D=mt(E+": "+O);let L;b&&(L=r.call(b,{datum:h,fill:f,stroke:g,strokeWidth:k,highlighted:!1,xKey:i,yKey:n,seriesId:_,stackGroup:x}));const T=null!==(e=L?.fill)&&void 0!==e?e:f;return y.toTooltipHtml({title:A,content:D,backgroundColor:T},Object.assign({datum:h,xKey:i,xName:u,yKey:n,yName:p,color:T,title:A,seriesId:_,stackGroup:x},this.getModuleTooltipParams(h)))}getLegendData(t){var e;const{id:i,data:n,xKey:o,yKey:r,yName:a,legendItemName:l,fill:c,stroke:d,strokeWidth:h,fillOpacity:u,strokeOpacity:p,visible:f,showInLegend:g}=this;return"category"===t&&g&&n?.length&&o&&r?[{legendType:"category",id:i,itemId:r,seriesId:i,enabled:f,label:{text:null!==(e=l??a)&&void 0!==e?e:r},marker:{fill:c,stroke:d,fillOpacity:u,strokeOpacity:p,strokeWidth:h},legendItemName:l}]:[]}animateEmptyUpdateReady({datumSelections:t,labelSelections:e,annotationSelections:i}){const n=Es(Os("vertical"===this.direction,this.axes));Et(this.id,"nodes",this.ctx.animationManager,t,n),kt(this,"labels",this.ctx.animationManager,e),kt(this,"annotations",this.ctx.animationManager,i)}animateWaitingUpdateReady(t){var e,i;const{datumSelections:n,labelSelections:o,annotationSelections:r}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);const a=null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff,l=Es(Os("vertical"===this.direction,this.axes));Et(this.id,"nodes",this.ctx.animationManager,n,l,(c,d)=>String(d.xValue),a),kt(this,"labels",this.ctx.animationManager,o),kt(this,"annotations",this.ctx.animationManager,r)}isLabelEnabled(){return this.label.enabled}}Wt.className="BarSeries",Wt.type="bar",m([S(St),v("design:type",String)],Wt.prototype,"fill",void 0),m([S(St),v("design:type",String)],Wt.prototype,"stroke",void 0),m([S(C(0,1)),v("design:type",Object)],Wt.prototype,"fillOpacity",void 0),m([S(C(0,1)),v("design:type",Object)],Wt.prototype,"strokeOpacity",void 0),m([S(mi),v("design:type",Array)],Wt.prototype,"lineDash",void 0),m([S(C(0)),v("design:type",Number)],Wt.prototype,"lineDashOffset",void 0),m([S(Ke),v("design:type",Function)],Wt.prototype,"formatter",void 0),m([S(Y),v("design:type",String)],Wt.prototype,"xKey",void 0),m([S(Y),v("design:type",String)],Wt.prototype,"xName",void 0),m([S(Y),v("design:type",String)],Wt.prototype,"yKey",void 0),m([S(Y),v("design:type",String)],Wt.prototype,"yName",void 0),m([S(Y),v("design:type",String)],Wt.prototype,"stackGroup",void 0),m([S(Z()),v("design:type",Number)],Wt.prototype,"normalizedTo",void 0),m([S(C(0)),v("design:type",Number)],Wt.prototype,"strokeWidth",void 0);const ig={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",instanceConstructor:Wt,stackable:!0,groupable:!0,seriesDefaults:{axes:[{type:Pe_NUMBER,position:Ie_LEFT},{type:Pe_CATEGORY,position:Ie_BOTTOM}]},swapDefaultAxesCondition:s=>"horizontal"===s?.direction,themeTemplate:{__extends__:pi,fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:kn,fontSize:12,fontFamily:wt,color:An,formatter:void 0,placement:"inside"},shadow:{enabled:!1,color:Tn,xOffset:3,yOffset:3,blur:5}},enterpriseThemeTemplate:{errorBar:{cap:{lengthRatio:.3}}},paletteFactory:Cr};class ng extends Lr{constructor(t,e,i,n){super(t,e,i,n),this.sizeKey=n.sizeKey}}class Zr extends se{constructor(){super(...arguments),this.maxSize=30,this.domain=void 0}}m([S(C(0)),F({redraw:M.MAJOR}),v("design:type",Object)],Zr.prototype,"maxSize",void 0),m([S(Ys),F({redraw:M.MAJOR}),v("design:type",Array)],Zr.prototype,"domain",void 0);class Xt extends ui{constructor(t){super({moduleCtx:t,pickModes:[vt.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,vt.NEAREST_NODE,vt.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:xi,marker:bs}}),this.NodeClickEvent=ng,this.sizeScale=new Fi,this.marker=new Zr,this.label=new Gt,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.sizeName="Size",this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.sizeKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new ys,this.tooltip=new be}processData(t){var e,i;return R(this,void 0,void 0,function*(){const{xKey:n,yKey:o,sizeKey:r,labelKey:a,colorScale:l,colorDomain:c,colorRange:d,colorKey:h,marker:u,data:p}=this;if(null==n||null==o||null==r||null==p)return;const{isContinuousX:f,isContinuousY:g}=this.isContinuous(),{dataModel:y,processedData:b}=yield this.requestDataModel(t,p,{props:[ie(this,n,f,{id:"xKey-raw"}),ie(this,o,g,{id:"yKey-raw"}),...a?[ie(this,a,!1,{id:"labelKey-raw"})]:[],bt(this,n,f,{id:"xValue"}),bt(this,o,g,{id:"yValue"}),bt(this,r,!0,{id:"sizeValue"}),...h?[bt(this,h,!0,{id:"colorValue"})]:[],...a?[bt(this,a,!1,{id:"labelValue"})]:[]],dataVisible:this.visible}),_=y.resolveProcessedDataIndexById(this,"sizeValue").index,x=null!==(e=b.domain.values[_])&&void 0!==e?e:[];if(this.sizeScale.domain=u.domain?u.domain:x,h){const k=y.resolveProcessedDataIndexById(this,"colorValue").index;l.domain=null!==(i=c??b.domain.values[k])&&void 0!==i?i:[],l.range=d,l.update()}this.animationState.transition("updateData")})}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const n=t===I.X?"xValue":"yValue",o=e.resolveProcessedDataDefById(this,n),r=e.getDomain(this,n,"value",i);if("value"===o?.def.type&&"category"===o?.def.valueType)return r;const a=this.axes[t];return Jt(Ee(r),a)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e,i,n,o;return R(this,void 0,void 0,function*(){const{visible:r,axes:a,yKey:l="",xKey:c="",label:d,labelKey:h,dataModel:u,processedData:p,colorScale:f,sizeKey:g="",colorKey:y}=this,b=a[I.X],_=a[I.Y];if(!(u&&p&&r&&b&&_))return[];const x=u.resolveProcessedDataIndexById(this,"xValue").index,k=u.resolveProcessedDataIndexById(this,"yValue").index,E=g?u.resolveProcessedDataIndexById(this,"sizeValue").index:-1,O=y?u.resolveProcessedDataIndexById(this,"colorValue").index:-1,A=h?u.resolveProcessedDataIndexById(this,"labelValue").index:-1,D=b.scale,L=_.scale,T=(null!==(e=D.bandwidth)&&void 0!==e?e:0)/2,N=(null!==(i=L.bandwidth)&&void 0!==i?i:0)/2,{sizeScale:w,marker:P}=this,V=[];w.range=[P.size,P.maxSize];const $=d.getFont();for(const{values:q,datum:tt}of null!==(n=p.data)&&void 0!==n?n:[]){const et=q[x],Q=q[k],lt=D.convert(et)+T,dt=L.convert(Q)+N,Dt=this.getLabelText(d,{value:h?q[A]:Q,datum:tt,xKey:c,yKey:l,sizeKey:g,labelKey:h,xName:this.xName,yName:this.yName,sizeName:this.sizeName,labelName:this.labelName}),Kt=ct.getTextSize(String(Dt),$),pt=g?w.convert(q[E]):P.size,Oe=y?f.convert(q[O]):void 0;V.push({series:this,itemId:l,yKey:l,xKey:c,datum:tt,xValue:et,yValue:Q,sizeValue:q[E],point:{x:lt,y:dt,size:pt},midPoint:{x:lt,y:dt},fill:Oe,label:Object.assign({text:Dt},Kt)})}return[{itemId:null!==(o=this.yKey)&&void 0!==o?o:this.id,nodeData:V,labelData:V,scales:t.calculateScaling.call(this),visible:this.visible}]})}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var t;return null===(t=this.contextNodeData)||void 0===t?void 0:t.reduce((e,i)=>e.concat(i.labelData),[])}markerFactory(){const{shape:t}=this.marker;return new(Oi(t))}updateMarkerSelection(t){return R(this,void 0,void 0,function*(){const{nodeData:e,markerSelection:i}=t;return this.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.marker.enabled?e:[],void 0,o=>this.getDatumId(o))})}updateMarkerNodes(t){return R(this,void 0,void 0,function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:n="",yKey:o="",sizeKey:r="",labelKey:a,marker:l}=this,c=te(i&&this.highlightStyle.item,l.getStyle());this.sizeScale.range=[l.size,l.maxSize],e.each((d,h)=>{this.updateMarkerStyle(d,l,{datum:h,highlighted:i,xKey:n,yKey:o,sizeKey:r,labelKey:a},c)}),i||this.marker.markClean()})}updateLabelSelection(t){var e,i;return R(this,void 0,void 0,function*(){const{labelSelection:n}=t,{label:{enabled:o}}=this,a=(o&&null!==(i=null===(e=this.chart)||void 0===e?void 0:e.placeLabels().get(this))&&void 0!==i?i:[]).map(l=>Object.assign(Object.assign({},l.datum),{point:{x:l.x,y:l.y,size:l.datum.point.size}}));return n.update(a)})}updateLabelNodes(t){return R(this,void 0,void 0,function*(){const{labelSelection:e}=t,{label:i}=this;e.each((n,o)=>{var r,a,l,c;n.text=o.label.text,n.fill=i.color,n.x=null!==(a=null===(r=o.point)||void 0===r?void 0:r.x)&&void 0!==a?a:0,n.y=null!==(c=null===(l=o.point)||void 0===l?void 0:l.y)&&void 0!==c?c:0,n.fontStyle=i.fontStyle,n.fontWeight=i.fontWeight,n.fontSize=i.fontSize,n.fontFamily=i.fontFamily,n.textAlign="left",n.textBaseline="top"})})}getTooltipHtml(t){var e;const{xKey:i,yKey:n,sizeKey:o,axes:r}=this,a=r[I.X],l=r[I.Y];if(!(i&&n&&a&&l&&o))return"";const{marker:c,tooltip:d,xName:h,yName:u,sizeName:p,labelKey:f,labelName:g,id:y}=this,b=te({fill:t.fill,strokeWidth:this.getStrokeWidth(c.strokeWidth)},c.getStyle()),{fill:_="gray"}=this.getMarkerStyle(c,{datum:t,highlighted:!1,xKey:i,yKey:n,sizeKey:o,labelKey:f},b),x=null!==(e=this.title)&&void 0!==e?e:u,{datum:k,xValue:E,yValue:O,sizeValue:A,label:{text:D}}=t,L=mt(a.formatDatum(E)),T=mt(l.formatDatum(O));let N=`<b>${mt(h??i)}</b>: ${L}<br><b>${mt(u??n)}</b>: ${T}`;return o&&(N+=`<br><b>${mt(p??o)}</b>: ${mt(String(A))}`),f&&(N=`<b>${mt(g??f)}</b>: ${mt(D)}<br>`+N),d.toTooltipHtml({title:x,content:N,backgroundColor:_},{datum:k,xKey:i,xName:h,yKey:n,yName:u,sizeKey:o,sizeName:p,labelKey:f,labelName:g,title:x,color:_,seriesId:y})}getLegendData(){var t;const{id:e,data:i,xKey:n,yKey:o,sizeKey:r,yName:a,title:l,visible:c,marker:d}=this,{shape:h,fill:u,stroke:p,fillOpacity:f,strokeOpacity:g,strokeWidth:y}=d;return i?.length&&n&&o&&r?[{legendType:"category",id:e,itemId:o,seriesId:e,enabled:c,label:{text:null!==(t=l??a)&&void 0!==t?t:o},marker:{shape:h,fill:u??"rgba(0, 0, 0, 0)",stroke:p??"rgba(0, 0, 0, 0)",fillOpacity:f??1,strokeOpacity:g??1,strokeWidth:y??0}}]:[]}animateEmptyUpdateReady({markerSelections:t,labelSelections:e}){Gr(this,this.ctx.animationManager,t),kt(this,"labels",this.ctx.animationManager,e)}getDatumId(t){return un([`${t.xValue}`,`${t.yValue}`,t.label.text])}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new z}}Xt.className="BubbleSeries",Xt.type="bubble",m([S(Y),v("design:type",String)],Xt.prototype,"title",void 0),m([S(Y),v("design:type",String)],Xt.prototype,"labelKey",void 0),m([S(Y),v("design:type",String)],Xt.prototype,"xName",void 0),m([S(Y),v("design:type",String)],Xt.prototype,"yName",void 0),m([S(Y),v("design:type",String)],Xt.prototype,"sizeName",void 0),m([S(Y),v("design:type",String)],Xt.prototype,"labelName",void 0),m([S(Y),v("design:type",String)],Xt.prototype,"xKey",void 0),m([S(Y),v("design:type",String)],Xt.prototype,"yKey",void 0),m([S(Y),v("design:type",String)],Xt.prototype,"sizeKey",void 0),m([S(Y),v("design:type",String)],Xt.prototype,"colorKey",void 0),m([S(Y),v("design:type",String)],Xt.prototype,"colorName",void 0),m([S(Ys),v("design:type",Array)],Xt.prototype,"colorDomain",void 0),m([S(rn),v("design:type",Array)],Xt.prototype,"colorRange",void 0);const sg={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",instanceConstructor:Xt,seriesDefaults:{axes:[{type:Pe_NUMBER,position:Ie_BOTTOM},{type:Pe_NUMBER,position:Ie_LEFT}]},themeTemplate:{__extends__:pi,tooltip:{position:{type:"node"}},marker:{__extends__:En,maxSize:30,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:wt,color:Yt}},paletteFactory:ms},og=["count","sum","mean"],rg=j(s=>og.includes(s),"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean");var Jr=function(s){return s[s.Bin=0]="Bin",s[s.Label=1]="Label",s}(Jr||{});class Pt extends ui{constructor(t){super({moduleCtx:t,pickModes:[vt.EXACT_SHAPE_MATCH],datumSelectionGarbageCollection:!1,animationResetFns:{datum:$r,label:xi}}),this.label=new Gt,this.tooltip=new be,this.fill=void 0,this.stroke=void 0,this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.areaPlot=!1,this.aggregation="sum",this.binCount=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.strokeWidth=1,this.shadow=void 0,this.calculatedBins=[]}deriveBins(t){if(void 0===this.binCount){const e=Ks(t[0],t[1],10),i=cn(t[0],t[1],10),n=e[0];return[[n-i,n],...e.map(r=>[r,r+i])]}return this.calculateNiceBins(t,this.binCount)}calculateNiceBins(t,e){const i=Math.floor(t[0]),n=t[1],o=e||1,{start:r,binSize:a}=this.calculateNiceStart(i,n,o);return this.getBins(r,n,a,o)}getBins(t,e,i,n){const o=[];for(let r=0;r<n;r++){const a=Math.round(10*(t+r*i))/10;let l=Math.round(10*(t+(r+1)*i))/10;r===n-1&&(l=Math.max(l,e)),o[r]=[a,l]}return o}calculateNiceStart(t,e,i){const n=Math.abs(e-t)/i,o=Math.floor(Math.log10(n)),r=Math.pow(10,o);return{start:Math.floor(t/r)*r,binSize:n}}processData(t){return R(this,void 0,void 0,function*(){const{xKey:e,yKey:i,data:n,areaPlot:o,aggregation:r}=this,a=[ie(this,e,!0),kl];if(i){let c=cr(this,"groupCount");"count"===r||("sum"===r?c=function Dl(s,t,e){return{id:t,scopes:[s.id],type:"aggregate",matchGroupIds:e?[e]:void 0,aggregateFunction:i=>to(i),groupAggregateFunction:(i,n=[0,0])=>{var o,r;return n[0]+=null!==(o=i?.[0])&&void 0!==o?o:0,n[1]+=null!==(r=i?.[1])&&void 0!==r?r:0,n}}}(this,"groupAgg"):"mean"===r&&(c=function Tl(s,t,e){return{id:t,scopes:[s.id],matchGroupIds:e?[e]:void 0,type:"aggregate",aggregateFunction:n=>to(n),groupAggregateFunction:(n,o=[0,0,-1])=>{var r,a;return o[0]+=null!==(r=n?.[0])&&void 0!==r?r:0,o[1]+=null!==(a=n?.[1])&&void 0!==a?a:0,o[2]++,o},finalFunction:(n=[0,0,0])=>{const o=n[0]+n[1];return o>=0?[0,o/n[2]]:[o/n[2],0]}}}(this,"groupAgg"))),o&&(c=dr(this,"groupAgg",c)),a.push(bt(this,i,!0,{invalidValue:void 0}),c)}else{let c=cr(this,"groupAgg");o&&(c=dr(this,"groupAgg",c)),a.push(c)}!this.ctx.animationManager.isSkipped()&&this.processedData&&a.push(hn(this.processedData,!1)),yield this.requestDataModel(t,n??[],{props:a,dataVisible:this.visible,groupByFn:c=>{var d;const h=Jt(c.domain.keys[0]);if(0===h.length)return c.domain.groups=[],()=>[];const u=null!==(d=this.bins)&&void 0!==d?d:this.deriveBins(h),p=u.length;return this.calculatedBins=[...u],f=>{const g=f.keys[0];for(let y=0;y<p;y++){const b=u[y];if(g>=b[0]&&g<b[1]||y===p-1&&g<=b[1])return b}return[]}}}),this.animationState.transition("updateData")})}getSeriesDomain(t){var e,i,n,o;const{processedData:r,dataModel:a}=this;if(!r||!a||!this.calculatedBins.length)return[];const l=a.getDomain(this,"groupAgg","aggregate",r),c=null===(e=this.calculatedBins)||void 0===e?void 0:e[0][0],d=null===(i=this.calculatedBins)||void 0===i?void 0:i[(null!==(o=null===(n=this.calculatedBins)||void 0===n?void 0:n.length)&&void 0!==o?o:0)-1][1];return Jt(t===I.X?[c,d]:l)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e;return R(this,void 0,void 0,function*(){const{axes:i,processedData:n,ctx:{callbackCache:o}}=this,r=i[I.X],a=i[I.Y];if(!(this.visible&&r&&a&&n&&"grouped"===n.type))return[];const{scale:l}=r,{scale:c}=a,{fill:d,stroke:h,strokeWidth:u,id:p,yKey:f="",xKey:g=""}=this,y=[],{label:{formatter:b=(A=>String(A.value)),fontStyle:_,fontWeight:x,fontSize:k,fontFamily:E,color:O}}=this;return n.data.forEach(A=>{var D;const{aggValues:[[L,T]]=[[0,0]],datum:N,datum:{length:w},keys:P,keys:[V,$]}=A,q=l.convert(V),tt=l.convert($),et=L+T,Q=c.convert(0),lt=c.convert(et),dt=tt-q,Dt=Math.abs(lt-Q),Kt=0!==et?{text:null!==(D=o.call(b,{value:et,datum:N,seriesId:p,xKey:g,yKey:f,xName:this.xName,yName:this.yName}))&&void 0!==D?D:String(et),fontStyle:_,fontWeight:x,fontSize:k,fontFamily:E,fill:O,x:q+dt/2,y:lt+Dt/2}:void 0;y.push({series:this,datum:N,aggregatedValue:et,frequency:w,domain:P,yKey:f,xKey:g,x:q,y:lt,xValue:q,yValue:lt,width:dt,height:Dt,midPoint:{x:q+dt/2,y:lt+Dt/2},fill:d,stroke:h,strokeWidth:u,label:Kt})}),[{itemId:null!==(e=this.yKey)&&void 0!==e?e:this.id,nodeData:y,labelData:y,scales:t.calculateScaling.call(this),animationValid:!0,visible:this.visible}]})}nodeFactory(){return new _e}updateDatumSelection(t){return R(this,void 0,void 0,function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,n=>{n.tag=Jr.Bin,n.crisp=!0},n=>n.domain.join("_"))})}updateDatumNodes(t){return R(this,void 0,void 0,function*(){const{datumSelection:e,isHighlight:i}=t,{fillOpacity:n,strokeOpacity:o,shadow:r,highlightStyle:{item:{fill:a,fillOpacity:l=n,stroke:c,strokeWidth:d}}}=this;e.each((h,u,p)=>{var f,g;const y=i&&void 0!==d?d:u.strokeWidth,b=i?l:n;h.fill=null!==(f=i?a:void 0)&&void 0!==f?f:u.fill,h.stroke=null!==(g=i?c:void 0)&&void 0!==g?g:u.stroke,h.fillOpacity=b,h.strokeOpacity=o,h.strokeWidth=y,h.lineDash=this.lineDash,h.lineDashOffset=this.lineDashOffset,h.fillShadow=r,h.zIndex=i?Le.highlightedZIndex:p,h.visible=u.height>0})})}updateLabelSelection(t){return R(this,void 0,void 0,function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,n=>{n.tag=Jr.Label,n.pointerEvents=qt.None,n.textAlign="center",n.textBaseline="middle"})})}updateLabelNodes(t){return R(this,void 0,void 0,function*(){const{labelSelection:e}=t,i=this.label.enabled;e.each((n,o)=>{const r=o.label;r&&i?(n.text=r.text,n.x=r.x,n.y=r.y,n.fontStyle=r.fontStyle,n.fontWeight=r.fontWeight,n.fontSize=r.fontSize,n.fontFamily=r.fontFamily,n.fill=r.fill,n.visible=!0):n.visible=!1})})}getTooltipHtml(t){const{xKey:e,yKey:i="",axes:n}=this,o=n[I.X],r=n[I.Y];if(!e||!o||!r)return"";const{xName:a,yName:l,fill:c,tooltip:d,aggregation:h,id:u}=this,{aggregatedValue:p,frequency:f,domain:[g,y]}=t,b=`${mt(a??e)}: ${o.formatDatum(g)} - ${o.formatDatum(y)}`;let _=i?`<b>${mt(l??i)} (${h})</b>: ${r.formatDatum(p)}<br>`:"";return _+=`<b>Frequency</b>: ${f}`,d.toTooltipHtml({title:b,backgroundColor:c,content:_},{datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},xKey:e,xName:a,yKey:i,yName:l,color:c,title:b,seriesId:u})}getLegendData(t){var e;const{id:i,data:n,xKey:o,yName:r,visible:a,fill:l,stroke:c,fillOpacity:d,strokeOpacity:h,strokeWidth:u}=this;return n&&0!==n.length&&"category"===t?[{legendType:"category",id:i,itemId:o,seriesId:i,enabled:a,label:{text:null!==(e=r??o)&&void 0!==e?e:"Frequency"},marker:{fill:l??"rgba(0, 0, 0, 0)",stroke:c??"rgba(0, 0, 0, 0)",fillOpacity:d,strokeOpacity:h,strokeWidth:u}}]:[]}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){const i=Es(Os(!0,this.axes));Et(this.id,"datums",this.ctx.animationManager,t,i),kt(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){var e,i;const n=null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff,o=Es(Os(!0,this.axes));Et(this.id,"datums",this.ctx.animationManager,t.datumSelections,o,(r,a)=>this.getDatumId(a),n),kt(this,"labels",this.ctx.animationManager,t.labelSelections)}getDatumId(t){return un(t.domain.map(e=>`${e}`))}isLabelEnabled(){return this.label.enabled}}Pt.className="HistogramSeries",Pt.type="histogram",m([S(St),v("design:type",String)],Pt.prototype,"fill",void 0),m([S(St),v("design:type",String)],Pt.prototype,"stroke",void 0),m([S(C(0,1)),v("design:type",Object)],Pt.prototype,"fillOpacity",void 0),m([S(C(0,1)),v("design:type",Object)],Pt.prototype,"strokeOpacity",void 0),m([S(mi),v("design:type",Array)],Pt.prototype,"lineDash",void 0),m([S(C(0)),v("design:type",Number)],Pt.prototype,"lineDashOffset",void 0),m([S(Y),v("design:type",String)],Pt.prototype,"xKey",void 0),m([S(nt),v("design:type",Boolean)],Pt.prototype,"areaPlot",void 0),m([S(Bs()),v("design:type",Array)],Pt.prototype,"bins",void 0),m([S(rg),v("design:type",String)],Pt.prototype,"aggregation",void 0),m([S(Z(0)),v("design:type",Number)],Pt.prototype,"binCount",void 0),m([S(Y),v("design:type",String)],Pt.prototype,"xName",void 0),m([S(Y),v("design:type",String)],Pt.prototype,"yKey",void 0),m([S(Y),v("design:type",String)],Pt.prototype,"yName",void 0),m([S(C(0)),v("design:type",Number)],Pt.prototype,"strokeWidth",void 0);const ag={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",instanceConstructor:Pt,seriesDefaults:{axes:[{type:Pe_NUMBER,position:Ie_BOTTOM},{type:Pe_NUMBER,position:Ie_LEFT}]},themeTemplate:{__extends__:pi,strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:wt,color:An,formatter:void 0},shadow:{enabled:!1,color:Tn,xOffset:3,yOffset:3,blur:5}},paletteFactory:({takeColors:s})=>{const{fills:[t],strokes:[e]}=s(1);return{fill:t,stroke:e}}};class pe extends ui{constructor(t){super({moduleCtx:t,hasMarkers:!0,pickModes:[vt.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,vt.NEAREST_NODE,vt.EXACT_SHAPE_MATCH],markerSelectionGarbageCollection:!1,animationResetFns:{path:Hr({getOpacity:()=>this.getOpacity()}),label:xi,marker:(e,i)=>Object.assign(Object.assign({},{opacity:1,scalingX:1,scalingY:1}),xs(0,i))}}),this.label=new Gt,this.marker=new se,this.tooltip=new be,this.title=void 0,this.stroke="#874349",this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2,this.strokeOpacity=1,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0}processData(t){return R(this,void 0,void 0,function*(){const{xKey:e,yKey:i,data:n}=this;if(null==e||null==i||null==n)return;const o=!this.ctx.animationManager.isSkipped(),{isContinuousX:r,isContinuousY:a}=this.isContinuous(),l=[];r||(l.push(ie(this,e,r,{id:"xKey"})),o&&this.processedData&&l.push(hn(this.processedData))),o&&l.push(ns(this,r?["xValue"]:[])),l.push(bt(this,e,r,{id:"xValue"}),bt(this,i,a,{id:"yValue",invalidValue:void 0})),yield this.requestDataModel(t,n,{props:l}),this.animationState.transition("updateData")})}getSeriesDomain(t){const{axes:e,dataModel:i,processedData:n}=this;if(!n||!i)return[];const o=e[I.X],r=e[I.Y],a=i.resolveProcessedDataDefById(this,"xValue");if(t===I.X){const l=i.getDomain(this,"xValue","value",n);return"value"===a?.def.type&&"category"===a.def.valueType?l:Jt(Ee(l),o)}return Jt(i.getDomain(this,"yValue","value",n),r)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e,i,n;return R(this,void 0,void 0,function*(){const{processedData:o,dataModel:r,axes:a}=this,l=a[I.X],c=a[I.Y];if(!(o&&r&&l&&c))return[];const{label:d,yKey:h="",xKey:u=""}=this,p=l.scale,f=c.scale,g=(null!==(e=p.bandwidth)&&void 0!==e?e:0)/2,y=(null!==(i=f.bandwidth)&&void 0!==i?i:0)/2,b=[],_=this.marker.enabled?this.marker.size:0,x=r.resolveProcessedDataIndexById(this,"xValue").index,k=r.resolveProcessedDataIndexById(this,"yValue").index;let O,E=!0;for(let A=0;A<o.data.length;A++){const{datum:D,values:L}=O??o.data[A],T=L[x],N=L[k];if(void 0===N)E=!0;else{const w=p.convert(T)+g;if(isNaN(w)){E=!0,O=void 0;continue}O=void 0===(null===(n=o.data[A+1])||void 0===n?void 0:n.values[k])?void 0:o.data[A+1];const P=f.convert(N)+y,V=this.getLabelText(d,{value:N,datum:D,xKey:u,yKey:h,xName:this.xName,yName:this.yName},$=>ee($)?$.toFixed(2):String($));b.push({series:this,datum:D,yKey:h,xKey:u,point:{x:w,y:P,moveTo:E,size:_},midPoint:{x:w,y:P},yValue:N,xValue:T,capDefaults:{lengthRatioMultiplier:this.marker.getDiameter(),lengthMax:1/0},label:V?{text:V,fontStyle:d.fontStyle,fontWeight:d.fontWeight,fontSize:d.fontSize,fontFamily:d.fontFamily,textAlign:"center",textBaseline:"bottom",fill:d.color}:void 0}),E=!1}}return[{itemId:h,nodeData:b,labelData:b,scales:t.calculateScaling.call(this),visible:this.visible}]})}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(Oi(t))}updatePathNodes(t){var e,i;return R(this,void 0,void 0,function*(){const{paths:[n],opacity:o,visible:r,animationEnabled:a}=t,{seriesRectHeight:l,seriesRectWidth:c}=this.nodeDataDependencies;n.setProperties({fill:void 0,lineJoin:"round",pointerEvents:qt.None,opacity:o,stroke:this.stroke,strokeWidth:this.getStrokeWidth(this.strokeWidth),strokeOpacity:this.strokeOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset}),a||(n.visible=r),null==n.clipPath&&(n.clipPath=new Bi,n.clipScalingX=1,n.clipScalingY=1),null===(e=n.clipPath)||void 0===e||e.clear({trackChanges:!0}),null===(i=n.clipPath)||void 0===i||i.rect(-25,-25,(c??0)+50,(l??0)+50)})}updateMarkerSelection(t){return R(this,void 0,void 0,function*(){let{nodeData:e}=t;const{markerSelection:i}=t,{shape:n,enabled:o}=this.marker;return e=n&&o?e:[],this.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(e,void 0,r=>this.getDatumId(r))})}updateMarkerNodes(t){return R(this,void 0,void 0,function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:n="",yKey:o="",marker:r,stroke:a,strokeWidth:l,strokeOpacity:c}=this,d=te(i&&this.highlightStyle.item,r.getStyle(),{stroke:a,strokeWidth:l,strokeOpacity:c}),h=this.ctx.animationManager.isSkipped();e.each((u,p)=>{this.updateMarkerStyle(u,r,{datum:p,highlighted:i,xKey:n,yKey:o},d,{applyTranslation:h})}),i||this.marker.markClean()})}updateLabelSelection(t){return R(this,void 0,void 0,function*(){let{labelData:e}=t;const{labelSelection:i}=t,{shape:n,enabled:o}=this.marker;return e=n&&o?e:[],i.update(e)})}updateLabelNodes(t){return R(this,void 0,void 0,function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:n,fontWeight:o,fontSize:r,fontFamily:a,color:l}=this.label;e.each((c,d)=>{const{point:h,label:u}=d;d&&u&&i?(c.fontStyle=n,c.fontWeight=o,c.fontSize=r,c.fontFamily=a,c.textAlign=u.textAlign,c.textBaseline=u.textBaseline,c.text=u.text,c.x=h.x,c.y=h.y-10,c.fill=l,c.visible=!0):c.visible=!1})})}getTooltipHtml(t){var e;const{xKey:i,yKey:n,axes:o}=this,r=o[I.X],a=o[I.Y];if(!(i&&n&&r&&a))return"";const{xName:l,yName:c,tooltip:d,marker:h,id:u}=this,{datum:p,xValue:f,yValue:g}=t,y=r.formatDatum(f),b=a.formatDatum(g),_=mt(null!==(e=this.title)&&void 0!==e?e:c),x=mt(y+": "+b),k=te({fill:h.stroke},h.getStyle(),{strokeWidth:this.strokeWidth}),{fill:E}=this.getMarkerStyle(h,{datum:t,xKey:i,yKey:n,highlighted:!1},k);return d.toTooltipHtml({title:_,content:x,backgroundColor:E},Object.assign({datum:p,xKey:i,xName:l,yKey:n,yName:c,title:_,color:E,seriesId:u},this.getModuleTooltipParams(p)))}getLegendData(t){var e,i,n,o,r,a,l,c;const{id:d,data:h,xKey:u,yKey:p,yName:f,visible:g,title:y,marker:b,stroke:_,strokeOpacity:x}=this;return h?.length&&u&&p&&"category"===t?[{legendType:"category",id:d,itemId:p,seriesId:d,enabled:g,label:{text:null!==(e=y??f)&&void 0!==e?e:p},marker:{shape:b.shape,fill:null!==(i=b.fill)&&void 0!==i?i:"rgba(0, 0, 0, 0)",stroke:null!==(o=null!==(n=b.stroke)&&void 0!==n?n:_)&&void 0!==o?o:"rgba(0, 0, 0, 0)",fillOpacity:null!==(r=b.fillOpacity)&&void 0!==r?r:1,strokeOpacity:null!==(l=null!==(a=b.strokeOpacity)&&void 0!==a?a:x)&&void 0!==l?l:1,strokeWidth:null!==(c=b.strokeWidth)&&void 0!==c?c:0}}]:[]}updatePaths(t){return R(this,void 0,void 0,function*(){this.updateLinePaths([t.paths],[t.contextData])})}updateLinePaths(t,e){e.forEach(({nodeData:i},n)=>{const[o]=t[n],{path:r}=o;r.clear({trackChanges:!0});for(const a of i)a.point.moveTo?r.moveTo(a.point.x,a.point.y):r.lineTo(a.point.x,a.point.y);o.checkPathDirty()})}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,annotationSelections:n,contextData:o,paths:r}=t,{animationManager:a}=this.ctx,{seriesRectWidth:l=0}=this.nodeDataDependencies;this.updateLinePaths(r,o),Ur(this,a,r.flat()),Mt(e,xs),jr(this,a,e,l),kt(this,"labels",a,i),kt(this,"annotations",a,n)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateLinePaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:n}=this.ctx,{markerSelections:o,labelSelections:r,annotationSelections:a,contextData:l,paths:c,previousContextData:d}=t;if(super.resetAllAnimation(t),0===l.length||!d||0===d.length)return n.skipCurrentBatch(),void this.updateLinePaths(c,l);const[h]=c,[u]=l,[p]=d,f=function yd(s,t,e){var i;const n="category"===(null===(i=s.scales.x)||void 0===i?void 0:i.type),{result:o,resultMap:r}=n&&e?_s(s,t,e):Ss(s,t);let a="updated";if(t.visible&&!s.visible?a="removed":!t.visible&&s.visible&&(a="added"),void 0===o||void 0===r)return;const l=Xr(s,t,o,"fade",Vr),c=Yr(r,a);return Object.assign(Object.assign({},l),{marker:c})}(u,p,null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff);if(void 0===f)return n.skipCurrentBatch(),void this.updateLinePaths(c,l);Et(this.id,"marker",n,o,f.marker),Et(this.id,"path_properties",n,h,f.pathProperties),cd(this.id,"path_update",n,h,f.path),kt(this,"labels",n,r),kt(this,"annotations",n,a)}getDatumId(t){return un([`${t.xValue}`])}isLabelEnabled(){return this.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new z}}pe.className="LineSeries",pe.type="line",m([S(Y),v("design:type",String)],pe.prototype,"title",void 0),m([S(St),v("design:type",String)],pe.prototype,"stroke",void 0),m([S(mi),v("design:type",Array)],pe.prototype,"lineDash",void 0),m([S(C(0)),v("design:type",Number)],pe.prototype,"lineDashOffset",void 0),m([S(C(0)),v("design:type",Number)],pe.prototype,"strokeWidth",void 0),m([S(C(0,1)),v("design:type",Number)],pe.prototype,"strokeOpacity",void 0),m([S(Y),v("design:type",String)],pe.prototype,"xKey",void 0),m([S(Y),v("design:type",String)],pe.prototype,"xName",void 0),m([S(Y),v("design:type",String)],pe.prototype,"yKey",void 0),m([S(Y),v("design:type",String)],pe.prototype,"yName",void 0);const lg={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",instanceConstructor:pe,seriesDefaults:Zc,themeTemplate:{__extends__:pi,tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:{__extends__:En,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:wt,color:Yt,formatter:void 0}},enterpriseThemeTemplate:{errorBar:{cap:{lengthRatio:1}}},paletteFactory:s=>{const{marker:t}=ms(s);return{stroke:t.fill,marker:t}}};class oe extends ui{constructor(t){super({moduleCtx:t,pickModes:[vt.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,vt.NEAREST_NODE,vt.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:bs,label:xi}}),this.marker=new se,this.label=new Gt,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new ys,this.tooltip=new be}processData(t){var e;return R(this,void 0,void 0,function*(){const{xKey:i,yKey:n,labelKey:o,data:r}=this;if(null==i||null==n||null==r)return;const{isContinuousX:a,isContinuousY:l}=this.isContinuous(),{colorScale:c,colorDomain:d,colorRange:h,colorKey:u}=this,{dataModel:p,processedData:f}=yield this.requestDataModel(t,r,{props:[ie(this,i,a,{id:"xKey-raw"}),ie(this,n,l,{id:"yKey-raw"}),...o?[ie(this,o,!1,{id:"labelKey-raw"})]:[],bt(this,i,a,{id:"xValue"}),bt(this,n,l,{id:"yValue"}),...u?[bt(this,u,!0,{id:"colorValue"})]:[],...o?[bt(this,o,!1,{id:"labelValue"})]:[]],dataVisible:this.visible});if(u){const g=p.resolveProcessedDataIndexById(this,"colorValue").index;c.domain=null!==(e=d??f.domain.values[g])&&void 0!==e?e:[],c.range=h,c.update()}this.animationState.transition("updateData")})}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const n=t===I.X?"xValue":"yValue",o=e.resolveProcessedDataDefById(this,n),r=e.getDomain(this,n,"value",i);if("value"===o?.def.type&&"category"===o?.def.valueType)return r;const a=this.axes[t];return Jt(Ee(r),a)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e,i,n,o;return R(this,void 0,void 0,function*(){const{visible:r,axes:a,yKey:l="",xKey:c="",label:d,labelKey:h,dataModel:u,processedData:p}=this,f=a[I.X],g=a[I.Y];if(!(u&&p&&r&&f&&g))return[];const y=u.resolveProcessedDataIndexById(this,"xValue").index,b=u.resolveProcessedDataIndexById(this,"yValue").index,_=this.colorKey?u.resolveProcessedDataIndexById(this,"colorValue").index:-1,x=this.labelKey?u.resolveProcessedDataIndexById(this,"labelValue").index:-1,{colorScale:k,colorKey:E}=this,O=f.scale,A=g.scale,D=(null!==(e=O.bandwidth)&&void 0!==e?e:0)/2,L=(null!==(i=A.bandwidth)&&void 0!==i?i:0)/2,{marker:T}=this,N=[],w=d.getFont();for(const{values:P,datum:V}of null!==(n=p.data)&&void 0!==n?n:[]){const $=P[y],q=P[b],tt=O.convert($)+D,et=A.convert(q)+L,Q=this.getLabelText(this.label,{value:h?P[x]:q,datum:V,xKey:c,yKey:l,labelKey:h,xName:this.xName,yName:this.yName,labelName:this.labelName}),lt=ct.getTextSize(Q,w),dt=E?k.convert(P[_]):void 0;N.push({series:this,itemId:l,yKey:l,xKey:c,datum:V,xValue:$,yValue:q,capDefaults:{lengthRatioMultiplier:this.marker.getDiameter(),lengthMax:1/0},point:{x:tt,y:et,size:T.size},midPoint:{x:tt,y:et},fill:dt,label:Object.assign({text:Q},lt)})}return[{itemId:null!==(o=this.yKey)&&void 0!==o?o:this.id,nodeData:N,labelData:N,scales:t.calculateScaling.call(this),visible:this.visible}]})}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var t;return null===(t=this.contextNodeData)||void 0===t?void 0:t.reduce((e,i)=>e.concat(i.labelData),[])}markerFactory(){const{shape:t}=this.marker;return new(Oi(t))}updateMarkerSelection(t){return R(this,void 0,void 0,function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:n}}=this;return this.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(n?e:[])})}updateMarkerNodes(t){return R(this,void 0,void 0,function*(){const{xKey:e="",yKey:i="",labelKey:n,marker:o}=this,{markerSelection:r,isHighlight:a}=t,l=te(a&&this.highlightStyle.item,o.getStyle());r.each((c,d)=>{this.updateMarkerStyle(c,o,{datum:d,highlighted:a,xKey:e,yKey:i,labelKey:n},l)}),a||this.marker.markClean()})}updateLabelSelection(t){var e,i;return R(this,void 0,void 0,function*(){const{labelSelection:n}=t,{label:{enabled:o}}=this,a=(o&&null!==(i=null===(e=this.chart)||void 0===e?void 0:e.placeLabels().get(this))&&void 0!==i?i:[]).map(l=>Object.assign(Object.assign({},l.datum),{point:{x:l.x,y:l.y,size:l.datum.point.size}}));return n.update(a)})}updateLabelNodes(t){return R(this,void 0,void 0,function*(){const{labelSelection:e}=t,{label:i}=this;e.each((n,o)=>{var r,a,l,c;n.text=o.label.text,n.fill=i.color,n.x=null!==(a=null===(r=o.point)||void 0===r?void 0:r.x)&&void 0!==a?a:0,n.y=null!==(c=null===(l=o.point)||void 0===l?void 0:l.y)&&void 0!==c?c:0,n.fontStyle=i.fontStyle,n.fontWeight=i.fontWeight,n.fontSize=i.fontSize,n.fontFamily=i.fontFamily,n.textAlign="left",n.textBaseline="top"})})}getTooltipHtml(t){const{xKey:e,yKey:i,axes:n}=this,o=n[I.X],r=n[I.Y];if(!(e&&i&&o&&r))return"";const{marker:a,tooltip:l,xName:c,yName:d,labelKey:h,labelName:u,id:p,title:f=d}=this,g=te({fill:t.fill,strokeWidth:this.getStrokeWidth(a.strokeWidth)},a.getStyle()),{fill:y="gray"}=this.getMarkerStyle(a,{datum:t,highlighted:!1,xKey:e,yKey:i,labelKey:h},g),{datum:b,xValue:_,yValue:x,label:k}=t,E=mt(o.formatDatum(_)),O=mt(r.formatDatum(x));let A=`<b>${mt(c??e)}</b>: ${E}<br><b>${mt(d??i)}</b>: ${O}`;return h&&(A=`<b>${mt(u??h)}</b>: ${mt(k.text)}<br>`+A),l.toTooltipHtml({title:f,content:A,backgroundColor:y},Object.assign({datum:b,xKey:e,xName:c,yKey:i,yName:d,labelKey:h,labelName:u,title:f,color:y,seriesId:p},this.getModuleTooltipParams(b)))}getLegendData(t){var e,i,n,o,r;const{id:a,data:l,xKey:c,yKey:d,yName:h,title:u,visible:p,marker:f}=this,{fill:g,stroke:y,fillOpacity:b,strokeOpacity:_,strokeWidth:x}=f;return l?.length&&c&&d&&"category"===t?[{legendType:"category",id:a,itemId:d,seriesId:a,enabled:p,label:{text:null!==(e=u??h)&&void 0!==e?e:d},marker:{shape:f.shape,fill:null!==(n=null!==(i=f.fill)&&void 0!==i?i:g)&&void 0!==n?n:"rgba(0, 0, 0, 0)",stroke:null!==(r=null!==(o=f.stroke)&&void 0!==o?o:y)&&void 0!==r?r:"rgba(0, 0, 0, 0)",fillOpacity:b??1,strokeOpacity:_??1,strokeWidth:x??0}}]:[]}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,annotationSelections:n}=t;Gr(this,this.ctx.animationManager,e),kt(this,"labels",this.ctx.animationManager,i),kt(this,"annotations",this.ctx.animationManager,n)}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new z}}oe.className="ScatterSeries",oe.type="scatter",m([S(Y),v("design:type",String)],oe.prototype,"title",void 0),m([S(Y),v("design:type",String)],oe.prototype,"labelKey",void 0),m([S(Y),v("design:type",String)],oe.prototype,"xName",void 0),m([S(Y),v("design:type",String)],oe.prototype,"yName",void 0),m([S(Y),v("design:type",String)],oe.prototype,"labelName",void 0),m([S(Y),v("design:type",String)],oe.prototype,"xKey",void 0),m([S(Y),v("design:type",String)],oe.prototype,"yKey",void 0),m([S(Y),v("design:type",String)],oe.prototype,"colorKey",void 0),m([S(Y),v("design:type",String)],oe.prototype,"colorName",void 0),m([S(Ys),v("design:type",Array)],oe.prototype,"colorDomain",void 0),m([S(rn),v("design:type",Array)],oe.prototype,"colorRange",void 0);const cg={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",instanceConstructor:oe,seriesDefaults:{axes:[{type:Pe_NUMBER,position:Ie_BOTTOM},{type:Pe_NUMBER,position:Ie_LEFT}]},themeTemplate:{__extends__:pi,tooltip:{position:{type:"node"}},marker:{__extends__:En,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:wt,color:Yt}},enterpriseThemeTemplate:{errorBar:{cap:{lengthRatio:1}}},paletteFactory:ms},dg={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",instanceConstructor:at,seriesDefaults:{},themeTemplate:{__extends__:pi,title:{enabled:!0,fontStyle:void 0,fontWeight:kn,fontSize:14,fontFamily:wt,color:Dn,spacing:5},calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:wt,color:Yt,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:kn,fontSize:12,fontFamily:wt,color:An,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:!1,color:Tn,xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:wt,color:Yt,margin:2}},paletteFactory:({takeColors:s,colorsCount:t,userPalette:e})=>{const{fills:i,strokes:n}=s(t);return{fills:i,strokes:e?n:[xo],calloutLine:{colors:n}}}};let ko=(()=>{class s{constructor(e,i,n,o,r,a,l,c,d,h,u){this.series=e,this.index=i,this.datum=n,this.size=o,this.colorValue=r,this.fill=a,this.stroke=l,this.sumSize=c,this.depth=d,this.parent=h,this.children=u,this.midPoint={x:0,y:0}}contains(e){let i=e;for(;null!=i&&i.index>=this.index;){if(i===this)return!0;i=i.parent}return!1}walk(e,i=s.Walk.PreOrder){i===s.Walk.PreOrder&&e(this),this.children.forEach(n=>{n.walk(e,i)}),i===s.Walk.PostOrder&&e(this)}*[Symbol.iterator](){yield this;for(const e of this.children)yield*e}}return s.Walk={PreOrder:0,PostOrder:1},s})();class Li extends Le{constructor(t){super({moduleCtx:t,pickModes:[vt.EXACT_SHAPE_MATCH],contentGroupVirtual:!1}),this.childrenKey="children",this.sizeKey=void 0,this.colorKey=void 0,this.colorName=void 0,this.fills=Object.values(oi),this.strokes=Object.values(pn),this.colorRange=void 0,this.rootNode=new ko(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.animationState=new as("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)}},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),resize:e=>this.animateReadyResize(e)},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)}},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)}}},()=>this.checkProcessedDataAnimatable())}hasData(){return Array.isArray(this.data)&&this.data.length>0}processData(){var t,e;return R(this,void 0,void 0,function*(){const{childrenKey:i,sizeKey:n,colorKey:o,fills:r,strokes:a,colorRange:l}=this;let c=0,h=0,u=1/0,p=-1/0;const f=new Array((null!==(e=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==e?e:0)+1).fill(void 0),g=(k,E)=>{const O=(c+=1,c),A=null!=E.depth?E.depth+1:0,D=null!=i?k[i]:void 0,L=null==D||0===D.length;let T=null!=n?k[n]:void 0;T=Number.isFinite(T)?Math.max(T,0):L?1:0;const N=T;h=Math.max(h,A);const w=null!=o?k[o]:void 0;return"number"==typeof w&&(f[O]=w,u=Math.min(u,w),p=Math.max(p,w)),y(new ko(this,O,k,T,w,void 0,void 0,N,A,E,[]),D)},y=(k,E)=>(E?.forEach(O=>{const A=g(O,k);k.children.push(A),k.sumSize+=A.sumSize}),k),b=y(new ko(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.data),_=[u,p];let x;null!=l&&Number.isFinite(u)&&Number.isFinite(p)&&(x=new ys,x.domain=_,x.range=l,x.update()),b.children.forEach((k,E)=>{k.walk(O=>{let A;const D=f[O.index];null!=D&&(A=x?.convert(D)),A??(A=r?.[E%r.length]),O.fill=A,O.stroke=null==x?a?.[E%a.length]:"rgba(0, 0, 0, 0.2)"})}),this.rootNode=b,this.maxDepth=h,this.colorDomain=_})}update({seriesRect:t}){return R(this,void 0,void 0,function*(){yield this.updateSelections(),yield this.updateNodes();const e=this.getAnimationData();this.checkResize(t)&&this.animationState.transition("resize",e),this.animationState.transition("update",e)})}resetAllAnimation(t){var e;const i=null===(e=this.animationResetFns)||void 0===e?void 0:e.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),null!=i&&Mt(t.datumSelections,i)}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e;const i=null===(e=this.animationResetFns)||void 0===e?void 0:e.datum;null!=i&&Mt([t],i)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(){return{datumSelections:[this.groupSelection]}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(t){return"gradient"===t&&null!=this.colorKey&&null!=this.colorRange?[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.colorName,colorDomain:this.colorDomain,colorRange:this.colorRange}]:[]}getDatumIdFromData(t){return`${t.index}`}getDatumId(t){return this.getDatumIdFromData(t)}}m([S(Y),v("design:type",String)],Li.prototype,"childrenKey",void 0),m([S(Y),v("design:type",String)],Li.prototype,"sizeKey",void 0),m([S(Y),v("design:type",String)],Li.prototype,"colorKey",void 0),m([S(Y),v("design:type",String)],Li.prototype,"colorName",void 0),m([S($n),v("design:type",Array)],Li.prototype,"fills",void 0),m([S($n),v("design:type",Array)],Li.prototype,"strokes",void 0),m([S($n),v("design:type",Array)],Li.prototype,"colorRange",void 0);class As extends _i{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(t,e){return null}}m([S(C(0,1)),v("design:type",Number)],As.prototype,"innerRadiusRatio",void 0);const Ed={},Ad={},Qr={},Dd={},Td={},Nd=new Set,Ld=new Set,Md=new Set,Rd=new Set,ta={},wd={};function pg(s,t,e,i,n,o,r,a,l,c,d,h,u){Ed[s]=e,Ad[s]=i,Cd(s,n,o),r&&function yg(s,t){Td[s]=t}(s,r),a&&function xg(s){Nd.add(s)}(s),l&&function Sg(s){Ld.add(s)}(s),c&&function bg(s){Md.add(s)}(s),d&&function _g(s){Rd.add(s)}(s),h&&function kg(s,t){ta[s]=t}(s,h),u&&function Og(s,t){wd[s]=t}(s,u),function Gf(s,t){Vi[s]=t}(s,t)}function Cd(s,t,e={}){const i=Qr[s];Qr[s]=_t([i,t]),Dd[s]=_t([i,t,e])}function fg(s,t){const e=Ed[s];if(e)return new e(t);throw new Error(`AG Charts - unknown series type: ${s}`)}function Id(s){return Ad[s]}function Oo(s){return Nd.has(s)}function ea(s){return Ld.has(s)}function ia(s){return Md.has(s)}let Pd=(()=>{class s extends Se{constructor(e,i){super(e,i),this._data={}}performLayout(){const e=Object.create(null,{performLayout:{get:()=>super.performLayout}});return R(this,void 0,void 0,function*(){const i=yield e.performLayout.call(this),{seriesArea:{padding:n},seriesRoot:o}=this,r=i.clone();return i.shrink(n.left,"left"),i.shrink(n.top,"top"),i.shrink(n.right,"right"),i.shrink(n.bottom,"bottom"),this.seriesRect=i,this.animationRect=i,this.hoverRect=i,o.translationX=Math.floor(i.x),o.translationY=Math.floor(i.y),yield Promise.all(this.series.map(a=>R(this,void 0,void 0,function*(){yield a.update({seriesRect:i})}))),o.visible=this.series[0].visible,o.setClipRectInGroupCoordinateSpace(new U(i.x,i.y,i.width,i.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:r,paddedRect:i,visible:!0},axes:[]}),i})}}return s.className="HierarchyChart",s.type="hierarchy",s})();const na="white",Mg={fills:Array.from(Object.values(oi)),strokes:Array.from(Object.values(pn))},sa={get cartesian(){return{seriesTypes:ke.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:ke.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:ke.hierarchyTypes,commonOptions:[]}}},Rg=Object.values(sa).reduce((s,{commonOptions:t})=>[...s,...t],[]);class X{getPalette(){return Mg}static getAxisDefaults(){return{top:{},right:{},bottom:{},left:{},title:{enabled:!1,text:"Axis Title",spacing:25,fontStyle:void 0,fontWeight:kn,fontSize:Ti_MEDIUM,fontFamily:wt,color:Yt},label:{fontStyle:void 0,fontWeight:void 0,fontSize:Ti_SMALL,fontFamily:wt,padding:5,rotation:void 0,color:Yt,formatter:void 0,avoidCollisions:!0},line:{enabled:!0,width:1,color:vo},tick:{enabled:!1,width:1,color:vo},gridLine:{enabled:!0,style:[{stroke:mo,lineDash:[]}]},crossLines:{enabled:!1,fill:vs,stroke:vs,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:Ti_SMALL,fontFamily:wt,padding:5,color:Yt}}}}static getSeriesDefaults(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:7,strokeWidth:1,formatter:void 0}}static getLegendItemMarkerDefaults(){return{shape:void 0,size:15,padding:8}}static getCaptionWrappingDefaults(){return"hyphenate"}static getChartDefaults(){return{background:{visible:!0,fill:bo},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontStyle:void 0,fontWeight:kn,fontSize:Ti_LARGE,fontFamily:wt,color:Yt,wrapping:X.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontStyle:void 0,fontWeight:void 0,fontSize:Ti_MEDIUM,fontFamily:wt,color:Dn,wrapping:X.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",spacing:20,fontStyle:void 0,fontWeight:void 0,fontSize:Ti_MEDIUM,fontFamily:wt,color:"rgb(140, 140, 140)",wrapping:X.getCaptionWrappingDefaults()},legend:{position:"bottom",spacing:30,listeners:{},item:{paddingX:16,paddingY:8,marker:X.getLegendItemMarkerDefaults(),label:{color:Yt,fontStyle:void 0,fontWeight:void 0,fontSize:Ti_SMALL,fontFamily:wt,formatter:void 0}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:Yt},inactiveStyle:{fill:Dn},highlightStyle:{fill:Yt},label:{color:Yt}}},tooltip:{enabled:!0,range:"nearest",delay:0},listeners:{}}}constructor(t){t=ue({},t??{});const{overrides:e=null,palette:i=null}=t,n=this.createChartConfigPerChartType(this.getDefaults());if(e){const{common:o}=e,r=(a,l)=>{if(l)for(const c of a)n[c]=ue(n[c],l)};for(const[,{seriesTypes:a,commonOptions:l}]of Object.entries(sa)){const c=Object.assign({},o);for(const d of Rg)l.includes(d)||delete c[d];r(a,c)}ke.seriesTypes.forEach(a=>{e[a]&&(n[a]=ue(n[a],e[a]))})}this.palette=i??this.getPalette(),this.config=Object.freeze(this.templateTheme(n))}createChartConfigPerChartType(t){return Object.entries(sa).forEach(([e,{seriesTypes:i}])=>{const n=qc(e);i.forEach(o=>{const r=o;t[r]||(t[r]={},ue(t[r],n))})}),t}getDefaults(){let t={};const i=(n,o)=>{var r,a,l,c;const d=(n=>Object.assign(Object.assign(Object.assign({},function Mf(){return Xc}()),X.getChartDefaults()),qc(n)))(n),h={};for(const u of o){null!==(r=h[u])&&void 0!==r||(h[u]=ue({},d));const p=null!==(a=(c=h[u]).axes)&&void 0!==a?a:c.axes={},f=(s=u,Cs()?Dd[s]:Qr[s]);f&&(h[u].series=ue(h[u].series,f));for(const g of Mr.axesTypes){const y=kf(g);"cartesian"===n&&(p[g]=ue(p[g],null!==(l=X.cartesianAxisDefault[g])&&void 0!==l?l:{})),y&&(p[g]=ue(p[g],y))}}var s;return h};return t=ue(t,i("cartesian",ke.cartesianTypes)),t=ue(t,i("polar",ke.polarTypes)),t=ue(t,i("hierarchy",ke.hierarchyTypes)),t}templateTheme(t){const e=_t([t]),{extensions:i,properties:n}=this.getTemplateParameters();return Ii(e,(o,r)=>{if(r.__extends__){const a=r.__extends__,l=i.get(a);if(null==l)throw new Error("AG Charts - no template variable provided for: "+a);Object.keys(l).forEach(c=>{c in r||(r[c]=l[c])}),delete r.__extends__}if(r.__overrides__){const a=r.__overrides__,l=i.get(a);if(null==l)throw new Error("AG Charts - no template variable provided for: "+a);Object.assign(r,l),delete r.__overrides__}if(Array.isArray(r))for(let a=0;a<r.length;a++){const l=r[a];n.has(l)&&(r[a]=n.get(l))}else for(const[a,l]of Object.entries(r))n.has(l)&&(r[a]=n.get(l))}),e}static getWaterfallSeriesDefaultPositiveColors(){return{fill:oi.BLUE,stroke:pn.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:oi.ORANGE,stroke:pn.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:oi.GRAY,stroke:pn.GRAY}}getTemplateParameters(){const t=new Map;t.set(Jc,X.getChartDefaults()),t.set(id,X.getAxisDefaults()),t.set(Qc,X.getChartDefaults().legend),t.set(td,X.getChartDefaults().legend.item),t.set(ed,X.getLegendItemMarkerDefaults()),t.set(nd,X.getAxisDefaults().label),t.set(sd,X.getAxisDefaults().line),t.set(od,X.getAxisDefaults().tick),t.set(rd,X.getAxisDefaults().gridLine),t.set(pi,X.getSeriesDefaults()),t.set(ad,{}),t.set(En,X.getCartesianSeriesMarkerDefaults());const e=new Map;return e.set(wt,"Verdana, sans-serif"),e.set(Yt,"rgb(70, 70, 70)"),e.set(ld,"white"),e.set(Dn,"rgb(140, 140, 140)"),e.set(mo,"rgb(224,234,241)"),e.set(vo,"rgb(195, 195, 195)"),e.set(vs,"rgb(70, 70, 70)"),e.set(An,na),e.set(bo,na),e.set(Tn,"rgba(0, 0, 0, 0.5)"),e.set(Ye,[oi.ORANGE,oi.YELLOW,oi.GREEN]),e.set(Fr,["#ffffff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),e.set(Br,["#ffffff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),e.set(xo,na),e.set(Fe,X.getWaterfallSeriesDefaultPositiveColors()),e.set(Be,X.getWaterfallSeriesDefaultNegativeColors()),e.set(Ge,X.getWaterfallSeriesDefaultTotalColors()),e.set(je,X.getWaterfallSeriesDefaultTotalColors().stroke),{extensions:t,properties:e}}}X.cartesianAxisDefault={number:Object.assign(Object.assign({},X.getAxisDefaults()),{line:Object.assign(Object.assign({},X.getAxisDefaults().line),{enabled:!1})}),log:Object.assign(Object.assign({},X.getAxisDefaults()),{base:10,line:Object.assign(Object.assign({},X.getAxisDefaults().line),{enabled:!1})}),category:Object.assign(Object.assign({},X.getAxisDefaults()),{groupPaddingInner:.1,label:Object.assign(Object.assign({},X.getAxisDefaults().label),{autoRotate:!0}),gridLine:Object.assign(Object.assign({},X.getAxisDefaults().gridLine),{enabled:!1})}),"grouped-category":Object.assign({},X.getAxisDefaults()),time:Object.assign(Object.assign({},X.getAxisDefaults()),{gridLine:Object.assign(Object.assign({},X.getAxisDefaults().gridLine),{enabled:!1})})};const oa="#182732",Hi={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Eo={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},wg={fills:Array.from(Object.values(Hi)),strokes:Array.from(Object.values(Eo))};class Qe extends X{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Hi.BLUE,stroke:Eo.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Hi.ORANGE,stroke:Eo.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Hi.GRAY,stroke:Eo.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Fe,Qe.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Be,Qe.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(Ge,Qe.getWaterfallSeriesDefaultTotalColors()),t.properties.set(je,Qe.getWaterfallSeriesDefaultTotalColors().stroke),t.properties.set(xo,oa),t.properties.set(Yt,"white"),t.properties.set(Dn,"#7D91A0"),t.properties.set(mo,"#545A6E"),t.properties.set(vs,"white"),t.properties.set(Ye,[Hi.ORANGE,Hi.YELLOW,Hi.GREEN]),t.properties.set(Fr,["#192834","#253746","#324859","#3f596c","#4d6a80"]),t.properties.set(Br,["#192834","#3b5164","#496275","#577287","#668399"]),t.properties.set(bo,oa),t.properties.set(An,oa),t}getPalette(){return wg}constructor(t){super(t)}}const Xi={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Ao={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},Cg={fills:Array.from(Object.values(Xi)),strokes:Array.from(Object.values(Ao))};class Nn extends Qe{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Xi.BLUE,stroke:Ao.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Xi.RED,stroke:Ao.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Xi.GRAY,stroke:Ao.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Fe,Nn.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Be,Nn.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(Ge,Nn.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Ye,[Xi.ORANGE,Xi.YELLOW,Xi.GREEN]),t.properties.set(je,Nn.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Cg}}const Ki={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Do={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},Ig={fills:Array.from(Object.values(Ki)),strokes:Array.from(Object.values(Do))};class Ln extends X{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Ki.BLUE,stroke:Do.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Ki.RED,stroke:Do.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Ki.GRAY,stroke:Do.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Fe,Ln.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Be,Ln.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(Ge,Ln.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Ye,[Ki.ORANGE,Ki.YELLOW,Ki.GREEN]),t.properties.set(je,Ln.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Ig}}const Ds={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},ra={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff"},Bg={fills:Array.from(Object.values(Ds)),strokes:Array.from(Object.values(ra))};class Mn extends Qe{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Ds.BLUE,stroke:ra.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Ds.RED,stroke:ra.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#eeeeee"}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Fe,Mn.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Be,Mn.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(Ge,Mn.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Ye,[Ds.BLUE,Ds.RED]),t.properties.set(je,Mn.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Bg}}const Ts={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},aa={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb"},Yg={fills:Array.from(Object.values(Ts)),strokes:Array.from(Object.values(aa))};class Rn extends X{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Ts.BLUE,stroke:aa.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Ts.RED,stroke:aa.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#888888"}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Fe,Rn.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Be,Rn.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(Ge,Rn.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Ye,[Ts.BLUE,Ts.RED]),t.properties.set(je,Rn.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Yg}}const $i={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},To={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},Wg={fills:Array.from(Object.values($i)),strokes:Array.from(Object.values(To))};class wn extends Qe{static getWaterfallSeriesDefaultPositiveColors(){return{fill:$i.BLUE,stroke:To.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:$i.ORANGE,stroke:To.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:$i.GRAY,stroke:To.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Fe,wn.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Be,wn.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(Ge,wn.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Ye,[$i.ORANGE,$i.YELLOW,$i.GREEN]),t.properties.set(je,wn.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Wg}}const qi={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},No={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},zg={fills:Array.from(Object.values(qi)),strokes:Array.from(Object.values(No))};class Cn extends X{static getWaterfallSeriesDefaultPositiveColors(){return{fill:qi.BLUE,stroke:No.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:qi.ORANGE,stroke:No.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:qi.GRAY,stroke:No.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Fe,Cn.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Be,Cn.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(Ge,Cn.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Ye,[qi.ORANGE,qi.YELLOW,qi.GREEN]),t.properties.set(je,Cn.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return zg}}const Zi={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Lo={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#c18aff",YELLOW:"#fff653",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},Vg={fills:Array.from(Object.values(Zi)),strokes:Array.from(Object.values(Lo))};class In extends Qe{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Zi.BLUE,stroke:Lo.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Zi.ORANGE,stroke:Lo.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Zi.GRAY,stroke:Lo.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Fe,In.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Be,In.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(Ge,In.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Ye,[Zi.ORANGE,Zi.YELLOW,Zi.GREEN]),t.properties.set(je,In.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Vg}}const Ji={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Mo={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},Ug={fills:Array.from(Object.values(Ji)),strokes:Array.from(Object.values(Mo))};class Pn extends X{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Ji.BLUE,stroke:Mo.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Ji.ORANGE,stroke:Mo.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Ji.GRAY,stroke:Mo.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Fe,Pn.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Be,Pn.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(Ge,Pn.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Ye,[Ji.ORANGE,Ji.YELLOW,Ji.GREEN]),t.properties.set(je,Pn.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Ug}}const Ns=()=>new X,la=()=>new Qe,Hg={undefined:Ns,null:Ns,"ag-default":Ns,"ag-sheets":()=>new Cn,"ag-polychroma":()=>new Rn,"ag-vivid":()=>new Pn,"ag-material":()=>new Ln},Fd=Object.assign(Object.assign({},{undefined:la,null:la,"ag-default-dark":la,"ag-sheets-dark":()=>new wn,"ag-polychroma-dark":()=>new Mn,"ag-vivid-dark":()=>new In,"ag-material-dark":()=>new Nn}),Hg);function ca(s){var t;let e=function Kg(s){return void 0===s||"string"==typeof s||s instanceof X?s:"object"==typeof s?function Xg(s){if(null===s)return;let t=!0;const{baseTheme:e,palette:i,overrides:n}=s;if(void 0!==e&&"string"!=typeof e&&"object"!=typeof e&&(B.warn(`invalid theme.baseTheme type ${typeof e}, expected (string | object).`),t=!1),void 0!==n&&"object"!=typeof n&&(B.warn(`invalid theme.overrides type ${typeof n}, expected object.`),t=!1),"object"==typeof i){if(null!==i){const{fills:o,strokes:r}=i;Array.isArray(o)||(B.warn("theme.overrides.fills must be a defined array"),t=!1),Array.isArray(r)||(B.warn("theme.overrides.strokes must be a defined array"),t=!1)}}else void 0!==i&&(B.warn(`invalid theme.palette type ${typeof i}, expected object.`),t=!1);return t?s:void 0}(s):void B.warn(`invalid theme value type ${typeof s}, expected object.`)}(s);if(e instanceof X)return e;if(void 0===e||"string"==typeof e){const a=Fd[e];return a?a():(B.warnOnce(`the theme [${e}] is invalid, using [ag-default] instead.`),Ns())}const i=[];let n;for(;"object"==typeof e;)i.push(null!==(t=e.overrides)&&void 0!==t?t:{}),e.palette&&null==n&&(n=e.palette),e=e.baseTheme;i.reverse();const o=Object.assign({baseTheme:e,overrides:_t(i)},n?{palette:n}:{});return new((o.baseTheme?ca(o.baseTheme):Ns()).constructor)(o)}function Bd(s,t,e){const i=[];for(let n=0;n<e;n++)i.push(t[(n+s.colourIndex)%t.length]);return i}const Qi={avoidDeepClone:["data"]};function qg(s){var t,e,i,n;!function Zg(s){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach(([e,i])=>{var n;null!==(n=s.series)&&void 0!==n&&n.some(o=>null!=o[e])&&B.warnOnce(`Property [series.${e}] is deprecated, please use [series.${i}] and multiple series instead.`)})}(s);const o=Ui(s),r=function $g(s){if(void 0===s||"object"!=typeof s||null===s)return{};const{type:t,xOffset:e,yOffset:i}=s,n={};return"string"==typeof t&&(a=t,Object.keys({pointer:!0,node:!0}).includes(a))&&(n.type=t),"number"==typeof e&&!isNaN(e)&&isFinite(e)&&(n.xOffset=e),"number"==typeof i&&!isNaN(i)&&isFinite(i)&&(n.yOffset=i),n;var a}(null===(t=s.tooltip)||void 0===t?void 0:t.position),a=b=>{if(null!=b&&!(function Wf(s){return null!=s&&ke.has(s)}(b)||Uc(b)||Id(b)))throw new Error(`AG Charts - unknown series type: ${b}; expected one of: ${ke.seriesTypes}`)};a(o);for(const{type:b}of null!==(e=s.series)&&void 0!==e?e:[])null!=b&&a(b);s=function Qg(s){if(void 0===s.series||s.series.length<=1||!function Jg(s){for(const t of s)if(Oo(t.type))return!0;return!1}(s.series))return s;let t=[...s.series];if(Oo(t[0].type))B.warn(`series[0] of type '${t[0].type}' is incompatible with other series types. Only processing series[0]`),t=t.slice(0,1);else{const e=Array.from(new Set(t.filter(i=>Oo(i.type)).map(i=>i.type)));B.warnOnce(`Unable to mix these series types with the lead series type: ${e}`),t=t.filter(i=>!Oo(i.type))}return Object.assign(Object.assign({},s),{series:t})}(Object.assign(Object.assign({},s),{type:o}));let l="line";On(s)?l="line":go(s)?l="treemap":yo(s)&&(l="pie");let c=Id(o);(function Eg(s){var t,e;let i;for(const n of null!==(t=s.series)&&void 0!==t?t:[]){const{type:o="line"}=n,r=null===(e=ta[o])||void 0===e?void 0:e.call(ta,n);if(null!=r){if(null!=i&&i!=r)throw new Error("AG Charts - The provided series have incompatible directions");i=r}}return i})(s)&&(c=function Vf(s){var t;if(!On(s))return s;const[e,i]=null!==(t=s.axes)&&void 0!==t?t:[];return Object.assign(Object.assign({},s),{axes:[Object.assign(Object.assign({},e),{position:i.position}),Object.assign(Object.assign({},i),{position:e.position})]})}(c)),c=function Ag(s,t){var e;let i=t;for(const n of null!==(e=s.series)&&void 0!==e?e:[]){const{type:o}=n,r=null!=o?wd[o]:void 0;void 0!==r&&(i=Object.assign(Object.assign({},i),r(n)))}return i}(s,c);const d=function Uf(s){var t,e,i,n;const o={};for(const[r,a]of wo.entries())if(null!=s[r]&&a.length){null!==(t=o[r])&&void 0!==t||(o[r]={});for(const l of a)null!==(e=s[r])&&void 0!==e&&e.enabled&&null!==(i=s[l])&&void 0!==i&&i.enabled?(B.warnOnce(`the [${r}] module can not be used at the same time as [${l}], it will be disabled.`),o[r].enabled=!1):o[r].enabled=null===(n=s[r])||void 0===n?void 0:n.enabled}return o}(s);!function ry(s){Ii(s,(t,e)=>{!1===e.enabled&&Object.keys(e).forEach(i=>{"enabled"!==i&&delete e[i]})},{skip:["data","theme"]})}(s);const{context:h,mergedOptions:u,axesThemes:p,seriesThemes:f,theme:g}=function ey(s,t,e){const{theme:i,cleanedTheme:n,axesThemes:o,seriesThemes:r,userPalette:a}=function iy(s){var t;const e=ca(s.theme),i=e.config[Ui(s)],n=Object.entries(e.config).reduce((a,[l,{series:c}])=>(a[l]=c,a),{}),o=s.theme,r="object"==typeof o&&o.palette?o.palette:null;return{theme:e,axesThemes:null!==(t=i?.axes)&&void 0!==t?t:{},seriesThemes:n,cleanedTheme:_t([i??{},{axes:ge,series:ge}]),userPalette:r}}(t),l={colourIndex:0,palette:i.palette,userPalette:a,theme:i},c=_t([s=i.templateTheme(s),n,t,e],Qi);return en.isEnterprise||function Tg(s){var t,e,i,n;const o=[],r=function Yf(s){var t;return null!==(t=Vi[s])&&void 0!==t?t:"unknown"}(Ui(s));for(const{type:a,chartTypes:l,optionsKey:c,optionsInnerKey:d,identifier:h}of _n)if("unknown"===r||l.includes(r))if("root"===a||"legend"===a){const u=s[c];if(null==u)continue;d?u[d]&&(o.push(`${c}.${d}`),delete u[d]):(o.push(c),delete s[c])}else if("axis"===a){if(!("axes"in s)||null===(t=s.axes)||void 0===t||!t.some(u=>u.type===h))continue;o.push(`axis[type=${h}]`),s.axes=s.axes.filter(u=>u.type!==h)}else if("axis-option"===a){if(!("axes"in s)||null===(e=s.axes)||void 0===e||!e.some(u=>u[c]))continue;o.push(`axis.${c}`),s.axes.forEach(u=>{u[c]&&delete u[c]})}else if("series"===a){if(null===(i=s.series)||void 0===i||!i.some(u=>u.type===h))continue;o.push(`series[type=${h}]`),s.series=s.series.filter(u=>u.type!==h)}else if("series-option"===a){if(null===(n=s.series)||void 0===n||!n.some(u=>u[c]))continue;o.push(`series.${c}`),s.series.forEach(u=>{u[c]&&delete u[c]})}o.length>0&&B.warnOnce(["unable to use these enterprise features as 'ag-charts-enterprise' has not been loaded:","",...o,"","See: https://charts.ag-grid.com/javascript/installation/"].join("\n"))}(c),{context:l,mergedOptions:c,axesThemes:o,seriesThemes:r,theme:i}}(c,s,d);u.series=function Lg(s,t){var e;const i=[],n=t.map(c=>{var d;const h=null!==(d=c.type)&&void 0!==d?d:"line",u=ia(h),p=ea(h),f=function vg(s){return Rd.has(s)}(h);if(c.grouped&&!u&&B.warnOnce(`unsupported grouping of series type: ${h}`),c.stacked&&!p&&B.warnOnce(`unsupported stacking of series type: ${h}`),!u&&!p)return c;let g=!1,y=!1;return void 0===c.stacked&&void 0===c.grouped?(g=p&&f,y=u&&!g):void 0===c.stacked?(g=p&&f&&!(c.grouped&&u),y=u&&!g&&!!c.grouped):void 0===c.grouped?(g=p&&c.stacked,y=u&&!g):(g=p&&c.stacked,y=u&&!g&&c.grouped),Object.assign(Object.assign({},c),{stacked:g,grouped:y})}),o=function Ng(s){var t,e,i,n;const o={},r={},a={},c=[];for(const d of s){const h=null!==(t=d.type)&&void 0!==t?t:"line",u=ea(h),p=ia(h);if(!u&&!p){c.push({type:"ungrouped",opts:[d]});continue}const{stacked:f,stackGroup:g,grouped:y,xKey:b}=d,_=null!=g||!0===f;null!==(e=a[h])&&void 0!==e||(a[h]=!1),a[h]||(a[h]=_&&u);const x=!0===y;let k=[g??(!0===f?"stacked":void 0),x?"grouped":void 0].filter(O=>null!=O).join("-");k||(k="default-ag-charts-group");const E=`${h}-${b}-${k}`;if(_&&u){const O=null!==(i=r[E])&&void 0!==i?i:r[E]={type:"stack",opts:[]};0===O.opts.length&&c.push(O),O.opts.push(d)}else if(x&&p){const O=null!==(n=o[E])&&void 0!==n?n:o[E]={type:"group",opts:[]};0===O.opts.length&&c.push(O),O.opts.push(d)}else c.push({type:"ungrouped",opts:[d]})}return Object.values(a).some(d=>d),c}(n),r=o.reduce((c,d)=>{var h,u;if("ungrouped"===d.type)return c;const p=null!==(h=d.opts[0].type)&&void 0!==h?h:"line";return null!==(u=c[p])&&void 0!==u||(c[p]=0),c[p]+="stack"===d.type?1:d.opts.length,c},{}),a={},l=c=>{var d,h;let u=0;const p=null!==(d=c.opts[0].type)&&void 0!==d?d:"line";if(null!==(h=a[p])&&void 0!==h||(a[p]=0),"stack"===c.type){for(const f of c.opts)f.seriesGrouping={groupIndex:a[p],groupCount:r[p],stackIndex:u++,stackCount:c.opts.length};a[p]++}else if("group"===c.type)for(const f of c.opts)f.seriesGrouping={groupIndex:a[p],groupCount:r[p],stackIndex:0,stackCount:0},a[p]++;else for(const f of c.opts)f.seriesGrouping=void 0;return c.opts};Tt.create(!0,"opts")("processSeriesOptions() - series grouping: ",o);for(const c of o){const d=null!==(e=c.opts[0].type)&&void 0!==e?e:"line";ia(d)||ea(d)?i.push(...l(c)):i.push(...c.opts)}return i}(0,(null!==(i=u.series)&&void 0!==i?i:[]).map(b=>{var _;const x=null!==(_=b.type)&&void 0!==_?_:l,k=function ty(s,t,e,i){var n,o;const r=_t([Object.assign({},i),null===(n=s.tooltip)||void 0===n?void 0:n.position],Qi);return _t([null!==(o=e[t])&&void 0!==o?o:{},Object.assign(Object.assign({},s),{type:t,tooltip:Object.assign(Object.assign({},s.tooltip),{position:r})})],Qi)}(b,x,f,r);return"pie"===x&&function cy(s,t,e){e.innerLabels=Array.isArray(t.innerLabels)?t.innerLabels.map(i=>_t([s.innerLabels,i])):ge}(f.pie,b,k),k})).map(b=>function ny(s,t,...e){const i=function sy(s,t){const e=function mg(s){return Td[s]}(t.type);if(!e)return{};const{palette:{fills:i,strokes:n},userPalette:o,theme:r}=s,a=Math.max(i.length,n.length);return e({userPalette:o,themeTemplateParameters:r.getTemplateParameters(),colorsCount:a,takeColors:l=>{const c={fills:Bd(s,i,l),strokes:Bd(s,n,l)};return s.colourIndex+=l,c}})}(s,t);return _t([...e,i,t,{stacked:ge,grouped:ge}],Qi)}(h,b)).map(b=>g.templateTheme(b));const y=b=>{const _=function zf(s){return null!=s&&Mr.has(s)}(b);return _||B.warnOnce(`unknown axis type: ${b}; expected one of: ${Mr.axesTypes}, ignoring.`),_};if("axes"in u){let b=!0;for(const{type:x}of null!==(n=u.axes)&&void 0!==n?n:[])b&&(b=y(x));const _=b?u.axes:c.axes;u.axes=_?.map(x=>{var k,E,O,A,D;const L=x.type;let T;return b&&(T=null===(k=c.axes)||void 0===k?void 0:k.find(({type:w})=>w===L)),function oy(s,t){const e={top:ge,bottom:ge,left:ge,right:ge};if(s.crossLines){Array.isArray(s.crossLines)||(B.warn("axis[].crossLines should be an array."),s.crossLines=[]);const{crossLines:n}=t;s.crossLines=s.crossLines.map(o=>_t([n,o]))}return _t([t,{crossLines:ge},s,e],Qi)}(x,_t([null!==(E=p[L])&&void 0!==E?E:{},null!==(D=null===(O=p[L])||void 0===O?void 0:O[null!==(A=x.position)&&void 0!==A?A:"unknown"])&&void 0!==D?D:{},T]))}),function ay(s,t){var e,i,n,o;if(void 0===(null===(e=s.legend)||void 0===e?void 0:e.enabled)&&void 0===(null===(i=t.legend)||void 0===i?void 0:i.enabled)){if(null!==(n=t.legend)&&void 0!==n||(t.legend={}),(null!==(o=s.series)&&void 0!==o?o:[]).length>1)return void(t.legend.enabled=!0);t.legend.enabled=!1}}(s,u)}return function ly(s,t){Ii(s,(e,i,n)=>{if(!n)return;const{_enabledFromTheme:o}=n;null!=o&&delete n._enabledFromTheme,"enabled"in n&&(o||null==i.enabled&&(n.enabled=!0))},{skip:["data","theme"]},t),Ii(t,(e,i)=>{null!=i._enabledFromTheme&&delete i._enabledFromTheme},{skip:["data","theme"]})}(s,u),u}let Gd=(()=>{class s extends Se{constructor(e,i){super(e,i),this.padding=new Si(40),this.axisGroup.zIndex=ut.AXIS_FOREGROUND_ZINDEX}performLayout(){const e=Object.create(null,{performLayout:{get:()=>super.performLayout}});return R(this,void 0,void 0,function*(){const i=yield e.performLayout.call(this),n=i.clone();return this.computeSeriesRect(i),yield this.computeCircle(i),this.axes.forEach(o=>o.update()),this.hoverRect=i,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:n,paddedRect:i,visible:!0},axes:[]}),i})}updateAxes(e,i,n){var o,r;const a=this.axes.find(u=>u.direction===I.X),l=this.axes.find(u=>u.direction===I.Y);if(!(a instanceof As&&l instanceof As))return;const c=a.scale,d=null===(o=c.ticks)||void 0===o?void 0:o.call(c).map(u=>c.convert(u)),h=l.innerRadiusRatio;a.innerRadiusRatio=h,null===(r=a.computeRange)||void 0===r||r.call(a),a.gridLength=n,l.gridAngles=d,l.gridRange=a.range,l.range=[n,n*h],[a,l].forEach(u=>{u.translation.x=e,u.translation.y=i,u.calculateLayout()})}computeSeriesRect(e){const{seriesArea:{padding:i}}=this;e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e,this.animationRect=e}computeCircle(e){return R(this,void 0,void 0,function*(){const i=this.series.filter(h=>h instanceof yr),n=this.axes.filter(h=>h instanceof As),o=(h,u,p)=>{this.updateAxes(h,u,p),i.forEach(g=>{g.centerX=h,g.centerY=u,g.radius=p});const f=i.filter(g=>g instanceof at);if(f.length>1){const g=f.map(y=>{const b=y.getInnerRadius();return{series:y,innerRadius:b}}).sort((y,b)=>y.innerRadius-b.innerRadius);g[g.length-1].series.surroundingRadius=void 0;for(let y=0;y<g.length-1;y++)g[y].series.surroundingRadius=g[y+1].innerRadius}},r=e.x+e.width/2,a=e.y+e.height/2,l=Math.max(0,Math.min(e.width,e.height)/2);let c=l;o(r,a,c);const d=({hideWhenNecessary:h=!1}={})=>R(this,void 0,void 0,function*(){const u=[];for(const g of[...n,...i]){const y=yield g.computeLabelsBBox({hideWhenNecessary:h},e);y&&u.push(y)}if(0===u.length)return void o(r,a,l);const p=U.merge(u),f=this.refineCircle(p,c,e);o(f.centerX,f.centerY,f.radius),f.radius!==c&&(c=f.radius)});return yield d(),yield d(),yield d(),yield d({hideWhenNecessary:!0}),yield d({hideWhenNecessary:!0}),{radius:c,centerX:r,centerY:a}})}refineCircle(e,i,n){const a=-i,l=i,c=i;let d=Math.max(0,-i-e.x),h=Math.max(0,a-e.y),u=Math.max(0,e.x+e.width-l),p=Math.max(0,e.y+e.height-c);d=u=Math.max(d,u),h=p=Math.max(h,p);let y=Math.min(n.width-d-u,n.height-h-p)/2;const x=Math.min(.5*n.width/2,.5*n.height/2);if(y<x){y=x;const O=d+u;if(2*y+(h+p)>n.height){const D=n.height-2*y;2*Math.min(h,p)>D?(h=D/2,p=D/2):h>p?h=D-p:p=D-h}if(2*y+O>n.width){const D=n.width-2*y;2*Math.min(d,u)>D?(d=D/2,u=D/2):d>u?d=D-u:u=D-d}}return{centerX:n.x+(n.width-(d+2*y+u))/2+d+y,centerY:n.y+(n.height-(h+2*y+p))/2+h+y,radius:y}}}return s.className="PolarChart",s.type="polar",s})();const Mi=Tt.create(!0,"opts");function jd(s){if(On(s))return"cartesian";if(yo(s))return"polar";if(go(s))return"hierarchy";throw new Error(`AG Chart - unknown type of chart for options with type: ${s.type}`)}let tn=(()=>{class s{static licenseCheck(e){var i,n,o;this.licenseChecked||(this.licenseManager=null===(i=en.licenseManager)||void 0===i?void 0:i.call(en,e),null===(n=this.licenseManager)||void 0===n||n.setLicenseKey(this.licenseKey),null===(o=this.licenseManager)||void 0===o||o.validateLicense(),this.licenseChecked=!0)}static setLicenseKey(e){this.licenseKey=e}static create(e){var i,n,o;this.licenseCheck(e);const r=Ls.createOrUpdate(e);return!(null===(i=this.licenseManager)||void 0===i)&&i.isDisplayWatermark()&&(null===(n=en.injectWatermark)||void 0===n||n.call(en,null!==(o=e.document)&&void 0!==o?o:document,r.chart.element,this.licenseManager.getWatermarkMessage())),r}static update(e,i){if(!Yi.isInstance(e))throw new Error(s.INVALID_CHART_REF_MESSAGE);Ls.createOrUpdate(i,e)}static updateDelta(e,i){if(!Yi.isInstance(e))throw new Error(s.INVALID_CHART_REF_MESSAGE);Ls.updateUserDelta(e,i)}static download(e,i){if(!(e instanceof Yi))throw new Error(s.INVALID_CHART_REF_MESSAGE);Ls.download(e,i)}static getImageDataURL(e,i){if(!(e instanceof Yi))throw new Error(s.INVALID_CHART_REF_MESSAGE);return Ls.getImageDataURL(e,i)}}return s.INVALID_CHART_REF_MESSAGE="AG Charts - invalid chart reference passed",s.licenseChecked=!1,s})(),Ls=(()=>{class s{static initialiseModules(){s.initialised||(function hg(){Ve(Kc),Ve(If),Ve(Qf),Ve(ig),Ve(sg),Ve(lg),Ve(cg),Ve(dg),Ve(ag)}(),function Dg(){var s;for(const t of ze){if("enterprise"===t.packageType&&!Tf(t)&&B.errorOnce("Unexpected enterprise module registered: "+t.identifier),null!=cs.constructors&&null!=t.optionConstructors&&Object.assign(cs.constructors,t.optionConstructors),"root"===t.type&&t.themeTemplate)for(const e of t.chartTypes)jf(e,t.themeTemplate);if("root"===t.type&&!(null===(s=t.conflicts)||void 0===s)&&s.length&&Oa(t.optionsKey,t.conflicts),"series"===t.type){if(t.chartTypes.length>1)throw new Error("AG Charts - Module definition error: "+t.identifier);pg(t.identifier,t.chartTypes[0],t.instanceConstructor,t.seriesDefaults,t.themeTemplate,t.enterpriseThemeTemplate,t.paletteFactory,t.solo,t.stackable,t.groupable,t.stackedByDefault,t.swapDefaultAxesCondition,t.customDefaultsFunction)}if("series-option"===t.type&&t.themeTemplate)for(const e of t.seriesTypes)Cd(e,t.themeTemplate);if("axis-option"===t.type&&t.themeTemplate)for(const e of t.axisTypes){const i=t.themeTemplate[e],n=Object.assign(Object.assign({},t.themeTemplate),"object"==typeof i?i:{});for(const o of t.axisTypes)delete n[o];Vc(e,n)}"axis"===t.type&&(Sf(t.identifier,t.instanceConstructor),t.themeTemplate&&Vc(t.identifier,t.themeTemplate)),"legend"===t.type&&Lf(t.identifier,t.optionsKey,0,t.themeTemplate)}if(Cs()){const t=function Nf(){return _n.filter(({useCount:s})=>null==s||0===s)}();t.length>0&&B.errorOnce("Enterprise modules expected but not registered: ",t)}}(),s.initialised=!0)}static createOrUpdate(e,i){var n,o;s.initialiseModules(),Mi(">>> AgChartV2.createOrUpdate() user options",e);const{overrideDevicePixelRatio:r,document:a,window:l}=e,c=le(e,["overrideDevicePixelRatio","document","window"]),d={overrideDevicePixelRatio:r,document:a,window:l},h=qg(c);let u=i?.chart;(null==u||jd(c)!==jd(u.processedOptions))&&(u=s.createChartInstance(h,d,u)),null==i?i=new Yi(u):i.chart=u,Tt.check()&&typeof window<"u"&&(null!==(n=(o=window).agChartInstances)&&void 0!==n||(o.agChartInstances={}),window.agChartInstances[u.id]=u);const p=u;p.queuedUserOptions.push(c);const f=()=>{const g=p.queuedUserOptions.indexOf(c);p.queuedUserOptions.splice(0,g)};return p.requestFactoryUpdate(()=>R(this,void 0,void 0,function*(){if(p.destroyed)return;const g=Ue(p.processedOptions,h);null!=g?(yield s.updateDelta(p,g,c),f()):f()})),i}static updateUserDelta(e,i){var n;const{chart:o,chart:{queuedUserOptions:r}}=e,a=null!==(n=r[r.length-1])&&void 0!==n?n:o.userOptions,l=_t([a,i]);Mi(">>> AgChartV2.updateUserDelta() user delta",i),Mi("AgChartV2.updateUserDelta() - base options",a),s.createOrUpdate(l,e)}static download(e,i){(()=>R(this,void 0,void 0,function*(){const o=yield s.prepareResizedChart(e,i),{chart:r}=o;r.scene.download(i?.fileName,i?.fileFormat),o!==e&&o.destroy()}))().catch(o=>B.errorOnce(o))}static getImageDataURL(e,i){return R(this,void 0,void 0,function*(){const n=yield s.prepareResizedChart(e,i),{chart:o}=n,r=o.scene.canvas.getDataURL(i?.fileFormat);return n!==e&&n.destroy(),r})}static prepareResizedChart(e,i){var n;return R(this,void 0,void 0,function*(){const{chart:o}=e;let{width:r,height:a}=i??{};const l=o.width,c=o.height;if(void 0===r&&void 0===a||1===o.scene.canvas.pixelRatio&&l===r&&c===a)return e;r??(r=l),a??(a=c);const h=Object.assign(Object.assign({},o.userOptions),{container:document.createElement("div"),width:r,height:a,autoSize:!1,overrideDevicePixelRatio:1});Cs()&&(null!==(n=h.animation)&&void 0!==n||(h.animation={}),h.animation.enabled=!1);const u=s.createOrUpdate(h);return yield u.chart.waitForUpdate(),u})}static createChartInstance(e,i,n){const o=n?.destroy({keepTransferableResources:!0});if(On(e))return new Gc(i,o);if(go(e))return new Pd(i,o);if(yo(e))return new Gd(i,o);throw new Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}static updateDelta(e,i,n){var o;return R(this,void 0,void 0,function*(){null==i.type&&(i=Object.assign(Object.assign({},i),{type:null!==(o=e.processedOptions.type)&&void 0!==o?o:Ui(i)})),!e.destroyed&&(Mi("AgChartV2.updateDelta() - applying delta",i),function dy(s,t,e){var i,n,o,r;const a=_t([null!==(i=s.processedOptions)&&void 0!==i?i:{},t],Qi),l=function hy(s,t){const e=o=>s instanceof Gc&&o.chartTypes.includes("cartesian")||s instanceof Gd&&o.chartTypes.includes("polar")||s instanceof Pd&&o.chartTypes.includes("hierarchy");let i=!1;const n=(o,r,a)=>{const l=ze.filter(c=>c.type===o);for(const c of l){const d=e(c)&&null!=t[c.optionsKey];d!==s.isModuleEnabled(c)&&(i=!0,d?r(c):a(c))}};return n("root",o=>s.addModule(o),o=>s.removeModule(o)),n("legend",o=>s.addLegendModule(o),o=>s.removeLegendModule(o)),i}(s,a),c=["type","data","series","listeners","theme","legend.listeners"];if(On(t)||yo(t))c.push("axes");else if(!go(t))throw new Error(`AG Charts - couldn't apply configuration, check type of options and chart: ${t.type}`);t.listeners&&Yd(s,t.listeners),da(s,t,{skip:c});let d=!1,h=!1;t.series&&t.series.length>0&&(h=function uy(s,t){const e=t.series;if(!e)return!1;const i=["type","direction","xKey","yKey","sizeKey","angleKey","stacked","stackGroup"];let n=s.series.length===e.length;for(let o=0;o<s.series.length&&n;o++)for(const r of i)n&&(n=s.series[o][r]===e[o][r]);return n?(s.series.forEach((o,r)=>{var a,l,c,d;const u=Ue(null!==(c=null===(l=null===(a=s.processedOptions)||void 0===a?void 0:a.series)||void 0===l?void 0:l[r])&&void 0!==c?c:{},null!==(d=e[r])&&void 0!==d?d:{});u&&(Mi(`AgChartV2.applySeries() - applying series diff idx ${r}`,u),Wd(o,u,{path:`series[${r}]`,index:r}),o.markNodeDataDirty())}),!1):(Mi("AgChartV2.applySeries() - creating new series instances"),s.series=function fy(s,t){var e;const i=[],n=s.getModuleContext();let o=0;for(const r of t??[]){const a=`series[${o++}]`,l=null!==(e=r.type)&&void 0!==e?e:"unknown";if(Uc(l)&&!Of(l))continue;const c=fg(l,n);gy(c,r),Wd(c,r,{path:a,index:o}),i.push(c)}return i}(s,e),!0)}(s,t),d=!0),"axes"in a&&Array.isArray(a.axes)&&function py(s,t,e){const i=t.axes;if(!i)return!1;if(!e&&s.axes.length===i.length&&s.axes.every((o,r)=>o.type===i[r].type)){const o=s.processedOptions;if(On(o))return s.axes.forEach((r,a)=>{var l,c;const h=Ue(null!==(c=null===(l=o.axes)||void 0===l?void 0:l[a])&&void 0!==c?c:{},i[a]);Mi(`AgChartV2.applyAxes() - applying axis diff idx ${a}`,h),da(r,h,{path:`axes[${a}]`,skip:["axes[].type"]})}),!0}return s.axes=function yy(s,t){const e=[],i=["axes[].type"],n=s.getModuleContext();let o=0;for(const r of t??[]){const a=_f(r.type,n),l=`axes[${o++}]`;my(a,r),da(a,r,{path:l,skip:i}),e.push(a)}return e}(s,i),!0}(s,a,h)&&(d=!0);const u=t.series,p=!!t.data||u?.some(x=>null!=x.data),f=function Rf(){return Hc}(),g=Object.values(f).some(x=>null!=t[x]);d=d||p||g||null!=t.title&&null!=t.subtitle,t.data&&(s.data=t.data),!(null===(n=t.legend)||void 0===n)&&n.listeners&&Object.assign(s.legend.listeners,null!==(o=t.legend.listeners)&&void 0!==o?o:{}),t.listeners&&s.updateAllSeriesListeners(),s.processedOptions=a,s.userOptions=_t([null!==(r=s.userOptions)&&void 0!==r?r:{},e],Qi);const _=d||l?K.PROCESS_DATA:K.PERFORM_LAYOUT;Mi("AgChartV2.applyChartOptions() - update type",K[_]),s.update(_,{forceNodeDataRefresh:d,newAnimationBatch:!0})}(e,i,n))})}}return s.initialised=!1,s})();function gy(s,t){const e=ze.filter(i=>"series-option"===i.type);for(const i of e)i.optionsKey in t&&i.seriesTypes.includes(s.type)&&s.getModuleMap().addModule(i)}function my(s,t){let e=!1;const i=ze.filter(n=>"axis-option"===n.type);for(const n of i){const o=null!=t[n.optionsKey],r=s.getModuleMap();o!==r.isModuleEnabled(n)&&(e=!0,o?r.addModule(n):r.removeModule(n))}return e}function Yd(s,t){s.clearEventListeners();const e=Object.entries(t??{});for(const[i,n]of e)"function"==typeof n&&s.addEventListener(i,n)}function da(s,t,{skip:e,path:i}={}){return nn(s,t,Object.assign(Object.assign(Object.assign({},Xl()),{skip:e}),i?{path:i}:{}))}function Wd(s,t,{path:e,index:i}={}){var n,o;const a=Xl(),l=null!==(n=a.constructors)&&void 0!==n?n:{},c={constructors:Object.assign(Object.assign({},l),{title:"pie"===s.type?Vl:l.title})},h=nn(s,t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a),c),{skip:["series[].type",...["series[].listeners","series[].seriesGrouping"]??[]]}),e?{path:e}:{}),{idx:i??-1}));null!=t?.listeners&&Yd(s,t.listeners);const{seriesGrouping:u}=t;return"seriesGrouping"in(t??{})&&(s.seriesGrouping=u?Object.freeze(Object.assign(Object.assign({},null!==(o=s.seriesGrouping)&&void 0!==o?o:{}),u)):u),h}Object.entries(Fd).reduce((s,[t,e])=>(s[t]=e(),s),{});let by=(()=>{class s{constructor(e){this._initialised=!1,this.options={},this.onChartReady=new Ri.vpe,this._nativeElement=e.nativeElement}ngAfterViewInit(){const e=this.applyContainerIfNotSet(this.options);this.chart=tn.create(e),this._initialised=!0,this.chart.chart.waitForUpdate().then(()=>{this.onChartReady.emit(this.chart)})}ngOnChanges(e){!this._initialised||!this.chart||tn.update(this.chart,this.applyContainerIfNotSet(this.options))}ngOnDestroy(){this._initialised&&this.chart&&(this.chart.destroy(),this.chart=void 0,this._initialised=!1)}applyContainerIfNotSet(e){return e.container?e:{...e,container:this._nativeElement}}}return s.\u0275fac=function(e){return new(e||s)(Ri.Y36(Ri.SBq))},s.\u0275cmp=Ri.Xpm({type:s,selectors:[["ag-charts-angular"]],inputs:{options:"options"},outputs:{onChartReady:"onChartReady"},features:[Ri.TTD],decls:0,vars:0,template:function(e,i){},encapsulation:2}),s})(),xy=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=Ri.oAB({type:s}),s.\u0275inj=Ri.cJS({}),s})()}}]);